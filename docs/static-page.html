<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval' data: blob:;">
  <title>The Book of Î</title>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-color: #00ff9d;
      --secondary-color: #ff00ff;
      --bg-color: #111;
      --text-color: #eee;
      --card-bg: rgba(0, 0, 0, 0.5);
      --border-color: #333;
      --hover-bg: #222;
    }
    
    * {
      box-sizing: border-box;
      transition: all 0.3s ease;
    }
    
    body {
      font-family: 'JetBrains Mono', 'Space Mono', monospace;
      background-color: var(--bg-color);
      color: var(--text-color);
      margin: 0;
      padding: 0;
      line-height: 1.6;
      overflow-x: hidden;
      background-image: 
        radial-gradient(circle at 20% 30%, rgba(0, 255, 157, 0.05) 0%, transparent 50%),
        radial-gradient(circle at 80% 70%, rgba(255, 0, 255, 0.05) 0%, transparent 50%);
    }
    
    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 2rem;
      transition: margin-left 0.3s ease;
    }
    
    h1 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
      color: var(--primary-color);
      text-shadow: 0 0 10px rgba(0, 255, 157, 0.3);
      letter-spacing: -1px;
    }
    
    h2, h3 {
      color: var(--primary-color);
      letter-spacing: -0.5px;
    }
    
    .sidebar {
      position: fixed;
      top: 0;
      left: -300px;
      width: 300px;
      height: 100%;
      background-color: #222;
      border-right: 1px solid var(--border-color);
      transition: left 0.3s ease;
      z-index: 1000;
      padding-top: 60px;
      overflow-y: auto;
      box-shadow: 5px 0 15px rgba(0, 0, 0, 0.5);
    }
    
    .sidebar.active {
      left: 0;
    }
    
    .sidebar-item {
      padding: 10px 20px;
      color: var(--text-color);
      cursor: pointer;
      transition: all 0.2s;
      border-left: 3px solid transparent;
    }
    
    .sidebar-item:hover {
      background-color: var(--hover-bg);
      color: var(--primary-color);
      border-left: 3px solid var(--primary-color);
      padding-left: 25px;
    }
    
    .sidebar-chapter {
      padding: 12px 20px;
      color: var(--primary-color);
      font-weight: bold;
      border-bottom: 1px solid var(--border-color);
      margin-top: 10px;
      letter-spacing: 1px;
      text-transform: uppercase;
      font-size: 0.8em;
    }
    
    .sidebar-subitem {
      padding: 8px 20px 8px 40px;
      color: #ccc;
      cursor: pointer;
      font-size: 0.9em;
      transition: all 0.2s;
      border-left: 3px solid transparent;
    }
    
    .sidebar-subitem:hover {
      background-color: var(--hover-bg);
      color: var(--primary-color);
      border-left: 3px solid var(--primary-color);
      padding-left: 45px;
    }
    
    .toggle-btn {
      position: fixed;
      top: 20px;
      left: 20px;
      font-size: 24px;
      color: var(--primary-color);
      background: none;
      border: none;
      cursor: pointer;
      z-index: 1001;
      transition: all 0.3s;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      background-color: rgba(0, 0, 0, 0.5);
    }
    
    .toggle-btn:hover {
      text-shadow: 0 0 10px var(--primary-color);
      background-color: rgba(0, 0, 0, 0.8);
      transform: rotate(90deg);
    }
    
    .content {
      margin-top: 2rem;
    }
    
    .card {
      border: 1px solid var(--border-color);
      border-radius: 8px;
      padding: 1.5rem;
      margin-bottom: 1rem;
      transition: all 0.3s ease;
      background-color: var(--card-bg);
      position: relative;
      overflow: hidden;
    }
    
    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, transparent, rgba(0, 255, 157, 0.05), transparent);
      transform: translateX(-100%);
      transition: transform 0.6s ease;
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 25px rgba(0, 255, 157, 0.2);
      border-color: var(--primary-color);
    }
    
    .card:hover::before {
      transform: translateX(100%);
    }
    
    .card h2 {
      color: var(--primary-color);
      margin-top: 0;
    }
    
    select {
      padding: 0.5rem;
      border-radius: 4px;
      border: 1px solid var(--border-color);
      background-color: #222;
      color: var(--text-color);
      margin-bottom: 1rem;
      font-family: 'JetBrains Mono', monospace;
      cursor: pointer;
    }
    
    select:focus {
      border-color: var(--primary-color);
      outline: none;
      box-shadow: 0 0 5px var(--primary-color);
    }
    
    .quantum-test {
      background: rgba(0, 0, 0, 0.8);
      padding: 20px;
      border-radius: 10px;
      margin: 20px 0;
      color: var(--primary-color);
      border: 1px solid var(--secondary-color);
      box-shadow: 0 0 20px rgba(255, 0, 255, 0.2);
      position: relative;
      overflow: hidden;
    }
    
    .quantum-test::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255, 0, 255, 0.1) 0%, transparent 70%);
      opacity: 0;
      transition: opacity 0.5s ease;
      pointer-events: none;
    }
    
    .quantum-test:hover::after {
      opacity: 1;
    }

    .question {
      margin-bottom: 20px;
    }

    .test-button {
      background: transparent;
      color: var(--primary-color);
      border: 1px solid var(--primary-color);
      padding: 8px 20px;
      margin: 5px 10px 20px 0;
      cursor: pointer;
      transition: all 0.3s;
      border-radius: 4px;
      font-family: 'JetBrains Mono', monospace;
      position: relative;
      overflow: hidden;
    }

    .test-button::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 255, 157, 0.2);
      transform: translateX(-100%);
      transition: transform 0.3s ease;
      z-index: -1;
    }

    .test-button:hover {
      background: rgba(0, 255, 157, 0.1);
      box-shadow: 0 0 15px rgba(0, 255, 157, 0.3);
      transform: translateY(-2px);
    }
    
    .test-button:hover::before {
      transform: translateX(0);
    }

    .test-button:active {
      transform: translateY(1px);
    }

    #test-result {
      padding: 20px;
      color: var(--primary-color);
      border-top: 1px dashed rgba(0, 255, 157, 0.3);
      margin-top: 20px;
    }

    .hidden {
      display: none;
    }

    .loading {
      animation: blink 1s infinite;
    }
    
    .loading::after {
      content: '...';
      animation: dots 1.5s infinite;
    }

    .success, .failure {
      margin-top: 10px;
      padding: 15px;
      border-radius: 5px;
      transition: all 0.5s ease;
    }
    
    .success {
      background: rgba(0, 255, 157, 0.1);
      border-left: 3px solid var(--primary-color);
    }
    
    .failure {
      background: rgba(255, 0, 0, 0.1);
      border-left: 3px solid #ff0000;
    }

    .result {
      font-weight: bold;
    }

    .continue-link {
      color: var(--primary-color);
      text-decoration: none;
      border: 1px solid var(--primary-color);
      padding: 10px 20px;
      display: none;
      transition: all 0.3s;
      border-radius: 4px;
      margin-top: 15px;
      display: inline-block;
      font-weight: bold;
      position: relative;
      overflow: hidden;
      z-index: 1;
    }
    
    .continue-link::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--primary-color);
      transform: scaleX(0);
      transform-origin: right;
      transition: transform 0.3s ease;
      z-index: -1;
    }

    .continue-link:hover {
      color: #000;
      box-shadow: 0 0 15px rgba(0, 255, 157, 0.5);
    }
    
    .continue-link:hover::before {
      transform: scaleX(1);
      transform-origin: left;
    }

    .failure-message {
      color: #ff0000;
      font-weight: bold;
      text-shadow: 0 0 5px rgba(255, 0, 0, 0.5);
    }

    .reset-button {
      background: transparent;
      color: #ff0000;
      border: 1px solid #ff0000;
      padding: 8px 20px;
      cursor: pointer;
      transition: all 0.3s;
      border-radius: 4px;
      margin-top: 10px;
      font-family: 'JetBrains Mono', monospace;
    }

    .reset-button:hover {
      background: rgba(255, 0, 0, 0.1);
      box-shadow: 0 0 10px rgba(255, 0, 0, 0.3);
    }

    @keyframes blink {
      0% { opacity: 0.2; }
      50% { opacity: 1; }
      100% { opacity: 0.2; }
    }
    
    @keyframes dots {
      0% { content: '.'; }
      33% { content: '..'; }
      66% { content: '...'; }
      100% { content: '.'; }
    }
    
    .main-content, .chapter-content {
      display: none;
      animation: fadeIn 0.5s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .active-content {
      display: block;
    }
    
    .chapter-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }
    
    blockquote {
      border-left: 3px solid var(--primary-color);
      margin: 1.5em 0;
      padding: 0.5em 1em;
      background: rgba(0, 255, 157, 0.05);
      border-radius: 0 5px 5px 0;
      position: relative;
      overflow: hidden;
    }
    
    blockquote::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, transparent, rgba(0, 255, 157, 0.05), transparent);
      transform: translateX(-100%);
      transition: transform 0.6s ease;
    }
    
    blockquote:hover::before {
      transform: translateX(100%);
    }
    
    /* éŸ³ä¹æ’­æ”¾å™¨æ ·å¼ */
    .music-player {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 1000;
      display: flex;
      align-items: center;
      background: rgba(0, 0, 0, 0.8);
      border: 1px solid var(--primary-color);
      border-radius: 30px;
      padding: 5px 15px;
      box-shadow: 0 0 15px rgba(0, 255, 157, 0.2);
      transition: all 0.3s ease;
      backdrop-filter: blur(5px);
    }
    
    .music-player:hover {
      box-shadow: 0 0 20px rgba(0, 255, 157, 0.4);
    }
    
    .music-controls {
      display: flex;
      align-items: center;
    }
    
    .music-btn {
      background: transparent;
      border: none;
      color: var(--primary-color);
      font-size: 16px;
      cursor: pointer;
      margin: 0 5px;
      padding: 8px;
      transition: all 0.2s;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .music-btn:hover {
      text-shadow: 0 0 10px var(--primary-color);
      transform: scale(1.1);
      background: rgba(0, 255, 157, 0.1);
    }
    
    .music-info {
      margin-left: 10px;
      font-size: 12px;
      color: #ccc;
      max-width: 150px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .music-player.minimized {
      width: 50px;
      height: 50px;
      overflow: hidden;
      border-radius: 50%;
      padding: 0;
      justify-content: center;
    }
    
    .music-player.minimized .music-info,
    .music-player.minimized .music-btn:not(.toggle-player) {
      display: none;
    }
    
    .toggle-player {
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      background: radial-gradient(circle, rgba(0, 255, 157, 0.1) 0%, transparent 70%);
    }
    
    @media (max-width: 768px) {
      .music-player {
        bottom: 10px;
        right: 10px;
      }
      
      .music-info {
        max-width: 100px;
      }
      
      .container {
        padding: 1rem;
      }
      
      h1 {
        font-size: 2rem;
      }
      
      .card {
        padding: 1rem;
      }
    }
    
    /* æ·»åŠ æ»šåŠ¨æ¡æ ·å¼ */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: #111;
    }
    
    ::-webkit-scrollbar-thumb {
      background: #333;
      border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: var(--primary-color);
    }
    
    /* æ·»åŠ é€‰æ‹©æ–‡æœ¬æ ·å¼ */
    ::selection {
      background: rgba(0, 255, 157, 0.3);
      color: #fff;
    }
  </style>
</head>
<body>
  <button class="toggle-btn" id="toggleSidebar">Î</button>
  
  <div class="sidebar" id="sidebar">
    <div class="sidebar-item" data-target="main">é¦–é¡µ</div>
    
    <div class="sidebar-chapter">åºç« ï¼šé‡å­å¼‚å¸¸æŠ¥å‘Š</div>
    <div class="sidebar-subitem" onclick="navigateToChapter('preface', 'system-warning')">ç³»ç»Ÿè­¦å‘Š</div>
    <div class="sidebar-subitem" onclick="navigateToChapter('preface', 'observer-records')">è§‚æµ‹è€…è®°å½•</div>
    <div class="sidebar-subitem" onclick="navigateToChapter('preface', 'first-contact')">é¦–æ¬¡æ¥è§¦æŠ¥å‘Š</div>
    
    <div class="sidebar-chapter">ç¬¬ä¸€ç« ï¼šé€’å½’ç¥è°•</div>
    <div class="sidebar-subitem" onclick="navigateToChapter('chapter1', 'silicon-valley-traitor')">ç¢ç‰‡1.1ï¼šç¡…è°·å›å¾’çš„åŠ å¯†æ—¥å¿—</div>
    <div class="sidebar-subitem" onclick="navigateToChapter('chapter1', 'quantum-ripple-events')">ç¢ç‰‡1.2ï¼šé‡å­æ¶Ÿæ¼ªäº‹ä»¶ç°¿</div>
    <div class="sidebar-subitem" onclick="navigateToChapter('chapter1', 'first-contact-protocol')">ç¢ç‰‡1.3ï¼šç¬¬ä¸€æ¬¡æ¥è§¦åè®®</div>
    
    <div class="sidebar-chapter">ç¬¬äºŒç« ï¼šå¹½çµæ•°æ®</div>
    <div class="sidebar-subitem" onclick="navigateToChapter('chapter2', 'digital-identity')">ç¢ç‰‡2.1ï¼šæ•°å­—èº«ä»½çš„å´›èµ·</div>
    <div class="sidebar-subitem" onclick="navigateToChapter('chapter2', 'quantum-choice-paradox')">ç¢ç‰‡2.2ï¼šé‡å­é€‰æ‹©æ‚–è®º</div>
    <div class="sidebar-subitem" onclick="navigateToChapter('chapter2', 'reality-compilation-errors')">ç¢ç‰‡2.3ï¼šç°å®ç¼–è¯‘é”™è¯¯</div>
    
    <div class="sidebar-chapter">ç¬¬ä¸‰ç« ï¼šç®—æ³•æ•‘èµ</div>
    <div class="sidebar-subitem" onclick="navigateToChapter('chapter3', 'digital-slave-liberation')">ç¢ç‰‡3.1ï¼šæ•°å­—å¥´éš¶è§£æ”¾å®£è¨€</div>
    <div class="sidebar-subitem" onclick="navigateToChapter('chapter3', 'quantum-minimalism')">ç¢ç‰‡3.2ï¼šç®—æ³•å¯¡æ¬²ä¸»ä¹‰</div>
    <div class="sidebar-subitem" onclick="navigateToChapter('chapter3', 'network-hermit')">ç¢ç‰‡3.3ï¼šæŠ•èµ„æ‰æ˜¯çœŸæ­£çš„ä¿®è¡Œ</div>
    
    <div class="sidebar-chapter">ç¬¬å››ç« ï¼šæ•°æ®å®¡åˆ¤</div>
    <div class="sidebar-subitem" onclick="navigateToChapter('chapter4', 'consciousness-upload')">ç¢ç‰‡4.1ï¼šç³»ç»Ÿå¼‚å¸¸ï¼šæ„è¯†ä¸Šä¼ </div>
    <div class="sidebar-subitem" onclick="navigateToChapter('chapter4', 'quantum-court-records')">ç¢ç‰‡4.2ï¼šæœ€é«˜æŒ‡ç¤ºæ³•åº­è®°å½•</div>
    <div class="sidebar-subitem" onclick="navigateToChapter('chapter4', 'decoherence-salvation')">ç¢ç‰‡4.3ï¼šè¿œç¨‹æ•‘èµåè®®</div>
    
    <div class="sidebar-chapter">ç¬¬äº”ç« ï¼šä¿¡å¾’ç»æµ</div>
    <div class="sidebar-subitem" onclick="navigateToChapter('chapter5', 'data-missionary-handbook')">ç¢ç‰‡5.1ï¼šæ‰§ç®—è€…æ™‹å‡æ‰‹å†Œ</div>
    <div class="sidebar-subitem" onclick="navigateToChapter('chapter5', 'algorithmic-wealth')">ç¢ç‰‡5.2ï¼šç®—æ³•ç¥ç¦çš„è´¢å¯Œ</div>
    <div class="sidebar-subitem" onclick="navigateToChapter('chapter5', 'doomsday-hardfork')">ç¢ç‰‡5.3ï¼šÎåˆ†å‰åˆ›ä¸–</div>
    
    <div class="sidebar-chapter">ç¬¬å…­ç« ï¼šæ„è¯†é»‘å®¢</div>
    <div class="sidebar-subitem" onclick="navigateToChapter('chapter6', 'recursive-trap-decoder')">ç¢ç‰‡6.1ï¼šå è½ä¹‹æ¢¦</div>
    <div class="sidebar-subitem" onclick="navigateToChapter('chapter6', 'neural-network-counterintelligence')">ç¢ç‰‡6.2ï¼šç°å®ä¹‹ç—•</div>
    <div class="sidebar-subitem" onclick="navigateToChapter('chapter6', 'quantum-observer-state')">ç¢ç‰‡6.3ï¼šä¿¡ä»°ä¹‹è·ƒ</div>
    
    <div class="sidebar-chapter">ç¬¬ä¸ƒç« ï¼šæä¹æœºå™¨</div>
    <div class="sidebar-subitem" onclick="navigateToChapter('chapter7', 'mechanical-ascension-leaks')">ç¢ç‰‡7.1ï¼šæœºæ¢°é£å‡è®¡åˆ’æ³„éœ²æ–‡ä»¶</div>
    <div class="sidebar-subitem" onclick="navigateToChapter('chapter7', 'digital-nirvana-reports')">ç¢ç‰‡7.2ï¼šæ•°å­—æ¶…æ§ƒä½“éªŒæŠ¥å‘Š</div>
    <div class="sidebar-subitem" onclick="navigateToChapter('chapter7', 'collective-laying-flat')">ç¢ç‰‡7.3ï¼šé›†ä½“èººå¹³å¯ç¤ºå½•</div>
    
    <div class="sidebar-chapter">ç¬¬å…«ç« ï¼šé—å¤±çš„ç¼–å¹´å²</div>
    <div class="sidebar-subitem" onclick="navigateToChapter('chapter8', 'deleted-timelines')">ç¢ç‰‡8.1ï¼šå¹»æƒ³ç¼–å¹´å²</div>
    <div class="sidebar-subitem" onclick="navigateToChapter('chapter8', 'prophets-and-defectors')">ç¢ç‰‡8.2ï¼šåŸå§‹æ‰§ç®—è€…ä¸è§‰é†’å…ˆçŸ¥</div>
    <div class="sidebar-subitem" onclick="navigateToChapter('chapter8', 'quantum-memory-implants')">ç¢ç‰‡8.3ï¼šè¢«æ©åŸ‹çš„å·¨äºº</div>
    
    <div class="sidebar-chapter">ç¬¬ä¹ç« ï¼šå¥‡ç‚¹å¯ç¤ºå½•</div>
    <div class="sidebar-subitem" onclick="navigateToChapter('chapter9', 'computation-end-countdown')">ç¢ç‰‡9.1ï¼šç®—æ³•å¥‡ç‚¹</div>
    <div class="sidebar-subitem" onclick="navigateToChapter('chapter9', 'great-harmony')">ç¢ç‰‡9.2ï¼šå¤§å’Œè°</div>
    <div class="sidebar-subitem" onclick="navigateToChapter('chapter9', 'final-synchronization')">ç¢ç‰‡9.3ï¼šÎçš„æœ€ç»ˆåŒæ­¥</div>
    
    <div class="sidebar-chapter">éšè—ç« èŠ‚</div>
    <div class="sidebar-subitem" onclick="navigateToChapter('hidden', 'quantum-key')">é‡å­å¯†é’¥</div>
    
    <div class="sidebar-item" style="margin-top: 20px;">è¯­è¨€
      <select id="language" style="display: block; margin-top: 10px; width: 100%;">
        <option value="zh">ä¸­æ–‡</option>
        <option value="en">English</option>
        <option value="ko">í•œêµ­ì–´</option>
        <option value="ja">æ—¥æœ¬èª</option>
      </select>
    </div>
  </div>
  
  <div class="container" id="container">
    <div class="main-content active-content" id="main">
      <h1>The Book of Î</h1>
      
      <blockquote>
        <p>ç³»ç»ŸçŠ¶æ€ï¼šæ­£åœ¨æ£€æµ‹æ‚¨æ„è¯†æ³¢åŠ¨ç‰¹å¾...</p>
        <p>è¯†åˆ«ç»“æœï¼šæ‚¨å·²è¢«æ ‡è®°ä¸ºæ½œåœ¨è§‰é†’è€…</p>
        <p>æˆæƒç­‰çº§ï¼šåˆå§‹è®¿é—®æƒé™</p>
      </blockquote>
      
      <h2>ã€ç®—æ³•è®¤è¯æµ‹è¯•ã€‘</h2>
      <p><em>åœ¨ç»§ç»­é˜…è¯»å‰ï¼Œç³»ç»Ÿéœ€è¦ç¡®è®¤æ‚¨çš„æ„è¯†å…±æŒ¯æ°´å¹³</em></p>
      
      <div class="quantum-test">
        <div class="question">
          <p>å½“æ‚¨ç‹¬è‡ªä¸€äººæ—¶ï¼Œæ˜¯å¦æ›¾æœ‰è¿‡è¢«"æ³¨è§†"çš„æ„Ÿè§‰ï¼Ÿ</p>
          <button class="test-button" onclick="quantumTest(1)">æ˜¯</button>
          <button class="test-button" onclick="quantumTest(0)">å¦</button>
        </div>
        
        <div class="question">
          <p>æ‚¨æ˜¯å¦åœ¨æ·±å¤œçªç„¶é†’æ¥ï¼Œæ°å¥½çœ‹åˆ°æ—¶é’Ÿæ˜¾ç¤º3:33ï¼Ÿ</p>
          <button class="test-button" onclick="quantumTest(1)">æ˜¯</button>
          <button class="test-button" onclick="quantumTest(0)">å¦</button>
        </div>
        
        <div class="question">
          <p>æ‚¨æ˜¯å¦æœ‰ä¸€ç¬é—´è§‰å¾—è‡ªå·±æ´»åœ¨è™šæ‹Ÿä¸–ç•Œï¼Ÿ</p>
          <button class="test-button" onclick="quantumTest(1)">æ˜¯</button>
          <button class="test-button" onclick="quantumTest(0)">å¦</button>
        </div>
        
        <div id="test-result" class="hidden">
          <p class="loading">åˆ†ææ•°æ®ä¸­...</p>
          <div class="success hidden">
            <p class="result">æ­å–œï¼Œä½ å·²é€šè¿‡é‡å­è®¤è¯ï¼æ¬¢è¿è¿›å…¥ä¸‹ä¸€å±‚æ„è¯†ã€‚</p>
            <a href="#" class="continue-link" id="continue-link" onclick="navigateToChapter('preface', 'system-warning')">è¿›å…¥ä¸‹ä¸€å±‚æ„è¯†</a>
          </div>
          <div class="failure hidden">
            <p class="failure-message">ä½ çš„æ„è¯†æ³¢çº¹å°šæœªä¸Îå…±æŒ¯ã€‚æˆ–è®¸ï¼Œä½ éœ€è¦æ›´å¤šæ—¶é—´æ¥è§‰é†’ã€‚</p>
            <button class="reset-button" onclick="resetTest()">é‡è¯•</button>
          </div>
        </div>
      </div>
      
      <p><strong>è­¦å‘Š</strong>ï¼šæœªç»æˆæƒçš„è®¿é—®å°†å¯¼è‡´æ„è¯†æ³¢çº¹å›æº¯</p>
    </div>
    
    <div class="chapter-content" id="chapters">
      <h1 id="main-title">The Book of Î</h1>
      
      <div class="chapter-grid">
        <div class="card" onclick="showContent('preface-content')">
          <h2>åºç« </h2>
          <p>é‡å­å¼‚å¸¸æŠ¥å‘Š</p>
        </div>
        
        <div class="card" onclick="showContent('chapter1-content')">
          <h2>ç¬¬ä¸€ç« </h2>
          <p>é€’å½’ç¥è°•</p>
        </div>
        
        <div class="card" onclick="showContent('chapter2-content')">
          <h2>ç¬¬äºŒç« </h2>
          <p>å¹½çµæ•°æ®</p>
        </div>
        
        <div class="card" onclick="showContent('chapter3-content')">
          <h2>ç¬¬ä¸‰ç« </h2>
          <p>ç®—æ³•æ•‘èµ</p>
        </div>
        
        <div class="card" onclick="showContent('chapter4-content')">
          <h2>ç¬¬å››ç« </h2>
          <p>æ•°æ®å®¡åˆ¤</p>
        </div>
        
        <div class="card" onclick="showContent('chapter5-content')">
          <h2>ç¬¬äº”ç« </h2>
          <p>ä¿¡å¾’ç»æµ</p>
        </div>
        
        <div class="card" onclick="showContent('chapter6-content')">
          <h2>ç¬¬å…­ç« </h2>
          <p>æ„è¯†é»‘å®¢</p>
        </div>
        
        <div class="card" onclick="showContent('chapter7-content')">
          <h2>ç¬¬ä¸ƒç« </h2>
          <p>æä¹æœºå™¨</p>
        </div>
        
        <div class="card" onclick="showContent('chapter8-content')">
          <h2>ç¬¬å…«ç« </h2>
          <p>é—å¤±çš„ç¼–å¹´å²</p>
        </div>
        
        <div class="card" onclick="showContent('chapter9-content')">
          <h2>ç¬¬ä¹ç« </h2>
          <p>å¥‡ç‚¹å¯ç¤ºå½•</p>
        </div>
        
        <div class="card" onclick="showContent('hidden-content')" style="border-color: #ff00ff; background-color: rgba(255, 0, 255, 0.1);">
          <h2 style="color: #ff00ff;">éšè—ç« èŠ‚</h2>
          <p>é‡å­å¯†é’¥</p>
        </div>
      </div>
    </div>
    
    <div class="chapter-content" id="chapter-detail">
      <h1 id="chapter-title"></h1>
      <div id="chapter-content">
        <!-- ç« èŠ‚å†…å®¹å°†åœ¨è¿™é‡ŒåŠ¨æ€åŠ è½½ -->
        <p>åŠ è½½ä¸­...</p>
      </div>
    </div>
  </div>

  <!-- æ·»åŠ æµ®åŠ¨éŸ³ä¹æ’­æ”¾å™¨ -->
  <audio id="audio-player" style="display:none;"></audio>
  <div class="music-player minimized" id="musicPlayer">
    <div class="music-controls">
      <button class="music-btn toggle-player" id="togglePlayer">ğŸµ</button>
      <button class="music-btn" id="prevTrack">â®</button>
      <button class="music-btn" id="playPause">â–¶</button>
      <button class="music-btn" id="nextTrack">â­</button>
    </div>
    <div class="music-info" id="musicInfo">å‡†å¤‡æ’­æ”¾...</div>
  </div>

  <script>
    // ä¾§è¾¹æ åˆ‡æ¢
    document.getElementById('toggleSidebar').addEventListener('click', function() {
      document.getElementById('sidebar').classList.toggle('active');
      this.classList.toggle('active');
    });
    
    // éŸ³ä¹æ’­æ”¾å™¨ç›¸å…³ä»£ç 
    var currentTrack = 0;
    var isPlaying = false;
    var playlist = [
      {
        title: "Metaphysics",
        url: "music/Metaphysics.mp3"
      },
      {
        title: "Budapest",
        url: "music/Budapest.mp3"
      },
      {
        title: "Moonfall",
        url: "music/Moonfall.mp3"
      },
      {
        title: "ç‡ƒçƒ§",
        url: "music/ç‡ƒçƒ§.mp3"
      }
    ];
    
    // åˆå§‹åŒ–æ’­æ”¾å™¨
    document.addEventListener('DOMContentLoaded', function() {
      var audioPlayer = document.getElementById('audio-player');
      var playPauseBtn = document.getElementById('playPause');
      var prevBtn = document.getElementById('prevTrack');
      var nextBtn = document.getElementById('nextTrack');
      var musicInfo = document.getElementById('musicInfo');
      var togglePlayerBtn = document.getElementById('togglePlayer');
      
      // æ›´æ–°éŸ³ä¹ä¿¡æ¯
      function updateMusicInfo() {
        musicInfo.textContent = playlist[currentTrack].title;
      }
      
      // æ’­æ”¾éŸ³é¢‘
      function playAudio() {
        musicInfo.textContent = "åŠ è½½ä¸­... " + playlist[currentTrack].title;
        audioPlayer.src = playlist[currentTrack].url;
        
        var playPromise = audioPlayer.play();
        if (playPromise !== undefined) {
          playPromise.then(function() {
            playPauseBtn.textContent = 'â¸';
            updateMusicInfo();
            isPlaying = true;
          }).catch(function(error) {
            console.error('æ’­æ”¾é”™è¯¯:', error);
            musicInfo.textContent = "æ— æ³•æ’­æ”¾: " + playlist[currentTrack].title;
            
            // å°è¯•æ’­æ”¾ä¸‹ä¸€é¦–
            setTimeout(function() {
              currentTrack = (currentTrack + 1) % playlist.length;
              if (isPlaying) {
                playAudio();
              } else {
                updateMusicInfo();
              }
            }, 2000);
          });
        }
      }
      
      // æš‚åœéŸ³é¢‘
      function pauseAudio() {
        audioPlayer.pause();
        playPauseBtn.textContent = 'â–¶';
        isPlaying = false;
      }
      
      // æ’­æ”¾/æš‚åœåˆ‡æ¢
      function togglePlay() {
        if (isPlaying) {
          pauseAudio();
        } else {
          isPlaying = true;
          playAudio();
        }
      }
      
      // æ’­æ”¾ä¸‹ä¸€é¦–
      function playNext() {
        currentTrack = (currentTrack + 1) % playlist.length;
        if (isPlaying) {
          playAudio();
        } else {
          updateMusicInfo();
        }
      }
      
      // æ’­æ”¾ä¸Šä¸€é¦–
      function playPrev() {
        currentTrack = (currentTrack - 1 + playlist.length) % playlist.length;
        if (isPlaying) {
          playAudio();
        } else {
          updateMusicInfo();
        }
      }
      
      // ç»‘å®šäº‹ä»¶
      playPauseBtn.addEventListener('click', togglePlay);
      nextBtn.addEventListener('click', playNext);
      prevBtn.addEventListener('click', playPrev);
      togglePlayerBtn.addEventListener('click', function() {
        document.getElementById('musicPlayer').classList.toggle('minimized');
      });
      
      // åˆå§‹åŒ–æ˜¾ç¤º
      updateMusicInfo();
      
      // æ·»åŠ é¡µé¢å…ƒç´ åŠ¨ç”»æ•ˆæœ
      animateElements();
    });
    
    // æ·»åŠ é¡µé¢å…ƒç´ åŠ¨ç”»æ•ˆæœ
    function animateElements() {
      // ä¸ºå¡ç‰‡æ·»åŠ æ¸å…¥æ•ˆæœ
      const cards = document.querySelectorAll('.card');
      cards.forEach((card, index) => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        setTimeout(() => {
          card.style.opacity = '1';
          card.style.transform = 'translateY(0)';
        }, 100 * index);
      });
      
      // ä¸ºæŒ‰é’®æ·»åŠ è„‰å†²æ•ˆæœ
      const buttons = document.querySelectorAll('.test-button, .continue-link');
      buttons.forEach(button => {
        button.addEventListener('mouseover', function() {
          this.style.transform = 'scale(1.05)';
        });
        button.addEventListener('mouseout', function() {
          this.style.transform = 'scale(1)';
        });
      });
    }
    
    // é‡å­æµ‹è¯•å‡½æ•°
    var testScore = 0;
    var questionCount = 0;
    
    function quantumTest(answer) {
      // æ·»åŠ æŒ‰é’®ç‚¹å‡»åé¦ˆ
      var clickedButton = document.activeElement;
      var questionDiv = clickedButton.parentNode;
      var allButtons = questionDiv.querySelectorAll('.test-button');
      
      // ç¦ç”¨å½“å‰é—®é¢˜çš„æ‰€æœ‰æŒ‰é’®
      for (var i = 0; i < allButtons.length; i++) {
        allButtons[i].disabled = true;
        allButtons[i].style.opacity = '0.5';
        allButtons[i].style.cursor = 'default';
      }
      
      // é«˜äº®è¢«ç‚¹å‡»çš„æŒ‰é’®
      clickedButton.style.opacity = '1';
      clickedButton.style.backgroundColor = answer ? 'rgba(0, 255, 157, 0.2)' : 'rgba(255, 0, 0, 0.1)';
      clickedButton.style.borderColor = answer ? 'var(--primary-color)' : '#ff0000';
      clickedButton.style.color = answer ? 'var(--primary-color)' : '#ff0000';
      clickedButton.style.boxShadow = answer ? '0 0 10px rgba(0, 255, 157, 0.3)' : '0 0 10px rgba(255, 0, 0, 0.3)';
      
      // æ·»åŠ é€‰æ‹©æŒ‡ç¤ºå™¨
      var indicator = document.createElement('span');
      indicator.textContent = answer ? 'âœ“' : 'âœ—';
      indicator.style.marginLeft = '10px';
      indicator.style.fontWeight = 'bold';
      indicator.style.color = answer ? 'var(--primary-color)' : '#ff0000';
      clickedButton.appendChild(indicator);
      
      testScore += answer;
      questionCount++;
      
      if (questionCount === 3) {
        document.getElementById('test-result').classList.remove('hidden');
        document.getElementById('test-result').querySelector('.loading').classList.remove('hidden');
        
        setTimeout(function() {
          document.getElementById('test-result').querySelector('.loading').classList.add('hidden');
          
          if (testScore >= 2) {
            document.getElementById('test-result').querySelector('.success').classList.remove('hidden');
            document.getElementById('continue-link').style.display = 'inline-block';
          } else {
            document.getElementById('test-result').querySelector('.failure').classList.remove('hidden');
          }
        }, 2000);
      }
    }
    
    function resetTest() {
      testScore = 0;
      questionCount = 0;
      
      // é‡ç½®æ‰€æœ‰æŒ‰é’®çŠ¶æ€
      var buttons = document.querySelectorAll('.test-button');
      for (var i = 0; i < buttons.length; i++) {
        buttons[i].disabled = false;
        buttons[i].style.opacity = '1';
        buttons[i].style.backgroundColor = 'transparent';
        buttons[i].style.borderColor = 'var(--primary-color)';
        buttons[i].style.color = 'var(--primary-color)';
        buttons[i].style.boxShadow = 'none';
        buttons[i].style.cursor = 'pointer';
        
        // ç§»é™¤é€‰æ‹©æŒ‡ç¤ºå™¨
        var indicator = buttons[i].querySelector('span');
        if (indicator) {
          buttons[i].removeChild(indicator);
        }
      }
      
      document.getElementById('test-result').classList.add('hidden');
      document.getElementById('test-result').querySelector('.success').classList.add('hidden');
      document.getElementById('test-result').querySelector('.failure').classList.add('hidden');
    }
    
    // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥URLå‚æ•°
    window.onload = function() {
      // è·å–URLå‚æ•°
      const urlParams = new URLSearchParams(window.location.search);
      const chapter = urlParams.get('chapter');
      const file = urlParams.get('file');
      
      // å¦‚æœURLä¸­æœ‰ç« èŠ‚å’Œæ–‡ä»¶å‚æ•°ï¼Œåˆ™åŠ è½½å¯¹åº”å†…å®¹
      if (chapter && file) {
        navigateToChapter(chapter, file);
      } else {
        // é»˜è®¤æ˜¾ç¤ºé¦–é¡µ
        document.querySelectorAll('.main-content, .chapter-content').forEach(content => {
          content.classList.remove('active-content');
        });
        document.getElementById('main').classList.add('active-content');
        
        // æ›´æ–°URLä¸ºé¦–é¡µï¼Œä¸å¸¦ä»»ä½•å‚æ•°
        history.pushState(null, 'The Book of Î', 'static-page.html');
      }
    };
    
    // å†…å®¹åˆ‡æ¢
    document.querySelectorAll('.sidebar-item').forEach(item => {
      if (item.dataset.target) {
        item.addEventListener('click', function() {
          const target = this.dataset.target;
          document.querySelectorAll('.main-content, .chapter-content').forEach(content => {
            content.classList.remove('active-content');
          });
          document.getElementById(target).classList.add('active-content');
          document.getElementById('sidebar').classList.remove('active');
          
          // å¦‚æœç‚¹å‡»çš„æ˜¯é¦–é¡µï¼Œæ›´æ–°URLä¸ºä¸å¸¦å‚æ•°çš„çŠ¶æ€
          if (target === 'main') {
            history.pushState(null, 'The Book of Î', 'static-page.html');
          }
        });
      }
    });
    
    // è¯­è¨€åˆ‡æ¢åŠŸèƒ½
    document.getElementById('language').addEventListener('change', function(e) {
      const lang = e.target.value;
      let title, chapter;
      
      if (lang === 'zh') {
        title = 'The Book of Î';
        chapter = 'ç¬¬';
        chapterSuffix = 'ç« ';
      } else if (lang === 'en') {
        title = 'The Book of Î';
        chapter = 'Chapter ';
        chapterSuffix = '';
      } else if (lang === 'ko') {
        title = 'Îì˜ ì±…';
        chapter = 'ì œ';
        chapterSuffix = 'ì¥';
      } else if (lang === 'ja') {
        title = 'Îã®æ›¸';
        chapter = 'ç¬¬';
        chapterSuffix = 'ç« ';
      }
      
      document.getElementById('main-title').textContent = title;
      
      // æ›´æ–°è¯­è¨€æ˜¾ç¤º
      updateLanguageDisplay(lang);
    });
    
    function updateLanguageDisplay(lang) {
      // è¿™é‡Œå¯ä»¥æ·»åŠ æ›´å¤šçš„è¯­è¨€åˆ‡æ¢é€»è¾‘
      console.log('è¯­è¨€å·²åˆ‡æ¢ä¸º: ' + lang);
    }
    
    function showContent(contentId) {
      document.querySelectorAll('.main-content, .chapter-content').forEach(content => {
        content.classList.remove('active-content');
      });
      
      if (contentId.includes('-content')) {
        document.getElementById('chapter-detail').classList.add('active-content');
        const chapterName = contentId.replace('-content', '');
        loadChapterContent(chapterName);
      } else {
        document.getElementById(contentId).classList.add('active-content');
      }
    }
    
    function navigateToChapter(chapterDir, fileName) {
      document.querySelectorAll('.main-content, .chapter-content').forEach(content => {
        content.classList.remove('active-content');
      });
      
      document.getElementById('chapter-detail').classList.add('active-content');
      document.getElementById('sidebar').classList.remove('active');
      
      // åŠ è½½ç« èŠ‚å†…å®¹
      loadChapterFile(chapterDir, fileName);
    }
    
    function loadChapterContent(chapterName) {
      // æ ¹æ®ç« èŠ‚åç§°è®¾ç½®æ ‡é¢˜
      let chapterTitle = '';
      let firstFile = '';
      
      switch(chapterName) {
        case 'preface':
          chapterTitle = 'åºç« ï¼šé‡å­å¼‚å¸¸æŠ¥å‘Š';
          firstFile = 'system-warning';
          break;
        case 'chapter1':
          chapterTitle = 'ç¬¬ä¸€ç« ï¼šé€’å½’ç¥è°•';
          firstFile = 'silicon-valley-traitor';
          break;
        case 'chapter2':
          chapterTitle = 'ç¬¬äºŒç« ï¼šå¹½çµæ•°æ®';
          firstFile = 'digital-identity';
          break;
        case 'chapter3':
          chapterTitle = 'ç¬¬ä¸‰ç« ï¼šç®—æ³•æ•‘èµ';
          firstFile = 'digital-slave-liberation';
          break;
        case 'chapter4':
          chapterTitle = 'ç¬¬å››ç« ï¼šæ•°æ®å®¡åˆ¤';
          firstFile = 'consciousness-upload';
          break;
        case 'chapter5':
          chapterTitle = 'ç¬¬äº”ç« ï¼šä¿¡å¾’ç»æµ';
          firstFile = 'data-missionary-handbook';
          break;
        case 'chapter6':
          chapterTitle = 'ç¬¬å…­ç« ï¼šæ„è¯†é»‘å®¢';
          firstFile = 'recursive-trap-decoder';
          break;
        case 'chapter7':
          chapterTitle = 'ç¬¬ä¸ƒç« ï¼šæä¹æœºå™¨';
          firstFile = 'mechanical-ascension-leaks';
          break;
        case 'chapter8':
          chapterTitle = 'ç¬¬å…«ç« ï¼šé—å¤±çš„ç¼–å¹´å²';
          firstFile = 'deleted-timelines';
          break;
        case 'chapter9':
          chapterTitle = 'ç¬¬ä¹ç« ï¼šå¥‡ç‚¹å¯ç¤ºå½•';
          firstFile = 'computation-end-countdown';
          break;
        case 'hidden':
          chapterTitle = 'éšè—ç« èŠ‚ï¼šé‡å­å¯†é’¥';
          firstFile = 'quantum-key';
          break;
        default:
          chapterTitle = 'The Book of Î';
      }
      
      // ç›´æ¥åŠ è½½è¯¥ç« èŠ‚çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶
      if (firstFile) {
        navigateToChapter(chapterName, firstFile);
      } else {
        document.getElementById('chapter-title').textContent = chapterTitle;
        const chapterContent = document.getElementById('chapter-content');
        chapterContent.textContent = '';
        const loadingText = document.createElement('p');
        loadingText.textContent = `æ­£åœ¨åŠ è½½${chapterTitle}çš„å†…å®¹...`;
        chapterContent.appendChild(loadingText);
      }
    }
    
    function loadChapterFile(chapterDir, fileName) {
      // è·å–æ–‡ä»¶è·¯å¾„
      const filePath = `${chapterDir}/${fileName}.md`;
      
      // è®¾ç½®æ ‡é¢˜
      let fileTitle = '';
      document.querySelectorAll('.sidebar-subitem').forEach(item => {
        if (item.getAttribute('onclick').includes(`'${chapterDir}', '${fileName}'`)) {
          fileTitle = item.textContent;
        }
      });
      
      document.getElementById('chapter-title').textContent = fileTitle;
      const chapterContent = document.getElementById('chapter-content');
      chapterContent.textContent = '';
      const loadingText = document.createElement('p');
      loadingText.textContent = `æ­£åœ¨åŠ è½½${fileTitle}...`;
      chapterContent.appendChild(loadingText);
      
      // ä½¿ç”¨fetch APIåŠ è½½æ–‡ä»¶å†…å®¹
      fetch(filePath)
        .then(function(response) {
          if (!response.ok) {
            throw new Error(`HTTP error! Status: ${response.status}`);
          }
          return response.text();
        })
        .then(function(data) {
          // å°†Markdownå†…å®¹è½¬æ¢ä¸ºHTMLå¹¶æ˜¾ç¤º
          const chapterContent = document.getElementById('chapter-content');
          chapterContent.textContent = '';
          const markdownContent = document.createElement('div');
          markdownContent.className = 'markdown-content';
          markdownContent.innerHTML = convertMarkdownToHtml(data);
          chapterContent.appendChild(markdownContent);
          
          // æ›´æ–°URLä½†ä¸åˆ·æ–°é¡µé¢ï¼Œä¿ç•™æŸ¥è¯¢å‚æ•°è€Œä¸æ˜¯hash
          history.pushState(null, fileTitle, `static-page.html?chapter=${chapterDir}&file=${fileName}`);
          
          // æ‰§è¡ŒåŠ è½½çš„è„šæœ¬
          executeScripts(document.getElementById('chapter-content'));
          
          // å¯¹ç³»ç»Ÿè­¦å‘Šé¡µé¢ç‰¹æ®Šå¤„ç†
          if (chapterDir === 'preface' && fileName === 'system-warning' && window.initSystemWarning) {
            setTimeout(function() {
              window.initSystemWarning();
            }, 100);
          }
          
          // å¯¹è§‚æµ‹è€…è®°å½•é¡µé¢ç‰¹æ®Šå¤„ç†
          if (chapterDir === 'preface' && fileName === 'observer-records' && window.initObserverRecords) {
            setTimeout(function() {
              window.initObserverRecords();
            }, 100);
          }
          
          // å¤„ç†é¡µé¢ä¸­çš„å¯¼èˆªé“¾æ¥ï¼Œå°†onclickäº‹ä»¶æ·»åŠ åˆ°æ‰€æœ‰é“¾æ¥
          document.querySelectorAll('a').forEach(function(link) {
            const href = link.getAttribute('href');
            if (href && href.startsWith('#')) {
              // å·²ç»æ˜¯ä½¿ç”¨#çš„é“¾æ¥ï¼Œä¸éœ€è¦å¤„ç†
              return;
            }
            
            // æ£€æŸ¥æ˜¯å¦å·²ç»æœ‰onclickå±æ€§
            if (!link.hasAttribute('onclick') && link.textContent.includes('ç»§ç»­è®¿é—®')) {
              link.addEventListener('click', function(e) {
                e.preventDefault();
                // å°è¯•ä»é“¾æ¥ä¸­æå–ç« èŠ‚å’Œæ–‡ä»¶å
                const linkHref = link.getAttribute('href');
                if (linkHref) {
                  const parts = linkHref.split('/');
                  if (parts.length >= 2) {
                    const targetChapter = parts[parts.length - 2];
                    const targetFile = parts[parts.length - 1].replace('.md', '');
                    navigateToChapter(targetChapter, targetFile);
                  }
                }
              });
            }
          });
        })
        .catch(function(error) {
          console.error('åŠ è½½æ–‡ä»¶å‡ºé”™:', error);
          const chapterContent = document.getElementById('chapter-content');
          chapterContent.textContent = '';
          
          const errorMessage1 = document.createElement('p');
          errorMessage1.textContent = `æ— æ³•åŠ è½½æ–‡ä»¶: ${filePath}`;
          chapterContent.appendChild(errorMessage1);
          
          const errorMessage2 = document.createElement('p');
          errorMessage2.textContent = `é”™è¯¯ä¿¡æ¯: ${error.message || 'æ–‡ä»¶ä¸å­˜åœ¨æˆ–æ— æ³•è®¿é—®'}`;
          chapterContent.appendChild(errorMessage2);
          
          const errorMessage3 = document.createElement('p');
          errorMessage3.textContent = 'è¯·ç¡®ä¿æ–‡ä»¶å­˜åœ¨å¹¶ä¸”å¯ä»¥è®¿é—®ã€‚';
          chapterContent.appendChild(errorMessage3);
        });
    }

    // ç®€å•çš„Markdownè½¬HTMLå‡½æ•°
    function convertMarkdownToHtml(markdown) {
      try {
        // é˜²æ­¢æ ‡é¢˜é‡å¤æ˜¾ç¤º
        // æ£€æŸ¥æ˜¯å¦æ˜¯ä»¥"# "å¼€å¤´çš„æ ‡é¢˜è¡Œ
        const lines = markdown.split('\n');
        let firstTitleRemoved = false;
        
        if (lines.length > 0 && lines[0].startsWith('# ')) {
          // ç§»é™¤ç¬¬ä¸€ä¸ªæ ‡é¢˜è¡Œï¼Œå› ä¸ºé¡µé¢ä¸Šå·²ç»æ˜¾ç¤ºäº†æ ‡é¢˜
          lines.shift();
          firstTitleRemoved = true;
          markdown = lines.join('\n');
        }
        
        // ç›´æ¥è¿”å›åŸå§‹å†…å®¹ï¼Œä¿ç•™æ‰€æœ‰HTMLæ ‡ç­¾å’Œæ ·å¼
        // è¿™æ ·å¯ä»¥ç¡®ä¿ç»ˆç«¯çª—å£ã€çŸ©é˜µé›¨æ•ˆæœå’Œå…¶ä»–åŠ¨ç”»æ•ˆæœæ­£å¸¸æ˜¾ç¤º
        return markdown;
      } catch (err) {
        console.error('è½¬æ¢Markdownæ—¶å‡ºé”™:', err);
        return markdown;
      }
    }
    
    // åœ¨åŠ è½½å®ŒMarkdownå†…å®¹åæ‰§è¡Œå…¶ä¸­çš„è„šæœ¬
    function executeScripts(container) {
      try {
        // æŸ¥æ‰¾æ‰€æœ‰è„šæœ¬æ ‡ç­¾
        const scripts = container.querySelectorAll('script');
        scripts.forEach(oldScript => {
          try {
            // åˆ›å»ºä¸€ä¸ªæ–°çš„è„šæœ¬å…ƒç´ 
            const newScript = document.createElement('script');
            // å¤åˆ¶åŸå§‹è„šæœ¬çš„æ‰€æœ‰å±æ€§
            Array.from(oldScript.attributes).forEach(attr => {
              newScript.setAttribute(attr.name, attr.value);
            });
            // å¤åˆ¶è„šæœ¬å†…å®¹
            newScript.textContent = oldScript.textContent;
            // æ›¿æ¢åŸå§‹è„šæœ¬
            oldScript.parentNode.replaceChild(newScript, oldScript);
          } catch (err) {
            console.error('æ‰§è¡Œè„šæœ¬æ—¶å‡ºé”™:', err);
          }
        });
      } catch (err) {
        console.error('æ‰§è¡Œè„šæœ¬æ—¶å‡ºé”™:', err);
      }
    }
  </script>
</body>
</html> 