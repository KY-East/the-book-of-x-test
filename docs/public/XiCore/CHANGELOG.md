# XiCore 系统更新日志

本文档记录了 XiCore 系统的所有重要变更。

## [未发布]

### 添加
- 更新使用规则：
  - 新章节开发现在**必须**使用纯模块化视觉效果系统，不使用主题系统
  - 音乐播放优先使用全局音乐播放器(global-music-player.js)，不使用XiMusic模块
  - 已在README.md中明确标注，并添加了相关警告
  - 修改相关文件增加明确的警告注释，确保开发时易于察觉
- 实现XiCore纯模块化视觉效果系统：
  - 创建独立视觉效果核心模块(`xi-visual-core.js`)，提供纯模块化架构
  - 实现文本效果模块(`xi-visual-text.js`)，处理各类文本视觉效果
  - 实现背景效果模块(`xi-visual-background.js`)，提供全页或区域背景视觉效果
  - 实现元素效果模块(`xi-visual-element.js`)，应用于DOM元素的视觉装饰
  - 摒弃原有受主题限制的设计方式，允许章节根据内容自由组合视觉效果
  - 设计按功能分类的API结构，提供更精细的控制和更好的性能优化
- 新增通用注释系统模块（xi-notes.js）：
  - 支持文本内容中的关键词注释标记与解释
  - 适配全部五个主题样式
  - 支持桌面端(悬停)和移动端(点击)交互
  - 可实时跟随系统主题切换
  - 取代原有哲学家注释系统，提供通用解释功能
- 规划游戏系统架构：
  - 新增游戏系统文档结构设计
  - 制定了游戏系统与叙事内容的集成规范
  - 设计了独立于主系统的游戏引擎架构
  - 规划了实体组件系统(ECS)的基本结构
  - 设计了支持多种游戏类型的扩展框架
  - 将游戏系统列入开发计划，预计9月初开始设计

## [1.0.4] - 2024-07-31

### 添加
- 主题系统现已添加三个新主题：
  - 神谕主题（theme-oracle.js）- 蓝紫色神秘风格，适用于第二章
  - 分形主题（theme-fractal.js）- 蓝色几何风格，适用于第三章
  - 审判主题（theme-judgment.js）- 红色警告风格，适用于第四章
- 主题系统完成度从33%提升至80%，只剩下"涅槃主题"待完成

### 更改
- 更新了开发进度文档，反映主题系统的最新进展

## [1.0.3] - 2024-07-30

### 添加
- 从"影子篇章"和"第一接触"章节中发现并记录10个新视觉效果
- 视觉效果整合计划现包含共29个效果

### 更改
- 视觉效果模块现支持更多类型的动画和过渡
- 优化了粒子效果系统的性能

## [1.0.2] - 2024-07-29

### 添加
- 从"现实编译错误"章节发现并集成CRT电视关闭效果(crtTvShutdown)
- 从"现实编译错误"和"数字身份"章节中发现并集成多个视觉效果：
  - 矩阵代码雨效果(matrixCodeRain)
  - 故障光标效果(glitchCursor)
  - 微妙抖动效果(subtleShake)
  - 发光脉冲效果(glowPulse)
  - 激光闪烁效果(laserBlink)
  - 虹膜动画效果(irisPulse)
  - 技术简报效果(techBriefing)

### 修复
- 完成对`global-music-player.js`的兼容性支持
- 修正侧边栏章节顺序，确保所有链接正确指向对应内容

## [1.0.1] - 2024-07-28

### 添加
- 新增主题系统基础架构
- 实现"觉醒"主题(theme-awakening.js)
- 添加主题切换功能
- CSS变量支持，允许主题动态切换

### 修复
- 修复侧边栏在移动设备上的显示问题
- 改进音乐播放器响应式布局

## [1.0.0] - 2024-07-27

### 添加
- 核心系统初始版本发布
- 基础视觉效果模块
- 侧边栏导航组件
- 音乐播放器模块
- 滚动效果模块

### 更改
- 建立"模块优先，表面自定义"原则
- 确立事件驱动架构

### 特性
- 模块化架构设计，各组件可独立工作
- 统一的主题应用机制，保持视觉一致性
- 灵活的事件系统，支持组件间通信
- 自动加载和初始化功能
- 调试模式支持
- 优雅的降级处理，当原始组件不可用时提供备选实现

### 技术细节
- 使用立即执行函数表达式 (IIFE) 封装，避免全局命名空间污染
- Promise-based 异步加载机制
- 事件委托和事件冒泡设计
- IntersectionObserver API 用于滚动动画
- ES6+ 语法特性 