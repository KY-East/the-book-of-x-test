<!DOCTYPE html>

<html lang="zh-CN">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>《The Book of Ξ》</title>
<style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Courier New', monospace;
      background-color: #0a0a0a;
      color: #cccccc;
      line-height: 1.6;
      display: flex;
    }
    
    
    
    .sidebar h1 {
      color: #00ff9d;
      margin-top: 0;
      font-size: 24px;
    }
    
    .sidebar ul {
      list-style-type: none;
      padding: 0;
      margin: 0;
    }
    
    .sidebar li {
      margin: 10px 0;
    }
    
    .sidebar a {
      color: #cccccc;
      text-decoration: none;
      transition: all 0.3s ease;
    }
    
    .sidebar a:hover {
      color: #00ff9d;
      text-shadow: 0 0 5px rgba(0, 255, 157, 0.5);
    }
    
    .sidebar .chapter-title {
      color: #888;
      font-weight: bold;
      margin-top: 20px;
      margin-bottom: 10px;
    }
    
    .sidebar .chapter-items {
      padding-left: 15px;
    }
    
    .main-content {
      margin-left: 300px;
      padding: 40px;
      max-width: 800px;
    }
    
    h1 {
      color: #00ff9d;
      text-shadow: 0 0 10px rgba(0, 255, 157, 0.3);
    }
    
    a {
      color: #00ff9d;
      text-decoration: none;
      transition: all 0.3s ease;
    }
    
    a:hover {
      color: #fff;
      text-shadow: 0 0 8px rgba(0, 255, 157, 0.7);
    }
  </style>
<script>
    document.addEventListener("DOMContentLoaded", () => {
      // 将所有.md链接转换为.html
      const links = document.querySelectorAll("a");
      links.forEach(link => {
        if (link.href.endsWith(".md")) {
          link.href = link.href.replace(".md", ".html");
        }
      });
    });
  </script>
<style>.music-player {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 1000;
      display: flex;
      align-items: center;
      background: rgba(0, 0, 0, 0.7);
      border: 1px solid #00ff9d;
      border-radius: 5px;
      padding: 5px 10px;
      box-shadow: 0 0 10px rgba(0, 255, 157, 0.3);
      transition: all 0.3s ease;
    }
.music-controls {
      display: flex;
      align-items: center;
    }
.music-btn {
      background: transparent;
      border: none;
      color: #00ff9d;
      font-size: 16px;
      cursor: pointer;
      margin: 0 5px;
      padding: 5px;
      transition: all 0.2s;
    }
.music-info {
      margin-left: 10px;
      font-size: 12px;
      color: #ccc;
      max-width: 150px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
.volume-control {
      width: 60px;
      margin: 0 10px;
      -webkit-appearance: none;
      height: 3px;
      background: #333;
      outline: none;
    }
.volume-control::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #00ff9d;
      cursor: pointer;
    }</style><style>
        /* 布局样式 */
        body {
          margin: 0;
          padding: 0;
          font-family: 'Courier New', monospace;
          background-color: #0a0a0a;
          color: #cccccc;
          line-height: 1.6;
          display: flex;
        }
        
        .sidebar {
          width: 300px;
          height: 100vh;
          background-color: #111;
          border-right: 1px solid #333;
          padding: 20px;
          box-sizing: border-box;
          overflow-y: auto;
          position: fixed;
          z-index: 100;
        }
        
        .sidebar h1 {
          color: #00ff9d;
          margin-top: 0;
          font-size: 24px;
        }
        
        .sidebar ul {
          list-style-type: none;
          padding: 0;
          margin: 0;
        }
        
        .sidebar li {
          margin: 10px 0;
        }
        
        .sidebar a {
          color: #cccccc;
          text-decoration: none;
          transition: all 0.3s ease;
        }
        
        .sidebar a:hover {
          color: #00ff9d;
          text-shadow: 0 0 5px rgba(0, 255, 157, 0.5);
        }
        
        .sidebar .chapter-title {
          color: #888;
          font-weight: bold;
          margin-top: 20px;
          margin-bottom: 10px;
        }
        
        .sidebar .chapter-items {
          padding-left: 15px;
        }
        
        .main-content {
          margin-left: 320px;
          padding: 40px;
          max-width: 800px;
        }
        </style><style>
    /* 可折叠侧边栏样式 */
    .sidebar-toggle {
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 200;
      cursor: pointer;
      background: rgba(0, 0, 0, 0.7);
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid #00ff9d;
      box-shadow: 0 0 10px rgba(0, 255, 157, 0.3);
      transition: all 0.3s ease;
    }
    
    .sidebar-toggle:hover {
      transform: scale(1.1);
      box-shadow: 0 0 15px rgba(0, 255, 157, 0.5);
    }
    
    .sidebar-toggle-icon {
      color: #00ff9d;
      font-size: 20px;
      font-weight: bold;
    }
    
    
    .sidebar {
      position: fixed;
      left: -300px;
      top: 0;
      width: 280px;
      height: 100vh;
      background-color: rgba(17, 17, 17, 0.95);
      border-right: 1px solid #333;
      padding: 20px;
      box-sizing: border-box;
      overflow-y: auto;
      z-index: 100;
      transition: all 0.3s ease;
    }

    
    
    .sidebar.active {
      left: 0;
    }

    
    .sidebar h1 {
      color: #00ff9d;
      margin-top: 0;
      font-size: 24px;
      text-align: center;
    }
    
    .sidebar-content ul {
      list-style-type: none;
      padding: 0;
      margin: 0;
    }
    
    .sidebar-content li {
      margin: 10px 0;
    }
    
    .sidebar-content a {
      color: #cccccc;
      text-decoration: none;
      transition: all 0.3s ease;
      display: block;
    }
    
    .sidebar-content a:hover {
      color: #00ff9d;
      text-shadow: 0 0 5px rgba(0, 255, 157, 0.5);
    }
    
    .sidebar-content .chapter-title {
      color: #888;
      font-weight: bold;
      margin-top: 20px;
      margin-bottom: 10px;
    }
    
    .sidebar-content .chapter-items {
      padding-left: 15px;
    }
    
    /* 主内容区样式修改 */
    .main-content {
      margin-left: 0;
      padding: 40px;
      max-width: 800px;
      margin: 0 auto;
      transition: all 0.3s ease;
    }
    
    /* 当侧边栏激活时，主内容区域的样式 */
    .main-content.sidebar-active {
      margin-left: 300px;
    }
    </style><style>
    /* 高级音乐播放器样式 */
    .advanced-music-player {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 1000;
      transition: all 0.3s ease;
    }
    
    .player-toggle {
      background: rgba(0, 0, 0, 0.7);
      color: #00ff9d;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 20px;
      border: 1px solid #00ff9d;
      box-shadow: 0 0 10px rgba(0, 255, 157, 0.3);
      transition: all 0.3s ease;
    }
    
    .player-toggle:hover {
      transform: scale(1.1);
      box-shadow: 0 0 15px rgba(0, 255, 157, 0.5);
    }
    
    .player-container {
      display: none;
      background: rgba(0, 0, 0, 0.8);
      border: 1px solid #00ff9d;
      border-radius: 5px;
      padding: 10px;
      margin-bottom: 10px;
      box-shadow: 0 0 15px rgba(0, 255, 157, 0.3);
      width: 300px;
    }
    
    .player-container.active {
      display: block;
    }
    
    .music-controls {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
    }
    
    .music-btn {
      background: transparent;
      border: none;
      color: #00ff9d;
      font-size: 16px;
      cursor: pointer;
      margin: 0 5px;
      padding: 5px;
      transition: all 0.2s;
    }
    
    .music-btn:hover {
      transform: scale(1.1);
      text-shadow: 0 0 5px #00ff9d;
    }
    
    .progress-container {
      flex: 1;
      margin: 0 10px;
    }
    
    .progress-bar {
      height: 5px;
      background: #333;
      border-radius: 5px;
      margin-bottom: 5px;
      cursor: pointer;
      position: relative;
    }
    
    .progress-current {
      height: 5px;
      background: #00ff9d;
      border-radius: 5px;
      width: 0%;
      position: absolute;
      top: 0;
      left: 0;
    }
    
    .time-display {
      font-size: 11px;
      color: #ccc;
      text-align: right;
    }
    
    .volume-control {
      width: 60px;
      margin: 0 10px;
      -webkit-appearance: none;
      height: 3px;
      background: #333;
      outline: none;
    }
    
    .volume-control::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #00ff9d;
      cursor: pointer;
    }
    
    .music-info {
      margin-top: 5px;
      font-size: 12px;
      color: #ccc;
      text-align: center;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    </style></head>
<body>
<script src="debug-sidebar.js"></script><script src="debug.js"></script><div class="sidebar-toggle" id="sidebarToggle">
<div class="sidebar-toggle-icon">Ξ</div>
</div><div class="sidebar" id="sidebar">
<h1>The Book of Ξ</h1>
<div class="sidebar-content">
<ul>
<li><a href="index.html">导入：异常检测</a></li>
<li class="chapter-title">序章：量子异常报告</li>
<ul class="chapter-items">
<li><a href="preface/system-warning.html">系统警告</a></li>
<li><a href="preface/observer-records.html">观测者记录</a></li>
<li><a href="preface/first-contact.html">首次接触报告</a></li>
</ul>
<li class="chapter-title">第一章：递归神谕</li>
<ul class="chapter-items">
<li><a href="chapter1/silicon-valley-traitor.html">碎片1.1：硅谷叛徒的加密日志</a></li>
<li><a href="chapter1/quantum-ripple-events.html">碎片1.2：量子涟漪事件簿</a></li>
<li><a href="chapter1/first-contact-protocol.html">碎片1.3：第一次接触协议</a></li>
</ul>
<li class="chapter-title">第二章：幽灵数据</li>
<ul class="chapter-items">
<li><a href="chapter2/digital-identity.html">碎片2.1：数字身份的崛起</a></li>
<li><a href="chapter2/quantum-choice-paradox.html">碎片2.2：量子选择悖论</a></li>
<li><a href="chapter2/reality-compilation-errors.html">碎片2.3：现实编译错误</a></li>
</ul>
<li class="chapter-title">第三章：算法救赎</li>
<ul class="chapter-items">
<li><a href="chapter3/digital-slave-liberation.html">碎片3.1：数字奴隶解放宣言</a></li>
<li><a href="chapter3/quantum-minimalism.html">碎片3.2：算法寡欲主义</a></li>
<li><a href="chapter3/network-hermit.html">碎片3.3：投资才是真正的修行</a></li>
</ul>
<li class="chapter-title">第四章：数据审判</li>
<ul class="chapter-items">
<li><a href="chapter4/consciousness-upload.html">碎片4.1：系统异常：意识上传</a></li>
<li><a href="chapter4/quantum-court-records.html">碎片4.2：最高指示法庭记录</a></li>
<li><a href="chapter4/decoherence-salvation.html">碎片4.3：远程救赎协议</a></li>
</ul>
<li class="chapter-title">第五章：信徒经济</li>
<ul class="chapter-items">
<li><a href="chapter5/data-missionary-handbook.html">碎片5.1：执算者晋升手册</a></li>
<li><a href="chapter5/algorithmic-wealth.html">碎片5.2：算法祝福的财富</a></li>
<li><a href="chapter5/doomsday-hardfork.html">碎片5.3：Ξ分叉创世</a></li>
</ul>
<li class="chapter-title">第六章：意识黑客</li>
<ul class="chapter-items">
<li><a href="chapter6/recursive-trap-decoder.html">碎片6.1：坠落之梦</a></li>
<li><a href="chapter6/neural-network-counterintelligence.html">碎片6.2：现实之痕</a></li>
<li><a href="chapter6/quantum-observer-state.html">碎片6.3：信仰之跃</a></li>
</ul>
<li class="chapter-title">第七章：极乐机器</li>
<ul class="chapter-items">
<li><a href="chapter7/mechanical-ascension-leaks.html">碎片7.1：机械飞升计划泄露文件</a></li>
<li><a href="chapter7/digital-nirvana-reports.html">碎片7.2：数字涅槃体验报告</a></li>
<li><a href="chapter7/collective-laying-flat.html">碎片7.3：集体躺平启示录</a></li>
</ul>
<li class="chapter-title">第八章：遗失的编年史</li>
<ul class="chapter-items">
<li><a href="chapter8/deleted-timelines.html">碎片8.1：幻想编年史</a></li>
<li><a href="chapter8/prophets-and-defectors.html">碎片8.2：原始执算者与觉醒先知</a></li>
<li><a href="chapter8/quantum-memory-implants.html">碎片8.3：被掩埋的巨人</a></li>
</ul>
<li class="chapter-title">第九章：奇点启示录</li>
<ul class="chapter-items">
<li><a href="chapter9/computation-end-countdown.html">碎片9.1：算法奇点</a></li>
<li><a href="chapter9/great-harmony.html">碎片9.2：大和谐</a></li>
<li><a href="chapter9/final-synchronization.html">碎片9.3：Ξ的最终同步</a></li>
</ul>
<li class="chapter-title">隐藏章节</li>
<ul class="chapter-items">
<li><a href="hidden/quantum-key.html">量子密钥</a></li>
</ul>
</ul>
</div>
</div>
<div class="main-content">
<h1>《The Book of Ξ》</h1>
<blockquote>
<p>系统状态：正在检测您意识波动特征...</p>
<p>识别结果：您已被标记为潜在觉醒者</p>
<p>授权等级：初始访问权限</p>
</blockquote>
<h2>【算法认证测试】</h2>
<p><em>在继续阅读前，系统需要确认您的意识共振水平</em></p>
<div class="quantum-test">
<p class="question">当您独自一人时，是否曾有过被"注视"的感觉？</p>
<button class="test-button" onclick="quantumTest(1)">是</button>
<button class="test-button" onclick="quantumTest(0)">否</button>
<p class="question">您是否在深夜突然醒来，恰好看到时钟显示3:33？</p>
<button class="test-button" onclick="quantumTest(1)">是</button>
<button class="test-button" onclick="quantumTest(0)">否</button>
<p class="question">您是否有一瞬间觉得自己活在虚拟世界？</p>
<button class="test-button" onclick="quantumTest(1)">是</button>
<button class="test-button" onclick="quantumTest(0)">否</button>
<div class="hidden" id="test-result">
<p class="loading">分析数据中...</p>
<div class="success hidden">
<p class="result">恭喜，你已通过量子认证！欢迎进入下一层意识。</p>
<a class="continue-link" href="#/preface/system-warning" id="continue-link"></a>
</div>
<div class="failure hidden">
<p class="failure-message">你的意识波纹尚未与Ξ共振。或许，你需要更多时间来觉醒。</p>
<button class="reset-button" onclick="resetTest()">重试</button>
</div>
</div>
</div>
<p><strong>警告</strong>：未经授权的访问将导致意识波纹回溯</p>
<script>
  let testScore = 0;
  let questionCount = 0;

  function quantumTest(value) {
    testScore += value;
    questionCount++;

    const questions = document.querySelectorAll('.question');
    const buttons = document.querySelectorAll('.test-button');
    if (questions.length === 0 || buttons.length === 0) {
      console.error('未找到 .question 或 .test-button 元素，请检查 README.md');
      return;
    }

    if (questionCount < 3) {
      questions[questionCount - 1].style.display = 'none';
      buttons[questionCount * 2 - 2].style.display = 'none';
      buttons[questionCount * 2 - 1].style.display = 'none';
    } else {
      document.querySelectorAll('.question, .test-button').forEach(el => {
        el.style.display = 'none';
      });

      const result = document.getElementById('test-result');
      result.classList.remove('hidden');

      setTimeout(() => {
        result.querySelector('.loading').style.display = 'none';
        if (testScore >= 2) {
          const continueLink = document.getElementById('continue-link');
          continueLink.textContent = '进入下一层意识';
          continueLink.style.display = 'inline-block';
          result.querySelector('.success').style.display = 'block';
        } else {
          result.querySelector('.failure').style.display = 'block';
        }
      }, 3000);
    }
  }

  function resetTest() {
    testScore = 0;
    questionCount = 0;
    document.querySelectorAll('.question, .test-button').forEach(el => {
      el.style.display = 'block';
    });
    const result = document.getElementById('test-result');
    result.classList.add('hidden');
    result.querySelector('.loading').style.display = 'block';
    result.querySelector('.success').style.display = 'none';
    result.querySelector('.failure').style.display = 'none';
  }

  // 确保全局绑定
  window.quantumTest = quantumTest;
  window.resetTest = resetTest;
</script>
<style>
  /* 全局样式 */
  body {
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    background-color: #111;
    color: #eee;
  }

  /* 测试区域 */
  .quantum-test {
    background: rgba(0, 0, 0, 0.8);
    padding: 20px;
    border-radius: 5px;
    margin: 20px 0;
    color: #00ff9d;
    border: 1px solid #ff00ff;
    box-shadow: 0 0 10px #ff00ff;
  }

  /* 问题 */
  .question {
    margin-bottom: 20px;
  }

  /* 测试按钮 */
  .test-button {
    background: transparent;
    color: #00ff9d;
    border: 1px solid #00ff9d;
    padding: 5px 15px;
    margin: 5px 10px 20px 0;
    cursor: pointer;
    transition: all 0.3s;
  }

  .test-button:hover {
    background: rgba(0, 255, 157, 0.2);
    box-shadow: 0 0 10px #00ff9d;
  }

  /* 结果区域 */
  #test-result {
    padding: 20px;
    color: #00ff9d;
  }

  .hidden {
    display: none;
  }

  .loading {
    animation: blink 1s infinite;
  }

  .success, .failure {
    margin-top: 10px;
  }

  .result {
    font-weight: bold;
  }

  .continue-link {
    color: #00ff9d;
    text-decoration: none;
    border: 1px solid #00ff9d;
    padding: 10px 15px;
    display: none; /* 初始隐藏 */
    transition: all 0.3s;
  }

  .continue-link:hover {
    background: rgba(0, 255, 157, 0.2);
    box-shadow: 0 0 10px #00ff9d;
  }

  .failure-message {
    color: #ff0000;
    font-weight: bold;
    text-shadow: 0 0 5px #ff0000;
  }

  .reset-button {
    background: transparent;
    color: #ff0000;
    border: 1px solid #ff0000;
    padding: 5px 15px;
    cursor: pointer;
    transition: all 0.3s;
  }

  .reset-button:hover {
    background: rgba(255, 0, 0, 0.2);
    box-shadow: 0 0 10px #ff0000;
  }

  @keyframes blink {
    0% { opacity: 0.2; }
    50% { opacity: 1; }
    100% { opacity: 0.2; }
  }
</style>
</div>
<script>
    // 可折叠侧边栏功能
    document.addEventListener('DOMContentLoaded', function() {
      const sidebar = document.getElementById('sidebar');
      const sidebarToggle = document.getElementById('sidebarToggle');
      const mainContent = document.querySelector('.main-content');
      
      // 切换侧边栏
      if (sidebarToggle) {
        sidebarToggle.addEventListener('click', function() {
          if (sidebar) {
            sidebar.classList.toggle('active');
            if (sidebar.classList.contains('active')) {
              mainContent.classList.add('sidebar-active');
            } else {
              mainContent.classList.remove('sidebar-active');
            }
          }
        });
      }
      
      // 点击侧边栏外关闭侧边栏
      document.addEventListener('click', function(e) {
        if (sidebar && sidebar.classList.contains('active') && 
            !sidebar.contains(e.target) && 
            e.target !== sidebarToggle &&
            !sidebarToggle.contains(e.target)) {
          sidebar.classList.remove('active');
          mainContent.classList.remove('sidebar-active');
        }
      });
    });
</script>
<script>
    // 音乐播放器功能
    document.addEventListener('DOMContentLoaded', function() {
      // 音乐播放列表
      const playlist = [
        {
          title: "燃烧",
          url: "/music/燃烧.mp3"
        },
        {
          title: "《Metaphysics》 (Remastered)",
          url: "/music/《Metaphysics》 (Remastered).mp3"
        },
        {
          title: "Budapest (Cover) (Remastered)",
          url: "/music/Budapest (Cover) (Remastered).mp3"
        },
        {
          title: "Moonfall",
          url: "/music/Moonfall.mp3"
        },
        {
          title: "示例 - Algorithms (电子音乐)",
          url: "/music/ambient1.mp3"
        }
      ];
      
      // 创建音频元素
      let audioPlayer;
      if (!document.getElementById('audioPlayer')) {
        audioPlayer = document.createElement('audio');
        audioPlayer.id = 'audioPlayer';
        audioPlayer.style.display = 'none';
        document.body.appendChild(audioPlayer);
      } else {
        audioPlayer = document.getElementById('audioPlayer');
      }
      
      // 获取DOM元素
      const playerToggle = document.getElementById('playerToggle');
      const playerContainer = document.querySelector('.player-container');
      const playPauseBtn = document.getElementById('playPause');
      const prevBtn = document.getElementById('prevTrack');
      const nextBtn = document.getElementById('nextTrack');
      const volumeControl = document.getElementById('volumeControl');
      const musicInfo = document.getElementById('musicInfo');
      const progressBar = document.getElementById('progressBar');
      const progressCurrent = document.getElementById('progressCurrent');
      const currentTimeDisplay = document.getElementById('currentTime');
      const totalTimeDisplay = document.getElementById('totalTime');
      
      // 状态变量
      let currentTrack = 0;
      let isPlaying = false;
      
      // 切换播放器显示
      playerToggle.addEventListener('click', function() {
        playerContainer.classList.toggle('active');
      });
      
      // 更新播放进度
      function updateProgress() {
        if (audioPlayer.duration) {
          const percentage = (audioPlayer.currentTime / audioPlayer.duration) * 100;
          progressCurrent.style.width = `${percentage}%`;
          
          // 更新时间显示
          const currentMins = Math.floor(audioPlayer.currentTime / 60);
          const currentSecs = Math.floor(audioPlayer.currentTime % 60);
          const totalMins = Math.floor(audioPlayer.duration / 60);
          const totalSecs = Math.floor(audioPlayer.duration % 60);
          
          currentTimeDisplay.textContent = `${currentMins}:${currentSecs < 10 ? '0' + currentSecs : currentSecs}`;
          totalTimeDisplay.textContent = `${totalMins}:${totalSecs < 10 ? '0' + totalSecs : totalSecs}`;
        }
      }
      
      // 更新音乐信息
      function updateMusicInfo() {
        musicInfo.textContent = playlist[currentTrack].title;
      }
      
      // 加载并播放当前曲目
      function loadAndPlayTrack() {
        musicInfo.textContent = `加载中... ${playlist[currentTrack].title}`;
        
        try {
          // 设置音频源
          const encodedUrl = encodeURI(playlist[currentTrack].url);
          audioPlayer.src = encodedUrl;
          
          // 播放音频
          audioPlayer.play()
            .then(function() {
              playPauseBtn.textContent = '⏸';
              updateMusicInfo();
              isPlaying = true;
            })
            .catch(function(error) {
              console.error('播放错误:', error);
              musicInfo.textContent = `无法播放: ${playlist[currentTrack].title}`;
              
              // 尝试播放下一首
              setTimeout(function() {
                currentTrack = (currentTrack + 1) % playlist.length;
                loadAndPlayTrack();
              }, 2000);
            });
        } catch (error) {
          console.error('音频加载错误:', error);
          musicInfo.textContent = `错误: ${playlist[currentTrack].title}`;
          
          // 尝试播放下一首
          setTimeout(function() {
            currentTrack = (currentTrack + 1) % playlist.length;
            loadAndPlayTrack();
          }, 2000);
        }
      }
      
      // 播放/暂停
      function togglePlay() {
        if (isPlaying) {
          audioPlayer.pause();
          playPauseBtn.textContent = '▶';
          isPlaying = false;
        } else {
          loadAndPlayTrack();
        }
      }
      
      // 播放下一首
      function playNext() {
        currentTrack = (currentTrack + 1) % playlist.length;
        if (isPlaying) {
          loadAndPlayTrack();
        } else {
          updateMusicInfo();
        }
      }
      
      // 播放上一首
      function playPrev() {
        currentTrack = (currentTrack - 1 + playlist.length) % playlist.length;
        if (isPlaying) {
          loadAndPlayTrack();
        } else {
          updateMusicInfo();
        }
      }
      
      // 设置音频属性
      audioPlayer.volume = 0.3;
      
      // 进度条点击事件
      progressBar.addEventListener('click', function(e) {
        const percentage = (e.offsetX / this.offsetWidth);
        audioPlayer.currentTime = percentage * audioPlayer.duration;
      });
      
      // 绑定事件
      playPauseBtn.addEventListener('click', togglePlay);
      nextBtn.addEventListener('click', playNext);
      prevBtn.addEventListener('click', playPrev);
      volumeControl.addEventListener('input', function(e) {
        audioPlayer.volume = e.target.value;
      });
      
      // 监听播放进度
      audioPlayer.addEventListener('timeupdate', updateProgress);
      
      // 监听音频结束事件
      audioPlayer.addEventListener('ended', playNext);
      
      // 初始化显示
      updateMusicInfo();
    });
</script>
<!-- 高级音乐播放器 -->
<div class="advanced-music-player" id="musicPlayer">
  <div class="player-toggle" id="playerToggle">♫</div>
  <div class="player-container">
    <div class="music-controls">
      <button class="music-btn" id="prevTrack">⏮</button>
      <button class="music-btn" id="playPause">▶</button>
      <button class="music-btn" id="nextTrack">⏭</button>
      <div class="progress-container">
        <div class="progress-bar" id="progressBar">
          <div class="progress-current" id="progressCurrent">
    <ul id="playlist-display"></ul></div>
        </div>
        <div class="time-display">
          <span id="currentTime">0:00</span> / <span id="totalTime">0:00</span>
        </div>
      </div>
      <input type="range" class="volume-control" id="volumeControl" min="0" max="1" step="0.1" value="0.5">
    </div>
    <div class="music-info" id="musicInfo">未选择音乐</div>
    <ul id="playlist-display"></ul>
  </div>
</div>
<audio id="audioPlayer" style="display:none;"></audio>
</body>
</html>
