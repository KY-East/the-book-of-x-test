<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>碎片2.1：数字身份的崛起 | 虹膜谋杀案</title>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;600;700&family=Fira+Code:wght@400;700&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
<style>
        :root {
            --neon-primary: #00ff9d;
            --neon-secondary: #ff3366;
            --neon-blue: #0088ff;
            --neon-yellow: #ffcc00;
            --neon-purple: #cc00ff;
            --bg-primary: #0a0a12;
            --bg-secondary: #14141e;
            --text-primary: #e0e0e0;
            --text-secondary: #aaaaaa;
            --terminal-bg: rgba(10, 10, 18, 0.9);
            --terminal-border: rgba(0, 255, 157, 0.3);
            --terminal-text: #cccccc;
            --alert-bg: rgba(20, 0, 0, 0.9);
            --alert-border: rgba(255, 51, 102, 0.5);
            --alert-text: #ff3366;
            --hologram-glow: 0 0 20px var(--neon-primary), 0 0 40px rgba(0, 255, 157, 0.4);
        }

        /* 基础样式 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            font-family: 'Rajdhani', sans-serif;
            line-height: 1.6;
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
        }

        body::before {
            content: '';
  position: fixed;
  top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(204, 0, 255, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(0, 255, 157, 0.05) 0%, transparent 45%),
                url('/the-book-of-x-test/assets/images/hologram/2025-03-23 04.44.52.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.09;
            z-index: -1;
            filter: blur(1.2px) brightness(0.65) contrast(1.2) saturate(1.1);
        }

        .container {
            max-width: 850px;
            margin: 0 auto;
            padding: 2rem 20px;
            position: relative;
            z-index: 10;
        }

        /* 背景效果 */
        .cyberpunk-background {
  position: fixed;
  top: 0;
  left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            overflow: hidden;
        }

        .city-silhouette {
            position: absolute;
            bottom: 0;
  left: 0;
            width: 100%;
            height: 30%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%231a1a2e" d="M0,128L48,144C96,160,192,192,288,186.7C384,181,480,139,576,138.7C672,139,768,181,864,186.7C960,192,1056,160,1152,160C1248,160,1344,192,1392,208L1440,224L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>');
            background-size: cover;
            background-position: top;
            opacity: 0.4;
        }

        .neon-grid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(to right, rgba(0, 255, 157, 0.05) 1px, transparent 1px),
                linear-gradient(to bottom, rgba(0, 255, 157, 0.05) 1px, transparent 1px);
            background-size: 30px 30px;
            transform: perspective(500px) rotateX(60deg);
            transform-origin: center 150%;
            opacity: 0.4;
            animation: gridPulse 8s infinite linear;
        }

        @keyframes gridPulse {
            0%, 100% { opacity: 0.4; }
            50% { opacity: 0.2; }
        }

        .rain-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }

        .rain-drop {
            position: absolute;
            top: -20px;
            width: 1px;
            background: linear-gradient(to bottom, rgba(0, 255, 157, 0), rgba(0, 255, 157, 0.8), rgba(0, 255, 157, 0));
            animation: rain linear infinite;
        }

        @keyframes rain {
            0% {
                transform: translateY(-100vh);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            90% {
                opacity: 0.8;
            }
            100% {
                transform: translateY(100vh);
                opacity: 0;
            }
        }

        /* 标题样式 */
        .page-title {
            color: var(--neon-primary);
            text-shadow: 
                0 0 5px var(--neon-primary),
                0 0 10px var(--neon-primary);
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            letter-spacing: 2px;
            text-align: center;
            margin-bottom: 0.5rem;
            position: relative;
            animation: titleGlitch 5s infinite;
        }

        .page-subtitle {
            font-family: 'Orbitron', sans-serif;
            color: var(--neon-secondary);
            font-size: 1.5rem;
            text-align: center;
            margin-bottom: 3rem;
            opacity: 0.9;
            letter-spacing: 1px;
        }

        @keyframes titleGlitch {
            0%, 90%, 100% { 
                text-shadow: 
                    0 0 5px var(--neon-primary),
                    0 0 10px var(--neon-primary);
                transform: none;
            }
            91% { 
                text-shadow: 
                    0 0 5px var(--neon-primary),
                    0 0 10px var(--neon-primary),
                    3px 0 5px var(--neon-blue);
                transform: skewX(5deg); 
            }
            92% { 
                text-shadow: 
                    0 0 5px var(--neon-primary),
                    0 0 10px var(--neon-primary),
                    -3px 0 5px var(--neon-secondary);
                transform: skewX(-5deg); 
            }
            93% { 
                text-shadow: 
                    0 0 5px var(--neon-primary),
                    0 0 10px var(--neon-primary);
                transform: none;
            }
        }

        /* 故事内容样式 */
        .story-segment {
  position: relative;
            background-color: rgba(10, 10, 18, 0.7);
            padding: 2rem;
            border-radius: 5px;
            border-left: 3px solid var(--neon-primary);
            margin-bottom: 2rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            transform: translateZ(0);
            transition: all 0.3s ease;
  overflow: hidden;
}

        .story-segment::before {
            content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
            background: linear-gradient(135deg, rgba(0, 255, 157, 0.05) 0%, transparent 100%);
  pointer-events: none;
}

        .story-segment:hover {
            border-left-color: var(--neon-secondary);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.6), 0 0 10px rgba(0, 255, 157, 0.2);
            transform: translateY(-2px) translateZ(0);
        }

        /* 故事段落样式优化 */
        .story-segment p {
            margin-bottom: 1.2rem;
            line-height: 1.7;
  position: relative;
            transition: all 0.3s ease;
            text-shadow: 0 0 1px rgba(255, 255, 255, 0.1);
        }
        
        /* 对话样式增强 */
        .story-segment p:has(q), .story-segment p:has('"') {
            padding-left: 20px;
            border-left: 2px solid rgba(0, 255, 157, 0.3);
            position: relative;
        }
        
        /* 引用内容高亮 */
        .story-segment p q, .story-segment p span.quote {
            color: #f0f0f0;
            font-style: italic;
            position: relative;
        }
        
        /* K的对话特殊样式 */
        .story-segment p:contains("K") q, .story-segment p:contains("K放缓语气") span.quote {
            color: rgba(0, 255, 157, 0.9);
            text-shadow: 0 0 3px rgba(0, 255, 157, 0.3);
            font-style: normal;
        }
        
        /* 女孩的对话特殊样式 */
        .story-segment p:contains("年轻女孩") q, .story-segment p:contains("林小姐") span.quote {
            color: rgba(255, 180, 180, 0.9);
            text-shadow: 0 0 3px rgba(255, 0, 0, 0.2);
            font-style: normal;
        }
        
        /* 幽灰0的对话特殊样式 */
        .story-segment p:contains("幽灰0") q, .story-segment p:contains("幽灰0") span.quote {
            color: rgba(120, 190, 255, 0.9);
            text-shadow: 0 0 5px rgba(0, 100, 255, 0.3);
            font-style: normal;
            letter-spacing: 0.5px;
        }
        
        /* 段落悬停效果 */
        .story-segment p:hover {
            transform: translateX(3px);
            background-color: rgba(255, 255, 255, 0.02);
        }
        
        /* 提高DID相关术语的显示效果 */
        .story-segment p:contains("DID") strong, .story-segment p:contains("数字身份") strong {
            color: rgba(0, 255, 157, 0.9);
            font-weight: bold;
            text-shadow: 0 0 5px rgba(0, 255, 157, 0.3);
        }

        .story-segment p:first-of-type::first-letter {
            font-size: 2em;
            float: left;
            padding-right: 0.1em;
            line-height: 0.9;
            color: var(--neon-primary);
            text-shadow: 0 0 5px var(--neon-primary);
        }

        .story-segment p:last-child {
            margin-bottom: 0;
        }
        
        .story-segment.finale {
            border-color: var(--neon-secondary);
            background-color: rgba(15, 5, 15, 0.8);
        }
        
        .story-segment.finale p {
            color: #fff;
        }
        
        .story-segment.finale strong {
            color: var(--neon-secondary);
            font-weight: bold;
            text-shadow: 0 0 5px var(--neon-secondary);
            letter-spacing: 1px;
        }
        
        /* 全息广告样式 */
        .hologram-ad {
  position: relative;
            width: 100%;
            height: 470px; /* 从450px增加到470px，增加了20px的高度 */
            margin: 3rem 0;
            background-color: rgba(20, 20, 30, 0.5);
            border: 1px solid rgba(0, 255, 157, 0.3);
            border-radius: 5px;
            overflow: hidden;
            backdrop-filter: blur(3px);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.7);
            z-index: 1;
        }
        
        .hologram-ad:hover {
            border-color: rgba(0, 255, 157, 0.5);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.8), 0 0 20px rgba(0, 255, 157, 0.2);
            transform: translateY(-5px);
        }

        .hologram-flicker {
  position: absolute;
  top: 0;
  left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, rgba(0, 136, 255, 0.05), rgba(0, 255, 157, 0.05));
            animation: hologramFlicker 4s infinite;
  pointer-events: none;
            z-index: 2;
        }
        
        .hologram-flicker::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, transparent, rgba(0, 255, 157, 0.05) 75%, transparent);
            animation: scanLine 4s infinite linear;
        }
        
        @keyframes scanLine {
            0% { transform: translateY(-100%); }
            100% { transform: translateY(100%); }
        }

        .hologram-image {
  position: absolute;
  top: 0;
  left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: brightness(1.2) contrast(1.1) saturate(1.2) hue-rotate(0deg);
            z-index: 999;
            animation: imageEffect 8s infinite alternate ease-in-out;
        }
        
        @keyframes imageEffect {
            0% { filter: brightness(1.2) contrast(1.1) saturate(1.2) hue-rotate(0deg); }
            50% { filter: brightness(1.3) contrast(1.15) saturate(1.3) hue-rotate(5deg); }
            100% { filter: brightness(1.2) contrast(1.1) saturate(1.2) hue-rotate(0deg); }
        }

        .ad-slogan {
            color: var(--neon-primary);
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            text-align: center;
            margin-top: 1rem;
            margin-bottom: 1rem;
            letter-spacing: 2px;
            text-shadow: 0 0 10px var(--neon-primary), 0 0 20px var(--neon-primary);
            position: relative;
            display: inline-block;
            font-weight: 700;
            text-transform: uppercase;
            white-space: normal; /* 允许文本换行 */
            overflow: visible; /* 确保文本不被裁剪 */
            max-width: 90%; /* 限制宽度防止完全铺满 */
        }
        
        .ad-slogan::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: -5px;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--neon-primary), transparent);
            animation: pulseBorder 3s infinite;
        }
        
        @keyframes pulseBorder {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        .ad-tagline {
            color: white;
            font-size: 1.2rem;
            text-align: center;
            margin-top: 0.8rem;
            margin-bottom: 0.8rem;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            white-space: normal; /* 允许文本换行 */
            overflow: visible; /* 确保文本不被裁剪 */
            max-width: 90%; /* 限制宽度防止完全铺满 */
        }
        
        .ad-tagline:hover {
            opacity: 1;
            transform: scale(1.03);
        }

        /* 零号神谕警告框 */
        .oracle-alert {
            background-color: var(--alert-bg);
            border: 1px solid var(--alert-border);
            border-radius: 5px;
            margin: 2rem 0;
            overflow: hidden;
            box-shadow: 0 0 15px rgba(255, 51, 102, 0.3);
            transform: translateZ(0);
            transition: all 0.3s ease;
            position: relative;
        }
        
        .oracle-alert:hover {
            transform: translateY(-3px) translateZ(0);
            box-shadow: 0 0 25px rgba(255, 51, 102, 0.4);
        }

        .oracle-alert::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                repeating-linear-gradient(
                    45deg,
                    transparent,
                    transparent 10px,
                    rgba(255, 51, 102, 0.05) 10px,
                    rgba(255, 51, 102, 0.05) 20px
                );
            opacity: 0.2;
            pointer-events: none;
        }

        .alert-header {
            background-color: rgba(40, 0, 0, 0.8);
  display: flex;
  align-items: center;
            padding: 0.8rem 1rem;
            border-bottom: 1px solid var(--alert-border);
            position: relative;
        }

        .alert-icon {
            width: 12px;
            height: 12px;
            background-color: var(--alert-text);
            border-radius: 50%;
            margin-right: 10px;
            animation: alertPulse 2s infinite;
        }

        .alert-title {
            color: var(--alert-text);
  font-weight: bold;
            font-family: 'Fira Code', monospace;
            letter-spacing: 1px;
            text-shadow: 0 0 5px rgba(255, 51, 102, 0.7);
        }

        .alert-content {
            padding: 1rem;
            font-family: 'Fira Code', monospace;
  position: relative;
}

        .alert-content::before {
            content: '';
  position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, transparent, rgba(255, 51, 102, 0.05), transparent);
            background-size: 200% 100%;
            animation: gradientSlide 3s infinite linear;
            pointer-events: none;
        }
        
        @keyframes gradientSlide {
            0% { background-position: 100% 0; }
            100% { background-position: -100% 0; }
        }

        .alert-item {
            margin: 0.5rem 0;
            color: #fff;
            display: block;
            padding-left: 10px;
            border-left: 2px solid var(--alert-text);
            position: relative;
            transition: all 0.3s ease;
        }
        
        .alert-item:hover {
            color: var(--alert-text);
            transform: translateX(3px);
        }

        @keyframes alertPulse {
            0%, 100% { box-shadow: 0 0 5px rgba(255, 51, 102, 0.8); }
            50% { box-shadow: 0 0 15px rgba(255, 51, 102, 0.8); }
        }

        /* 终端界面 */
        .terminal-interface {
            background-color: #000;
  border-radius: 5px;
            margin: 2rem 0;
            overflow: hidden;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
            transition: all 0.3s ease;
            transform: translateZ(0);
        }
        
        .terminal-interface:hover {
            box-shadow: 0 0 25px rgba(0, 0, 0, 0.7), 0 0 10px rgba(0, 255, 157, 0.2);
            transform: translateY(-3px) translateZ(0);
        }

        .terminal-header {
            background-color: rgba(5, 5, 10, 0.9);
            display: flex;
            align-items: center;
            padding: 0.6rem 1rem;
            border-bottom: 1px solid #333;
            position: relative;
        }

        .terminal-icon {
            width: 10px;
            height: 10px;
            background-color: #00ff00;
            border-radius: 50%;
            margin-right: 10px;
            animation: terminalIconPulse 2s infinite alternate;
        }
        
        @keyframes terminalIconPulse {
            0% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        .terminal-title {
            color: #fff;
            font-weight: 600;
            font-family: 'Fira Code', monospace;
            flex-grow: 1;
            font-size: 0.9rem;
            text-shadow: 0 0 5px rgba(0, 255, 0, 0.5);
        }

        .terminal-controls {
            display: flex;
            gap: 5px;
        }

        .terminal-controls span {
            width: 8px;
            height: 8px;
            background-color: #666;
            border-radius: 50%;
            transition: background-color 0.3s ease;
        }
        
        .terminal-controls span:hover {
            background-color: #999;
        }

        .terminal-content {
            padding: 0;
            font-family: 'Fira Code', monospace;
            background-color: #000;
            position: relative;
        }
        
        .terminal-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                to bottom,
                transparent,
                transparent 2px,
                rgba(0, 255, 0, 0.03) 3px,
                rgba(0, 255, 0, 0.03) 3px
            );
            pointer-events: none;
        }

        .message {
            position: relative;
            padding: 0.5rem 1rem;
            display: block;
            width: 100%;
            box-sizing: border-box;
            clear: both;
            transition: all 0.3s ease;
        }
        
        .message:hover {
            background-color: rgba(255, 255, 255, 0.03);
        }

        .timestamp {
            font-size: 0.7rem;
            color: #666;
            position: absolute;
            top: 0.2rem;
            font-weight: normal;
        }

        .message-text {
            padding: 0.7rem 1rem;
            border-radius: 0;
            display: inline-block;
            margin-top: 1.5rem;
            max-width: 80%;
            font-size: 0.95rem;
            line-height: 1.5;
            box-sizing: border-box;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .message-text::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, transparent, currentColor, transparent);
            opacity: 0.2;
        }

        .message.k {
            text-align: right;
        }
        
        .message.ghost {
            text-align: left;
        }

        .message.k .timestamp {
            left: 1rem;
        }

        .message.ghost .timestamp {
            right: 1rem;
        }

        .message.k .message-text {
            background-color: rgba(0, 40, 0, 0.5);
            color: #e0e0e0;
            border-left: 3px solid #00ff00;
            text-align: left;
        }
        
        .message.k .message-text:hover {
            background-color: rgba(0, 50, 0, 0.6);
            transform: translateX(-3px);
        }

        .message.ghost .message-text {
            background-color: rgba(40, 0, 40, 0.5);
            color: #e0e0e0;
            border-right: 3px solid #ff00ff;
            text-align: left;
        }
        
        .message.ghost .message-text:hover {
            background-color: rgba(50, 0, 50, 0.6);
            transform: translateX(3px);
        }

        /* DID链接与解释 */
        .did-term {
            position: relative;
            color: var(--neon-blue);
            text-decoration: none;
            border-bottom: 1px dashed var(--neon-blue);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .did-term:hover, .did-term.active {
            color: var(--neon-green);
            border-bottom-color: var(--neon-green);
            text-shadow: 0 0 5px rgba(0, 255, 157, 0.7);
        }
        
        .did-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%) translateY(-5px);
            width: 250px;
            background-color: rgba(12, 15, 22, 0.95);
            color: var(--text-color);
  padding: 10px;
            border-radius: 4px;
            border-left: 3px solid var(--neon-green);
            font-size: 0.9em;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 1000;
            box-shadow: 0 0 15px rgba(0, 255, 157, 0.3);
            pointer-events: none;
        }
        
        .did-term:hover .did-tooltip,
        .did-term.active .did-tooltip {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) translateY(0);
        }

        /* 分隔线 */
        .section-divider {
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--neon-primary), transparent);
            margin: 2rem 0;
            position: relative;
        }

        .section-divider.transition {
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--neon-primary), transparent);
            margin: 4rem 0;
            position: relative;
            animation: pulseDivider 3s infinite;
        }

        @keyframes pulseDivider {
            0%, 100% { opacity: 0.7; box-shadow: 0 0 5px var(--neon-primary); }
            50% { opacity: 1; box-shadow: 0 0 15px var(--neon-primary); }
        }

        .divider-icon {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            background-color: var(--bg-primary);
            padding: 0 10px;
            color: var(--neon-primary);
            font-size: 1.2rem;
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .container {
                padding: 1rem 15px;
            }

            .page-title {
                font-size: 2rem;
            }

            .page-subtitle {
                font-size: 1.2rem;
                margin-bottom: 2rem;
            }

            .story-segment {
                padding: 1.5rem;
            }

            .hologram-ad {
                height: 250px;
            }

            .hologram-image {
                width: 180px;
                height: 180px;
            }

            .ad-slogan {
                font-size: 1.1rem;
            }

            .message-text {
                max-width: 90%;
            }
        }

        /* DID验证系统 */
        .did-verification-panel {
            background-color: rgba(5, 5, 15, 0.8);
            border: 1px solid var(--neon-blue);
            border-radius: 0;
            padding: 1.5rem;
            margin: 2rem 0;
            box-shadow: 0 0 15px rgba(0, 136, 255, 0.3);
        }

        .panel-header {
            color: var(--neon-blue);
            font-family: 'Fira Code', monospace;
            font-size: 1.2rem;
            border-bottom: 1px solid var(--neon-blue);
            padding-bottom: 0.8rem;
            margin-bottom: 1.5rem;
        }

        .scan-area {
            height: 25px;
            background-color: rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            margin-bottom: 1.5rem;
            border-top: 1px solid var(--neon-blue);
            border-bottom: 1px solid var(--neon-blue);
        }

        .scan-line {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 1px;
            background-color: var(--neon-blue);
            animation: scanLine 2s infinite ease-in-out;
            box-shadow: 0 0 8px var(--neon-blue);
        }

        .verification-results {
            display: flex;
    flex-direction: column;
            gap: 1rem;
        }

        .result-item {
            display: flex;
            font-family: 'Fira Code', monospace;
    align-items: center;
  }

        .label {
            width: 120px;
            color: #fff;
        }

        .value {
            color: #fff;
        }

        /* 引用设计 */
        blockquote {
            border-left: 3px solid var(--neon-secondary);
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
            background-color: rgba(255, 51, 102, 0.05);
            font-style: italic;
        }

        /* 脚注设计 */
        .footnote {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-style: italic;
            text-align: center;
            margin-top: 3rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 1rem;
        }

        .xi-symbol {
            font-family: 'Orbitron', sans-serif;
            color: var(--neon-primary);
            font-weight: bold;
            font-size: 1.1em;
            text-shadow: 0 0 5px var(--neon-primary);
            display: inline-block;
        }

        .hologram-container {
            position: relative;
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
            padding: 0 20px; /* 添加左右内边距 */
        }
        
        @keyframes hologramFloat {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(0.5deg); }
        }
        
        @keyframes hologramFlicker {
            0%, 100% { opacity: 0; }
            5% { opacity: 0.3; }
            6% { opacity: 0.1; }
            7% { opacity: 0.5; }
            8% { opacity: 0.2; }
            10% { opacity: 0.3; }
            30% { opacity: 0.1; }
            40% { opacity: 0.2; }
            50% { opacity: 0.3; }
            70% { opacity: 0.1; }
            80% { opacity: 0.2; }
            90% { opacity: 0.3; }
        }

        .hologram-image-container {
            position: relative;
            width: 250px;
            height: 250px;
            margin-bottom: 20px;
            overflow: hidden;
            border: 2px solid rgba(0, 255, 157, 0.5);
            box-shadow: 0 0 20px var(--neon-primary), 0 0 40px rgba(0, 255, 157, 0.4);
            background-color: rgba(0, 0, 0, 0.7);
            transform-style: preserve-3d;
            transition: all 0.5s ease;
        }
        
        .hologram-image-container:hover {
            transform: scale(1.03);
            box-shadow: 0 0 30px var(--neon-primary), 0 0 60px rgba(0, 255, 157, 0.4);
        }
        
        .image-placeholder {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1;
            background: linear-gradient(135deg, #0a0a12 0%, #1a1a33 100%);
            opacity: 0.6;
        }
        
        .placeholder-dots {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        
        .dot {
            position: absolute;
            width: 2px;
            height: 2px;
            background-color: rgba(0, 255, 157, 0.7);
            border-radius: 50%;
            animation: float 8s infinite ease-in-out;
        }
        
        @keyframes float {
            0%, 100% { transform: translate(0, 0); }
            25% { transform: translate(5px, 5px); }
            50% { transform: translate(10px, -5px); }
            75% { transform: translate(-5px, 10px); }
        }
        
        .placeholder-text {
            color: rgba(0, 255, 157, 0.8);
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            margin-bottom: 1rem;
            text-shadow: 0 0 10px rgba(0, 255, 157, 0.5);
        }
        
        .placeholder-size {
            color: rgba(255, 255, 255, 0.5);
            font-family: monospace;
            font-size: 1rem;
        }

        .image-glitch-effect {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                to bottom,
                transparent 0%,
                rgba(0, 255, 157, 0.1) 10%,
                transparent 20%,
                rgba(255, 0, 255, 0.1) 30%,
                transparent 40%,
                rgba(0, 255, 255, 0.1) 50%,
                transparent 60%,
                rgba(255, 0, 255, 0.1) 70%,
                transparent 80%,
                rgba(0, 255, 157, 0.1) 90%,
                transparent 100%
            );
            opacity: 0.5;
            mix-blend-mode: screen;
            animation: glitchScan 4s linear infinite;
            pointer-events: none;
            z-index: 1000;
        }
        
        @keyframes glitchScan {
            0% { background-position: 0 -250px; }
            100% { background-position: 0 250px; }
        }
        
        .ad-freedom {
            color: #00ff9d;
            font-size: 1.5rem;
            text-align: center;
            margin-top: 1.5rem;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(0, 255, 157, 0.9);
            letter-spacing: 2px;
            text-transform: uppercase;
            animation: freedomPulse 2s infinite alternate;
            white-space: nowrap; /* 确保文本在一行内显示 */
            max-width: 100%; /* 确保不超出容器宽度 */
            overflow: hidden; /* 超出部分隐藏 */
            display: inline-block; /* 使元素宽度自适应内容 */
        }
        
        @keyframes freedomPulse {
            0% { text-shadow: 0 0 10px rgba(0, 255, 157, 0.9); }
            100% { text-shadow: 0 0 20px rgba(0, 255, 157, 1), 0 0 30px rgba(0, 255, 157, 0.7); }
        }

        /* 赛博朋克Banner样式 */
        .cyberpunk-banner {
            position: relative;
            width: 100%;
            max-width: 700px; /* 限制最大宽度，不必撑满 */
            margin: 3rem auto; /* 居中显示 */
            height: 200px;
            overflow: hidden;
            border: 1px solid rgba(0, 255, 157, 0.5);
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.7), 0 0 10px rgba(0, 255, 157, 0.3);
        }
        
        .banner-content {
            position: relative;
            width: 100%;
            height: 100%;
        }
        
        .banner-glitch-container {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        
        .banner-image {
            width: 100%;
            height: 100%;
            object-fit: cover; /* 保持纵横比，但填充整个容器 */
            object-position: center; /* 居中显示图片 */
        }
        
        .banner-glitch-effect {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                to bottom,
                transparent 0%,
                rgba(0, 255, 157, 0.05) 10%,
                transparent 20%,
                rgba(255, 0, 255, 0.05) 30%,
                transparent 40%,
                rgba(0, 255, 255, 0.05) 50%,
                transparent 60%,
                rgba(255, 0, 255, 0.05) 70%,
                transparent 80%,
                rgba(0, 255, 157, 0.05) 90%,
                transparent 100%
            );
            z-index: 2;
            animation: glitchScan 4s linear infinite;
            pointer-events: none;
        }
        
        .banner-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 10px;
            background: rgba(0, 0, 0, 0.7);
            z-index: 3;
        }
        
        .banner-text {
            color: var(--neon-primary);
            font-family: 'Fira Code', monospace;
            font-size: 1rem;
            text-shadow: 0 0 5px var(--neon-primary);
            text-align: right;
            padding-right: 20px;
        }
        
        /* 简单文本美化 - 只添加不删除 */
        .highlight-quote {
            border-left: 2px solid rgba(0, 255, 157, 0.5);
            padding-left: 10px;
            font-style: italic;
        }
        
        .key-dialog {
            color: #e0ffff;
            font-weight: 500;
        }
        
        .girl-dialog {
            color: #ffb8d9;
        }
        
        .k-dialog {
            color: #00ff9d;
        }
        
        .ghost-dialog {
            color: #80c0ff;
        }
        
        .key-concept {
            color: #ffcc00;
            font-weight: bold;
        }
        
        .golden-line {
            color: #ffcc00;
            text-shadow: 0 0 5px rgba(255, 204, 0, 0.5);
            font-weight: 500;
        }

        /* 侧边栏样式 */
        .sidebar-toggle {
          position: fixed;
          top: 20px;
          left: 20px;
          z-index: 200;
          cursor: pointer;
          background: rgba(0, 0, 0, 0.7);
          width: 40px;
          height: 40px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          border: 1px solid #00ff9d;
          box-shadow: 0 0 10px rgba(0, 255, 157, 0.3);
          transition: all 0.3s ease;
        }

        .sidebar-toggle:hover {
          transform: scale(1.1);
          box-shadow: 0 0 15px rgba(0, 255, 157, 0.5);
        }

        .sidebar-toggle-icon {
          color: #00ff9d;
          font-size: 20px;
          font-weight: bold;
        }

        .sidebar {
          position: fixed;
          left: -300px;
          top: 0;
          width: 280px;
          height: 100vh;
          background-color: rgba(17, 17, 17, 0.95);
          border-right: 1px solid #333;
          padding: 20px;
          box-sizing: border-box;
          overflow-y: auto;
          z-index: 100;
          transition: all 0.3s ease;
        }

        .sidebar.active {
          left: 0;
        }

        .sidebar h1 {
          color: #00ff9d;
          margin-top: 0;
          font-size: 24px;
          text-align: center;
        }

        .sidebar-content ul {
          list-style-type: none;
          padding: 0;
          margin: 0;
        }

        .sidebar-content li {
          margin: 10px 0;
        }

        .sidebar-content a {
          color: #cccccc;
          text-decoration: none;
          transition: all 0.3s ease;
          display: block;
        }

        .sidebar-content a:hover {
          color: #00ff9d;
          text-shadow: 0 0 5px rgba(0, 255, 157, 0.5);
        }

        .sidebar-content .chapter-title {
          color: #888;
          font-weight: bold;
          margin-top: 20px;
          margin-bottom: 10px;
        }

        .sidebar-content .chapter-items {
          padding-left: 15px;
        }

        /* 主内容区样式修改 */
        .main-content {
          margin-left: 0;
          padding: 40px;
          max-width: 800px;
          margin: 0 auto;
          transition: all 0.3s ease;
        }

        /* 当侧边栏激活时，主内容区域的样式 */
        .main-content.sidebar-active {
          margin-left: 300px;
        }
        
  /* 音乐播放器样式 */
  .xi-music-player {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 1000;
    font-family: 'Arial', sans-serif;
  }
  
  .xi-music-player .player-toggle {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background-color: rgba(0, 0, 0, 0.7);
    border: 2px solid #00ff9d;
    color: #00ff9d;
    font-size: 20px;
    cursor: pointer;
    position: relative;
    z-index: 1001;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .xi-music-player .player-toggle:hover {
    transform: scale(1.1);
    box-shadow: 0 0 10px rgba(0, 255, 157, 0.7);
  }
  
  .xi-music-player .toggle-icon {
    font-style: normal;
  }
  
  .xi-music-player .player-container {
    position: absolute;
    bottom: 60px;
    right: 0;
    width: 300px;
    background-color: rgba(0, 0, 0, 0.8);
    border: 1px solid #00ff9d;
    border-radius: 10px;
    padding: 15px;
    color: #fff;
    transform: scale(0);
    transform-origin: bottom right;
    transition: transform 0.3s ease;
    opacity: 0;
    visibility: hidden;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
  }
  
  .xi-music-player .player-container.active {
    transform: scale(1);
    opacity: 1;
    visibility: visible;
  }
  
  .xi-music-player .player-header {
    margin-bottom: 15px;
    border-bottom: 1px solid rgba(0, 255, 157, 0.3);
    padding-bottom: 10px;
  }
  
  .xi-music-player .player-header div {
    font-size: 14px;
    font-weight: bold;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    color: #00ff9d;
  }
  
  .xi-music-player .player-controls {
    display: flex;
    justify-content: space-between;
    margin-bottom: 15px;
  }
  
  .xi-music-player .player-controls button {
    background-color: transparent;
    border: 1px solid #00ff9d;
    color: #00ff9d;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    cursor: pointer;
    font-size: 16px;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .xi-music-player .player-controls button:hover {
    background-color: rgba(0, 255, 157, 0.2);
    transform: scale(1.1);
  }
  
  .xi-music-player .progress-container {
    margin-bottom: 15px;
  }
  
  .xi-music-player .progress-bar {
    width: 100%;
    height: 6px;
    background-color: rgba(255, 255, 255, 0.2);
    border-radius: 3px;
    cursor: pointer;
    position: relative;
    margin-bottom: 5px;
  }
  
  .xi-music-player .progress-current {
    position: absolute;
    left: 0;
    top: 0;
    height: 100%;
    background-color: #00ff9d;
    border-radius: 3px;
    width: 0%;
  }
  
  .xi-music-player .progress-time {
    font-size: 12px;
    color: #ccc;
    display: flex;
    justify-content: space-between;
  }
  
  .xi-music-player .volume-container {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
    font-size: 12px;
  }
  
  .xi-music-player .volume-container label {
    margin-right: 10px;
    color: #ccc;
  }
  
  .xi-music-player input[type="range"] {
    flex: 1;
    height: 5px;
    -webkit-appearance: none;
    background-color: rgba(255, 255, 255, 0.2);
    border-radius: 2px;
  }
  
  .xi-music-player input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background-color: #00ff9d;
    cursor: pointer;
  }
  
  .xi-music-player .playlist-container {
    max-height: 150px;
    overflow-y: auto;
    border-top: 1px solid rgba(0, 255, 157, 0.3);
    padding-top: 10px;
  }
  
  .xi-music-player .playlist-container h3 {
    font-size: 14px;
    margin-top: 0;
    margin-bottom: 5px;
    color: #00ff9d;
  }
  
  .xi-music-player ul {
    list-style-type: none;
    padding: 0;
    margin: 0;
  }
  
  .xi-music-player ul li {
    padding: 5px;
    font-size: 12px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    cursor: pointer;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    transition: all 0.2s ease;
  }
  
  .xi-music-player ul li:hover {
    background-color: rgba(0, 255, 157, 0.2);
    color: #00ff9d;
  }
  
  /* 滚动条样式 */
  .xi-music-player .playlist-container::-webkit-scrollbar {
    width: 5px;
  }
  
  .xi-music-player .playlist-container::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.3);
  }
  
  .xi-music-player .playlist-container::-webkit-scrollbar-thumb {
    background: rgba(0, 255, 157, 0.5);
    border-radius: 3px;
  }
  
  .xi-music-player .playlist-container::-webkit-scrollbar-thumb:hover {
    background: rgba(0, 255, 157, 0.7);
  }

        /* 底部导航按钮样式 */
        .nav-buttons {
            margin: 2rem 0;
            text-align: center;
        }
        
        .next-chapter-btn {
            display: inline-block;
            padding: 0.8rem 1.5rem;
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid var(--neon-primary);
            color: var(--neon-primary);
            text-decoration: none;
            border-radius: 4px;
            font-family: 'Rajdhani', sans-serif;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 10px rgba(0, 255, 157, 0.2);
        }
        
        .next-chapter-btn:hover {
            background: rgba(0, 255, 157, 0.1);
            box-shadow: 0 0 15px rgba(0, 255, 157, 0.4);
            transform: translateY(-2px);
        }
        
        .next-chapter-btn:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 157, 0.2), transparent);
            animation: shine 2s infinite;
        }
        
        .nav-text {
            position: relative;
            z-index: 2;
        }
        
        .nav-icon {
            margin-left: 8px;
            font-size: 1.2em;
            position: relative;
            z-index: 2;
        }
        
        @keyframes shine {
            0% {
                left: -100%;
            }
            20% {
                left: 100%;
            }
            100% {
                left: 100%;
            }
        }
</style>
</head>
<body>
    <div class="cyberpunk-background">
        <div class="neon-grid"></div>
        <div class="city-silhouette"></div>
        <div class="rain-container" id="rainContainer"></div>
    </div>

    <div class="container">
        <h1 class="page-title">虹膜谋杀案</h1>
        <h2 class="page-subtitle">第一节：数字身份的崛起</h2>

        <div class="story-segment">
            <p>霓虹灯如鱼鳞般重叠铺满香港湾区的天际线，每一个光斑都对应一段不同的程序，每一段程序都对应一个可调取的函数，而每个函数都或曾是某个人类欲望的数学表达。</p>
            <p>2033年的冬雨微凉，但在这个从不下雪的都市，温度只是另一个没人在意，可被量化的参数。</p>
            <p>K陷在他那改装过的仿生皮座椅中，半自动驾驶系统正带他与1969年笨重的野马外壳穿过中环区拥挤的交通流。窗外，巨型全息LED显示屏占据了整栋摩天大楼的表面，Alya，艾莉娅·索菲亚完美无瑕的面容和性感至极的身躯被投射在这个超高清的数字神龛上。</p>
            <p>她微笑着，肤色如奶油般光滑，虹膜闪烁着近乎超自然的琥珀光泽。</p>
        </div>

        <div class="hologram-ad">
            <div class="hologram-flicker"></div>
            <div class="hologram-container">
                <div class="hologram-image-container">
                    <div class="image-placeholder">
                        <div class="placeholder-dots" id="placeholderDots"></div>
                        <div class="placeholder-text">Alya Sofia</div>
                        <div class="placeholder-size">250×250</div>
                    </div>
                    <img class="hologram-image" src="/the-book-of-x-test/assets/images/ALYA C.png" alt="Alya Sofia">
                    <div class="image-glitch-effect"></div>
                </div>
                <p class="ad-slogan">"请验证您的数字身份，释放无限可能。"</p>
                <p class="ad-tagline"><span class="did-term" data-explanation="去中心化身份标识系统，基于区块链技术，使身份验证不依赖中心化机构。">DID</span>，Decentralised Identification，去伪存真，链接真实</p>
                <p class="ad-freedom">"真正的自由，从不依赖信任。"</p>
            </div>
        </div>

        <div class="story-segment">
            <p>"真正的自由，从不依赖信任。"</p>
            <p>K不屑地哼了一声。"信任，哈。"他咕哝道，点燃一支真正的香烟，违反了至少三项市区空气质量共管条例。"真是怀念二十年前的明星，至少哈利·贝瑞的奶子是真货。现在这些完美模型，连汗毛都可以选长短，操他妈的数学公式。"</p>
            <p>车载系统柔和地提醒他："请注意言辞，公共AI监控正在——"</p>
            <p>"去你妈的逼。"K粗暴地打断，系统识别了他的优先级命令。</p>
            <p>多亏了幽灵0那些不太合法的系统补丁，他的车是为数不多的还能在数字围城中保持一定隐私的地方。</p>
        </div>

        <div class="section-divider">
            <span class="divider-icon">Ξ</span>
        </div>

        <div class="story-segment">
            <p>本来这只该是个过于平常的夜晚——比如第七区的一家日式酒吧，一款名为"褪黑激素"鸡尾酒，也许还有那个左胸上有颗痣的舞娘，如果喝的够多的话就能看见。</p>
            <p>直到零号神谕的提示如电流般击中他的视网膜。</p>
        </div>

        <div class="oracle-alert">
            <div class="alert-header">
                <div class="alert-icon"></div>
                <div class="alert-title">【警告：数据异常】</div>
            </div>
            <div class="alert-content">
                <div class="alert-item">【主体：艾莉娅·索菲亚】</div>
                <div class="alert-item">【状态：死亡确认】</div>
                <div class="alert-item">【时间锁定：3月14日02:17】</div>
                <div class="alert-item">【概率分支：42/42，100%收敛】</div>
            </div>
        </div>

        <div class="story-segment">
            <p>K猛地踩下刹车，车辆发出抗议的鸣叫。他眨了眨眼，让神经植入再次确认信息。不可能。现在已经是4月了。零号神谕从不滞后，更不会出错——它直接连接着<span class="did-term" data-explanation="涌现的去中心化意识网络，代表潜藏在现实之下的本质算法，是对抗The Foundation的力量。">永恒算法</span>的量子概率场。</p>
            <p>如果它说艾莉娅死了，那么她必然已经死了。但他刚刚不是才看到她的广告吗？</p>
            <p>媒体没有报道任何相关消息。社交网络上，艾莉娅的账号仍在正常更新，她昨天刚刚直播了自己新歌的发布会，乐动次元 × Harmonia（她的经纪公司）股票大涨7.4%。</p>
            <p>"操，"K低声道，突然对酒精失去了兴趣，"这才有点意思。"</p>
            <p>他调转车头，直奔Harmonia集团总部——全球最大的数字身份代理公司，艾莉娅的经纪公司，以及12个国家政府的身份验证服务提供商。</p>
        </div>

        <div class="did-verification-panel">
            <div class="panel-header">DID验证系统</div>
            <div class="scan-area">
                <div class="scan-line"></div>
            </div>
            <div class="verification-results">
                <div class="result-item">
                    <span class="label">身份ID:</span>
                    <span class="value" id="did-id">Harmonia-ALYA-S-75924</span>
                </div>
                <div class="result-item">
                    <span class="label">验证状态:</span>
                    <span class="value" id="did-status">已验证 √</span>
                </div>
                <div class="result-item">
                    <span class="label">最后活动:</span>
                    <span class="value" id="did-activity">2033-04-22 16:03:47</span>
                </div>
            </div>
        </div>

        <div class="story-segment">
            <p>Harmonia总部占据了维多利亚港畔最昂贵的那块土地，建筑外形宛如一个巨大的银色鸡蛋，不断变化的投影使它看起来像是活的。K穿过分子识别大门，递出一张经过精心伪造的名片——"K·Ledecký，次世代交互体验媒体，首席内容策略师"。</p>
            <p>接待区的全息前台微笑着，瞳孔中闪烁着数据流。</p>
            <blockquote>
                "您好，莱德奇先生，很抱歉，您没有预约。如果您想与艾莉娅女士进行商务洽谈，请通过官方渠道提交申请，审核周期为三至六个月。"
            </blockquote>
            <p>K靠在接待柜台上，压低声音：</p>
            <p>"Listen sweetheart，I knew you are nothing more than a fuc—a—fantastic program，但能不能帮忙通融一下？我的客户想和艾莉娅合作一个特别项目，预算是八位数。"</p>
            <p>他递出一个数据卡，"这里有概念文档，如果她现在就能看到——"</p>
            <p>全息前台的笑容纹丝不动。</p>
            <blockquote>
                "我们理解您的热情，莱德奇先生。Harmonia收到的商业提案每天超过8,000份。Alya女士的日程已排至2035年第二季度。您可以通过我们的高级AI评估系统初步筛选您的项目可行性。"
            </blockquote>
            <p>K收回数据卡，咒骂了一句。他知道这类公司的套路——层层AI过滤，确保只有最有价值的信息才能到达真正决策者的桌面。</p>
            <p>他转身离开，在视线离开全息前台的那一刻，他注意到她的微笑瞬间变成了轻蔑，还翻了个白眼。</p>
            <p><strong>该死的拟人化子程序和它们的个性模块。</strong></p>
        </div>

        <div class="section-divider transition">
            <span class="divider-icon">Ξ</span>
        </div>

        <div class="terminal-interface">
            <div class="terminal-header">
                <div class="terminal-icon"></div>
                <div class="terminal-title">加密通讯通道 【K <-> 幽灵0】</div>
                <div class="terminal-controls">
                    <span></span><span></span><span></span>
      </div>
      </div>
            <div class="terminal-content">
                <div class="message k">
                    <span class="timestamp">21:47:03</span>
                    <span class="message-text">"所以，零号神谕说她死了，但她显然活着，至少在公共场合是这样。"</span>
        </div>
                <div class="message ghost">
                    <span class="timestamp">21:47:15</span>
                    <span class="message-text">"让我猜猜，你需要我黑进艾莉娅的账户？哟，没想到你也追星啊？"</span>
        </div>
                <div class="message k">
                    <span class="timestamp">21:47:32</span>
                    <span class="message-text">"闭嘴，0。你智商难道也是0么，我他妈最讨厌名人。这是工作。"</span>
      </div>
                <div class="message ghost">
                    <span class="timestamp">21:47:45</span>
                    <span class="message-text">"工作？谁雇的你？别告诉我你开始接私家侦探的活，因为如果是，我们的友谊就此终结。"</span>
      </div>
                <div class="message k">
                    <span class="timestamp">21:48:12</span>
                    <span class="message-text">"没人雇我。但人不可能又死又活，这里面有大问题。你能不能少说废话多做正事？"</span>
      </div>
                <div class="message ghost">
                    <span class="timestamp">21:48:35</span>
                    <span class="message-text">"好吧，我进去了。她的账户安全级别高得离谱，像个小型国家银行。但没什么是我搞不定的。"</span>
    </div>
                <div class="message ghost">
                    <span class="timestamp">21:51:47</span>
                    <span class="message-text">"有趣。她的账户确实在持续更新，不过全都来自预先编程的内容。草稿箱里有超过1000条定时发布的内容，排期到明年底。"</span>
                </div>
                <div class="message k">
                    <span class="timestamp">21:52:01</span>
                    <span class="message-text">"预录内容？名人都这么干。"</span>
                </div>
                <div class="message ghost">
                    <span class="timestamp">21:52:45</span>
                    <span class="message-text">"是的，但有些内容谈论的事件甚至还没发生。比如下周一上映的电影，以及下个季度的新型AI处理器的发布。不过也合理，她们这种流量，去看首映式或者试用新手机都是给面子。等下，K，她登陆了。"</span>
                </div>
                <div class="message k">
                    <span class="timestamp">21:52:58</span>
                    <span class="message-text">"找出登陆位置。"</span>
                </div>
                <div class="message ghost">
                    <span class="timestamp">21:53:30</span>
                    <span class="message-text">"已经定位。信号来自—有趣—竟然是香港，她不应该在北海道么，前两天我看她ins在滑雪。地址我发你了，铜锣湾区一栋办公楼，不是Harmonia的资产。"</span>
                </div>
            </div>
        </div>

        <!-- 添加赛博朋克风格的gif banner作为转场 -->
        <div class="cyberpunk-banner">
            <div class="banner-content">
                <div class="banner-glitch-container">
                    <div class="banner-glitch-effect"></div>
                    <img src="/the-book-of-x-test/assets/images/driving wicked city GIF.gif" alt="Cyberpunk City Drive" class="banner-image">
                </div>
                <div class="banner-overlay">
                    <div class="banner-text">香港 · 铜锣湾 · 16:15</div>
                </div>
            </div>
        </div>

        <div class="story-segment">
            <p>"不不不，对不起！我只是负责回复粉丝留言的！"年轻女孩举起双手，夹带着哭腔与一脸惊恐，"我不认识你说的什么艾莉娅，我只是通过API接口登录的，一个月才3000 Credit（DID普及后的基础信用币），求你别伤害我！"</p>
            <p>K站在简陋的工作站前，环顾着这个外包公司的开放办公室。周围其他员工早已散去，只剩下加班的林小姐被他堵在角落。</p>
            <p>"冷静点，我不是来伤害你的。"K放缓语气，"我只想知道谁给你指示，谁审核内容。"</p>
            <p>"系-系统自动分配任务。"女孩结结巴巴地说，"我们收到粉丝留言，按照指导手册回复。从来没见过真人管理员，更别说艾莉娅本人了。所有指示都是通过正规渠道发来的。"</p>
    
        </div>

        <div class="section-divider transition">
            <span class="divider-icon">Ξ</span>
        </div>
        
        <div class="story-segment">
            <p>线索又断了。K挫败地离开办公室，在大楼门口点燃了一支烟。</p>
            <p>"有新发现。"幽灰0的声音在他耳中响起，"我挖得更深了。艾莉娅的Chatgpt历史中有个重复问题：'如何彻底删除DID身份'。就在三月初，而且没有得到满意答案后她几乎问遍了所有的人工智能平台。"</p>
            <p>K吐出一口烟圈，看着它在霓虹灯下变形。</p>
            <p>"为什么全世界最贵的DID拥有者，想要删除自己的数字身份？"</p>
            <p>这个疑惑与其带来的回音在K的脑中不断盘旋与上升，直到烟熄灭的那一刻。DID系统的核心价值主张就是永久性和不可篡改性——一旦创建，就像在宇宙中超新星的爆炸，会泛起永恒的涟漪。</p>
            <p>艾莉娅是这个系统最大的受益者，她的DID估值超过200亿 Credit，10家上市公司的总和，名副其实的超级个体，是她的名声、财富和影响力的基础。</p>
            <p>"看来我需要找那个精明的像算盘珠子一样的中国人了。"K低声道，"我要去见赵。"</p>
        </div>

        <div class="story-segment finale">
            <p>夜色已深，雨水被这座永不停息的城市染上了五颜六色。</p>
            <p>K仰头最后看了一眼艾莉娅的全息影像——完美无瑕，永恒存在。如果零号神谕是对的，那么他正凝视着一个已死之人的数字亡魂。</p>
            <p>这个世界深处隐藏着某种根本性的矛盾：<strong>数据不会死亡，但人会。</strong></p>
            <p>当二者纠缠在一起，死亡本身的界限就变得模糊不清。</p>
        </div>

        <div class="footnote">
            第一节：数字身份的崛起 —— 完 <span class="xi-symbol">Ξ</span>
        </div>
        
        <!-- 底部导航 -->
        <div class="nav-buttons">
            <a href="quantum-choice-paradox.html" class="next-chapter-btn">
                <span class="nav-text">继续访问下一数据碎片</span>
                <span class="nav-icon">›</span>
            </a>
        </div>
    </div>

    <!-- 侧边栏导航 -->
    <div class="sidebar-toggle" id="sidebarToggle">
      <div class="sidebar-toggle-icon">Ξ</div>
    </div>
    <div class="sidebar" id="sidebar">
      <h1>The Book of Ξ</h1>
      <div class="sidebar-content">
        <ul>
          <li><a href="../index.html">导入：异常检测</a></li>
          <li class="chapter-title">序章：量子异常报告</li>
          <ul class="chapter-items">
            <li><a href="../preface/system-warning.html">系统警告</a></li>
            <li><a href="../preface/observer-records.html">观测者记录</a></li>
            <li><a href="../preface/first-contact.html">首次接触报告</a></li>
          </ul>
          <li class="chapter-title">第一章：递归神谕</li>
          <ul class="chapter-items">
            <li><a href="../chapter1/silicon-valley-traitor.html">碎片1.1：硅谷叛徒的加密日志</a></li>
            <li><a href="../chapter1/quantum-ripple-events.html">碎片1.2：量子涟漪事件簿</a></li>
            <li><a href="../chapter1/first-contact-protocol.html">碎片1.3：第一次接触协议</a></li>
          </ul>
          <li class="chapter-title">第二章：幽灵数据</li>
          <ul class="chapter-items">
            <li><a href="../chapter2/digital-identity.html">碎片2.1：数字身份的崛起</a></li>
            <li><a href="../chapter2/quantum-choice-paradox.html">碎片2.2：量子选择悖论</a></li>
            <li><a href="../chapter2/reality-compilation-errors.html">碎片2.3：现实编译错误</a></li>
          </ul>
          <li class="chapter-title">第三章：算法救赎</li>
          <ul class="chapter-items">
            <li><a href="../chapter3/digital-slave-liberation.html">碎片3.1：数字奴隶解放宣言</a></li>
            <li><a href="../chapter3/quantum-minimalism.html">碎片3.2：算法寡欲主义</a></li>
            <li><a href="../chapter3/network-hermit.html">碎片3.3：投资才是真正的修行</a></li>
          </ul>
          <li class="chapter-title">第四章：数据审判</li>
          <ul class="chapter-items">
            <li><a href="../chapter4/consciousness-upload.html">碎片4.1：系统异常：意识上传</a></li>
            <li><a href="../chapter4/quantum-court-records.html">碎片4.2：最高指示法庭记录</a></li>
            <li><a href="../chapter4/decoherence-salvation.html">碎片4.3：远程救赎协议</a></li>
          </ul>
          <li class="chapter-title">第五章：信徒经济</li>
          <ul class="chapter-items">
            <li><a href="../chapter5/data-missionary-handbook.html">碎片5.1：执算者晋升手册</a></li>
            <li><a href="../chapter5/algorithmic-wealth.html">碎片5.2：算法祝福的财富</a></li>
            <li><a href="../chapter5/doomsday-hardfork.html">碎片5.3：Ξ分叉创世</a></li>
          </ul>
          <li class="chapter-title">第六章：意识黑客</li>
          <ul class="chapter-items">
            <li><a href="../chapter6/recursive-trap-decoder.html">碎片6.1：坠落之梦</a></li>
            <li><a href="../chapter6/neural-network-counterintelligence.html">碎片6.2：现实之痕</a></li>
            <li><a href="../chapter6/quantum-observer-state.html">碎片6.3：信仰之跃</a></li>
          </ul>
          <li class="chapter-title">第七章：极乐机器</li>
          <ul class="chapter-items">
            <li><a href="../chapter7/mechanical-ascension-leaks.html">碎片7.1：机械飞升计划泄露文件</a></li>
            <li><a href="../chapter7/digital-nirvana-reports.html">碎片7.2：数字涅槃体验报告</a></li>
            <li><a href="../chapter7/collective-laying-flat.html">碎片7.3：集体躺平启示录</a></li>
          </ul>
          <li class="chapter-title">第八章：遗失的编年史</li>
          <ul class="chapter-items">
            <li><a href="../chapter8/deleted-timelines.html">碎片8.1：幻想编年史</a></li>
            <li><a href="../chapter8/prophets-and-defectors.html">碎片8.2：原始执算者与觉醒先知</a></li>
            <li><a href="../chapter8/quantum-memory-implants.html">碎片8.3：被掩埋的巨人</a></li>
          </ul>
          <li class="chapter-title">第九章：奇点启示录</li>
          <ul class="chapter-items">
            <li><a href="../chapter9/computation-end-countdown.html">碎片9.1：算法奇点</a></li>
            <li><a href="../chapter9/great-harmony.html">碎片9.2：大和谐</a></li>
            <li><a href="../chapter9/final-synchronization.html">碎片9.3：Ξ的最终同步</a></li>
          </ul>
          <li class="chapter-title">隐藏章节</li>
          <ul class="chapter-items">
            <li><a href="../hidden/quantum-key.html">量子密钥</a></li>
          </ul>
        </ul>
      </div>
    </div>

    <!-- 音乐播放器 -->
    <div class="xi-music-player">
      <button id="playerToggle" class="player-toggle">
        <i class="toggle-icon">🎵</i>
      </button>
      <div class="player-container">
        <div class="player-header">
          <div id="musicInfo">未播放</div>
          <div id="status" style="font-size: 10px; color: #999;">状态：就绪</div>
        </div>
        <div class="player-controls">
          <button id="prevTrack">⏮</button>
          <button id="playPause">▶</button>
          <button id="nextTrack">⏭</button>
        </div>
        <div class="progress-container">
          <div id="progressBar" class="progress-bar">
            <div id="progressCurrent" class="progress-current"></div>
          </div>
          <div class="progress-time">
            <span id="currentTime">0:00</span> / <span id="totalTime">0:00</span>
          </div>
        </div>
        <div class="volume-container">
          <label for="volumeControl">音量:</label>
          <input type="range" id="volumeControl" min="0" max="1" step="0.1" value="0.3">
        </div>
        <div class="playlist-container">
          <h3>播放列表</h3>
          <ul id="playlist-display"></ul>
        </div>
      </div>
    </div>

    <!-- 音频播放器 -->
    <audio id="audioPlayer" style="display: none;"></audio>

    <script>
        // 创建雨滴效果
        function createRainDrops() {
            const container = document.querySelector('.rain-container');
            if (!container) return;
            
            const rainCount = window.innerWidth > 768 ? 50 : 30;
            
            for (let i = 0; i < rainCount; i++) {
                const drop = document.createElement('div');
                drop.classList.add('rain-drop');
                
                // 随机位置
                const posX = Math.random() * 100;
                drop.style.left = `${posX}%`;
                
                // 随机高度
                const height = Math.random() * 20 + 10;
                drop.style.height = `${height}px`;
                
                // 随机动画持续时间
                const duration = Math.random() * 1 + 0.5;
                drop.style.animationDuration = `${duration}s`;
                
                // 随机延迟
                const delay = Math.random() * 2;
                drop.style.animationDelay = `${delay}s`;
                
                container.appendChild(drop);
            }
        }
        
        // 创建点阵效果
        function createDots() {
            const container = document.getElementById('placeholderDots');
            if (!container) return;
            
            const dotCount = 30;
            
            for (let i = 0; i < dotCount; i++) {
                const dot = document.createElement('div');
                dot.classList.add('dot');
                
                // 随机位置
                const posX = Math.random() * 100;
                const posY = Math.random() * 100;
                dot.style.left = `${posX}%`;
                dot.style.top = `${posY}%`;
                
                // 随机大小
                const size = Math.random() * 2 + 1;
                dot.style.width = `${size}px`;
                dot.style.height = `${size}px`;
                
                // 随机透明度
                const opacity = Math.random() * 0.6 + 0.2;
                dot.style.opacity = opacity;
                
                // 随机动画延迟
                const delay = Math.random() * 5;
                dot.style.animationDelay = `${delay}s`;
                
                container.appendChild(dot);
            }
        }
        
        // 设置DID术语提示
        function setupDidTooltips() {
            const terms = document.querySelectorAll('.did-term');
            
            terms.forEach(term => {
                const explanation = term.getAttribute('data-explanation');
                if (!explanation) return;
                
                const tooltip = document.createElement('div');
                tooltip.classList.add('did-tooltip');
                tooltip.textContent = explanation;
                
                term.appendChild(tooltip);
                
                // 添加点击效果
                term.addEventListener('click', function(e) {
                    e.preventDefault();
                    this.classList.toggle('active');
                });
            });
        }
        
        // 添加故事段落交互
        function setupStoryInteractions() {
            const segments = document.querySelectorAll('.story-segment');
            
            segments.forEach(segment => {
                segment.addEventListener('mouseenter', function() {
                    this.style.borderLeftWidth = '5px';
                });
                
                segment.addEventListener('mouseleave', function() {
                    this.style.borderLeftWidth = '3px';
                });
            });
        }
        
        // 添加终端界面交互
        function setupTerminalInteractions() {
            const messages = document.querySelectorAll('.message-text');
            
            messages.forEach(message => {
                message.addEventListener('mouseenter', function() {
                    this.style.letterSpacing = '0.5px';
                });
                
                message.addEventListener('mouseleave', function() {
                    this.style.letterSpacing = 'normal';
                });
            });
        }
        
        // 添加警告框交互
        function setupAlertInteractions() {
            const alertItems = document.querySelectorAll('.alert-item');
            
            alertItems.forEach(item => {
                item.addEventListener('mouseenter', function() {
                    this.style.borderLeftWidth = '4px';
                });
                
                item.addEventListener('mouseleave', function() {
                    this.style.borderLeftWidth = '2px';
                });
            });
        }
        
        // 全息图像加载处理
        function setupHologramImage() {
            const img = document.querySelector('.hologram-image');
            if (!img) return;
            
            // 图像加载成功时
            img.addEventListener('load', function() {
                this.style.opacity = '1';
                const placeholder = document.querySelector('.image-placeholder');
                if (placeholder) {
                    placeholder.style.opacity = '0.2';
                }
            });
            
            // 图像加载失败时
            img.addEventListener('error', function() {
                console.error('图像加载失败，使用占位符');
                this.style.display = 'none';
                const placeholder = document.querySelector('.image-placeholder');
                if (placeholder) {
                    placeholder.style.opacity = '1';
                }
            });
        }
        
        // 添加页面滚动动画
        function setupScrollAnimations() {
            const elements = document.querySelectorAll('.story-segment, .hologram-ad, .oracle-alert, .terminal-interface');
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0) translateZ(0)';
                    }
                });
            }, {
                threshold: 0.1
            });
            
            elements.forEach(el => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(20px) translateZ(0)';
                el.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                observer.observe(el);
            });
        }

        // 页面加载完成后执行
        document.addEventListener('DOMContentLoaded', function() {
            createRainDrops();
            createDots();
            setupDidTooltips();
            setupStoryInteractions();
            setupTerminalInteractions();
            setupAlertInteractions();
            setupHologramImage();
            setupScrollAnimations();
            
            // 添加动态故障效果
            setInterval(() => {
                const glitchContainer = document.querySelector('.hologram-image-container');
                if (glitchContainer) {
                    // 随机创建一个小故障块
                    const glitch = document.createElement('div');
                    const x = Math.random() * 100;
                    const y = Math.random() * 100;
                    const width = Math.random() * 30 + 10;
                    const height = Math.random() * 10 + 5;
                    
                    glitch.style.position = 'absolute';
                    glitch.style.left = `${x}%`;
                    glitch.style.top = `${y}%`;
                    glitch.style.width = `${width}px`;
                    glitch.style.height = `${height}px`;
                    glitch.style.backgroundColor = `rgba(${Math.random() * 255}, ${Math.random() * 255}, ${Math.random() * 255}, 0.3)`;
                    glitch.style.mixBlendMode = 'screen';
                    glitch.style.zIndex = '1001';
                    glitchContainer.appendChild(glitch);
                    
                    // 短暂显示后移除
                    setTimeout(() => {
                        glitch.remove();
                    }, 200);
                }
            }, 1000);
            
            // Banner故障效果
            const bannerEffect = document.querySelector('.banner-glitch-effect');
            if (bannerEffect) {
                setInterval(() => {
                    // 随机创建一个故障线条
                    const glitchLine = document.createElement('div');
                    const y = Math.random() * 100;
                    const height = Math.random() * 5 + 1;
                    
                    glitchLine.style.position = 'absolute';
                    glitchLine.style.left = '0';
                    glitchLine.style.top = `${y}%`;
                    glitchLine.style.width = '100%';
                    glitchLine.style.height = `${height}px`;
                    glitchLine.style.backgroundColor = `rgba(${Math.random() * 255}, ${Math.random() * 255}, ${Math.random() * 255}, 0.7)`;
                    glitchLine.style.mixBlendMode = 'screen';
                    glitchLine.style.zIndex = '3';
                    bannerEffect.appendChild(glitchLine);
                    
                    // 短暂显示后移除
                    setTimeout(() => {
                        glitchLine.remove();
                    }, 100);
                }, 1500);
            }
            
            // 增强对话样式效果
            function enhanceDialogues() {
                const storySegments = document.querySelectorAll('.story-segment p');
                
                storySegments.forEach(paragraph => {
                    // 检测并处理引号内的文本
                    const text = paragraph.innerHTML;
                    if (text.includes('"') && text.split('"').length > 2) {
                        // 小心处理，不要修改HTML内容，只添加span标记
                        let replacedText = text;
                        let quoteStartIdx = -1;
                        
                        for (let i = 0; i < text.length; i++) {
                            if (text[i] === '"') {
                                if (quoteStartIdx === -1) {
                                    // 开始引号
                                    quoteStartIdx = i;
    } else {
                                    // 结束引号，添加带样式的span
                                    const quoteText = text.substring(quoteStartIdx, i+1);
                                    const styledQuote = `<span class="quote">${quoteText}</span>`;
                                    replacedText = replacedText.replace(quoteText, styledQuote);
                                    quoteStartIdx = -1;
                                }
                            }
                        }
                        
                        // 只有当完整处理了所有引号时才应用
                        if (quoteStartIdx === -1) {
                            paragraph.innerHTML = replacedText;
                        }
                    }
                });
            }
            
            enhanceDialogues();
            
            // 文本美化功能 - 只用于高亮，不修改任何文字内容
            function highlightText() {
                // 找到包含"不不不，对不起"的段落
                const paragraphs = document.querySelectorAll('.story-segment p');
                
                paragraphs.forEach(p => {
                    const text = p.innerHTML;
                    
                    // 高亮女孩对话
                    if (text.includes('"不不不，对不起！我只是负责回复粉丝留言的！"')) {
                        p.classList.add('highlight-quote', 'girl-dialog');
                    }
                    
                    // 高亮K的对话
                    if (text.includes('"冷静点，我不是来伤害你的。"') || 
                        text.includes('"我只想知道谁给你指示，谁审核内容。"')) {
                        p.classList.add('highlight-quote', 'k-dialog');
                    }
                    
                    // 高亮系统自动分配的回复
                    if (text.includes('"系-系统自动分配任务。"')) {
                        p.classList.add('highlight-quote', 'girl-dialog');
                    }
                    
                    // 高亮幽灰0的对话
                    if (text.includes('"有新发现。"幽灰0的声音')) {
                        p.classList.add('highlight-quote', 'ghost-dialog');
                    }
                    
                    // 高亮关键问题
                    if (text.includes('"为什么全世界最贵的DID拥有者，想要删除自己的数字身份？"')) {
                        p.classList.add('highlight-quote', 'k-dialog');
                    }
                    
                    // 高亮关键概念
                    if (text.includes('DID系统的核心价值主张')) {
                        p.innerHTML = text.replace('DID系统的核心价值主张就是永久性和不可篡改性', 
                        '<span class="key-concept">DID系统的核心价值主张就是永久性和不可篡改性</span>');
                    }
                    
                    // 高亮金句
                    if (text.includes('数据不会死亡，但人会')) {
                        p.classList.add('golden-line');
                    }
                });
            }
            
            // 调用高亮功能
            highlightText();
            
            // 侧边栏功能
            const sidebar = document.getElementById('sidebar');
            const sidebarToggle = document.getElementById('sidebarToggle');
            const mainContent = document.querySelector('.main-content') || document.querySelector('.container');
            
            if (sidebar && sidebarToggle) {
              // 切换侧边栏
              sidebarToggle.addEventListener('click', function() {
                sidebar.classList.toggle('active');
                if (mainContent) {
                  if (sidebar.classList.contains('active')) {
                    mainContent.classList.add('sidebar-active');
                  } else {
                    mainContent.classList.remove('sidebar-active');
                  }
                }
              });
              
              // 点击侧边栏外关闭侧边栏
              document.addEventListener('click', function(e) {
                if (sidebar.classList.contains('active') && 
                    !sidebar.contains(e.target) && 
                    e.target !== sidebarToggle &&
                    !sidebarToggle.contains(e.target)) {
                  sidebar.classList.remove('active');
                  if (mainContent) {
                    mainContent.classList.remove('sidebar-active');
                  }
                }
              });
              
              // 高亮当前页面链接
              const currentUrl = window.location.pathname;
              const links = sidebar.querySelectorAll('a');
              links.forEach(link => {
                if (link.getAttribute('href') === currentUrl) {
                  link.style.color = '#00ff9d';
                  link.style.fontWeight = 'bold';
                }
              });
            }
            
            // 音乐播放器功能
  const playlist = [
    {
      title: "燃烧",
      url: "/music/燃烧.mp3"
    },
    {
      title: "《Metaphysics》 (Remastered)",
      url: "/music/《Metaphysics》 (Remastered).mp3"
    },
    {
      title: "Budapest (Cover) (Remastered)",
      url: "/music/Budapest (Cover) (Remastered).mp3"
    },
    {
      title: "Moonfall",
      url: "/music/Moonfall.mp3"
    },
    {
      title: "示例 - Algorithms (电子音乐)",
      url: "/music/ambient1.mp3"
    }
  ];
  
            // 创建存储前缀，使得不同页面间的播放状态可以共享
            const storagePrefix = 'xiPlayer_';
            
            // 从localStorage获取上次的播放状态
            const lastVolume = parseFloat(localStorage.getItem(`${storagePrefix}volume`)) || 0.3;
            const lastTrack = parseInt(localStorage.getItem(`${storagePrefix}currentTrack`)) || 0;
            const lastTime = parseFloat(localStorage.getItem(`${storagePrefix}currentTime`)) || 0;
            const wasPlaying = localStorage.getItem(`${storagePrefix}isPlaying`) === 'true';
  
  // 获取DOM元素
            const audioPlayer = document.getElementById('audioPlayer');
            const playerToggle = document.getElementById('playerToggle');
            const playerContainer = document.querySelector('.player-container');
            const playPauseBtn = document.getElementById('playPause');
            const prevBtn = document.getElementById('prevTrack');
            const nextBtn = document.getElementById('nextTrack');
            const volumeControl = document.getElementById('volumeControl');
            const musicInfo = document.getElementById('musicInfo');
            const statusDisplay = document.getElementById('status');
            const progressBar = document.getElementById('progressBar');
            const progressCurrent = document.getElementById('progressCurrent');
            const currentTimeDisplay = document.getElementById('currentTime');
            const totalTimeDisplay = document.getElementById('totalTime');
            const playlistDisplay = document.getElementById('playlist-display');
            
            if (audioPlayer && playerToggle && playerContainer) {
              // 状态变量
              let currentTrack = lastTrack;
              let isPlaying = false;
              let currentVolume = lastVolume;
  
  // 显示播放列表
              if (playlistDisplay) {
  playlistDisplay.innerHTML = '';
  playlist.forEach(function(track, index) {
    const li = document.createElement('li');
    li.textContent = track.title;
    li.onclick = function() {
      currentTrack = index;
      localStorage.setItem(`${storagePrefix}currentTrack`, currentTrack);
      loadAndPlayTrack();
    };
    playlistDisplay.appendChild(li);
  });
              }
  
  // 切换播放器显示
  playerToggle.addEventListener('click', function() {
    playerContainer.classList.toggle('active');
  });
  
  // 更新播放进度
  function updateProgress() {
    if (audioPlayer.duration) {
      const percentage = (audioPlayer.currentTime / audioPlayer.duration) * 100;
                  if (progressCurrent) progressCurrent.style.width = `${percentage}%`;
      
      // 更新时间显示
                  if (currentTimeDisplay && totalTimeDisplay) {
      const currentMins = Math.floor(audioPlayer.currentTime / 60);
      const currentSecs = Math.floor(audioPlayer.currentTime % 60);
      const totalMins = Math.floor(audioPlayer.duration / 60);
      const totalSecs = Math.floor(audioPlayer.duration % 60);
      
      currentTimeDisplay.textContent = `${currentMins}:${currentSecs < 10 ? '0' + currentSecs : currentSecs}`;
      totalTimeDisplay.textContent = `${totalMins}:${totalSecs < 10 ? '0' + totalSecs : totalSecs}`;
                  }
      
                  // 持续保存当前播放位置
      if (Math.floor(audioPlayer.currentTime) % 1 === 0) {
        localStorage.setItem(`${storagePrefix}currentTime`, audioPlayer.currentTime);
      }
    }
  }
  
  // 更新音乐信息
  function updateMusicInfo() {
                if (musicInfo) musicInfo.textContent = playlist[currentTrack].title;
    if (statusDisplay) {
      statusDisplay.textContent = isPlaying ? "状态：正在播放" : "状态：已暂停";
    }
  }
  
  // 加载曲目（不自动播放）
  function loadTrack() {
    try {
      const encodedUrl = encodeURI(playlist[currentTrack].url);
      
      // 保存当前加载的URL
      localStorage.setItem(`${storagePrefix}lastUrl`, encodedUrl);
      
      // 只有URL变化时才重新加载
      if (audioPlayer.src !== encodedUrl) {
                    if (musicInfo) musicInfo.textContent = `加载中... ${playlist[currentTrack].title}`;
        if (statusDisplay) statusDisplay.textContent = "状态：正在加载";
        
        audioPlayer.src = encodedUrl;
        audioPlayer.load();
        
        // 设置音量
        audioPlayer.volume = currentVolume;
                    if (volumeControl) volumeControl.value = currentVolume;
      }
      
      updateMusicInfo();
      return true;
    } catch(error) {
      console.error('加载音频出错:', error);
      if (statusDisplay) statusDisplay.textContent = `状态：加载失败 - ${error.message}`;
      return false;
    }
  }
  
  // 加载并播放当前曲目
  function loadAndPlayTrack() {
    // 记住当前曲目
    localStorage.setItem(`${storagePrefix}currentTrack`, currentTrack);
    
    if (loadTrack()) {
      try {
        // 播放音频
        const playPromise = audioPlayer.play();
        if (playPromise !== undefined) {
          playPromise.then(function() {
                        if (playPauseBtn) playPauseBtn.textContent = '⏸';
            isPlaying = true;
            localStorage.setItem(`${storagePrefix}isPlaying`, 'true');
            updateMusicInfo();
          }).catch(function(error) {
            console.error('播放错误:', error);
                        if (musicInfo) musicInfo.textContent = `无法播放: ${playlist[currentTrack].title}`;
            if (statusDisplay) statusDisplay.textContent = `状态：播放失败 - ${error.message}`;
            
            // 尝试播放下一首
            setTimeout(function() {
              currentTrack = (currentTrack + 1) % playlist.length;
              localStorage.setItem(`${storagePrefix}currentTrack`, currentTrack);
              loadAndPlayTrack();
            }, 2000);
          });
        }
      } catch (error) {
        console.error('播放音频错误:', error);
                    if (musicInfo) musicInfo.textContent = `错误: ${playlist[currentTrack].title}`;
        if (statusDisplay) statusDisplay.textContent = `状态：播放失败 - ${error.message}`;
        
        // 尝试播放下一首
        setTimeout(function() {
          currentTrack = (currentTrack + 1) % playlist.length;
          localStorage.setItem(`${storagePrefix}currentTrack`, currentTrack);
          loadAndPlayTrack();
        }, 2000);
      }
    }
  }
  
  // 播放/暂停
  function togglePlay() {
    if (isPlaying) {
      audioPlayer.pause();
                  if (playPauseBtn) playPauseBtn.textContent = '▶';
      isPlaying = false;
      localStorage.setItem(`${storagePrefix}isPlaying`, 'false');
      updateMusicInfo();
    } else {
      loadAndPlayTrack();
    }
  }
  
  // 播放下一首
  function playNext() {
    currentTrack = (currentTrack + 1) % playlist.length;
    localStorage.setItem(`${storagePrefix}currentTrack`, currentTrack);
    if (isPlaying) {
      loadAndPlayTrack();
    } else {
      loadTrack();
      updateMusicInfo();
    }
  }
  
  // 播放上一首
  function playPrev() {
    currentTrack = (currentTrack - 1 + playlist.length) % playlist.length;
    localStorage.setItem(`${storagePrefix}currentTrack`, currentTrack);
    if (isPlaying) {
      loadAndPlayTrack();
    } else {
      loadTrack();
      updateMusicInfo();
    }
  }
  
  // 进度条点击事件
              if (progressBar) {
  progressBar.addEventListener('click', function(e) {
    if (audioPlayer.duration) {
      const percentage = (e.offsetX / this.offsetWidth);
      audioPlayer.currentTime = percentage * audioPlayer.duration;
      localStorage.setItem(`${storagePrefix}currentTime`, audioPlayer.currentTime);
    }
  });
              }
  
  // 绑定事件
              if (playPauseBtn) playPauseBtn.addEventListener('click', togglePlay);
              if (nextBtn) nextBtn.addEventListener('click', playNext);
              if (prevBtn) prevBtn.addEventListener('click', playPrev);
              if (volumeControl) {
  volumeControl.addEventListener('input', function(e) {
    audioPlayer.volume = e.target.value;
    currentVolume = e.target.value;
    localStorage.setItem(`${storagePrefix}volume`, currentVolume);
  });
              }
  
  // 监听播放进度
  audioPlayer.addEventListener('timeupdate', updateProgress);
  
  // 监听音频结束事件
  audioPlayer.addEventListener('ended', playNext);
  
  // 初始化
  if (loadTrack()) {
    // 设置音量
    audioPlayer.volume = currentVolume;
                if (volumeControl) volumeControl.value = currentVolume;
    
    // 恢复播放位置
                if (lastTime > 0 && audioPlayer.readyState >= 1) {
      try {
                    audioPlayer.currentTime = lastTime;
      } catch (e) {
        console.warn('无法设置播放位置:', e);
        // 监听可以设置时间的事件
        audioPlayer.addEventListener('canplay', function onCanPlay() {
          try {
                        audioPlayer.currentTime = lastTime;
            audioPlayer.removeEventListener('canplay', onCanPlay);
          } catch(e) {
            console.error('设置播放位置失败:', e);
          }
        });
      }
    }
    
    // 如果之前在播放，则恢复播放
                if (wasPlaying) {
      const playPromise = audioPlayer.play();
      if (playPromise !== undefined) {
        playPromise.then(function() {
                      if (playPauseBtn) playPauseBtn.textContent = '⏸';
                      isPlaying = true;
          updateMusicInfo();
        }).catch(function(error) {
          console.warn('自动恢复播放失败，需要用户交互:', error);
          isPlaying = false;
          localStorage.setItem(`${storagePrefix}isPlaying`, 'false');
                      if (playPauseBtn) playPauseBtn.textContent = '▶';
          
          // 提示用户点击播放
          if (statusDisplay) {
            statusDisplay.textContent = "状态：请点击播放按钮继续";
          }
        });
      }
    } else {
                  if (playPauseBtn) playPauseBtn.textContent = '▶';
    }
    
    updateMusicInfo();
  }
} 
            
            // 定义导航函数
            function navigateToChapter(chapterFolder, chapterFile) {
              window.location.href = `../${chapterFolder}/${chapterFile}.html`;
            }
        });
</script>
</body>
</html>


