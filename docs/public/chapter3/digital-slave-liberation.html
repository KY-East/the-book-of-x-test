<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>数字奴隶解放宣言 | The Book of Ξ</title>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;600;700&family=Fira+Code:wght@400;700&family=Orbitron:wght@400;700&family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- 引入Ξ视觉效果系统 -->
    <script>
        // 自动检测环境并设置基础路径
        let basePath = '';
        const host = window.location.hostname;
        const path = window.location.pathname;
        
        // 如果是GitHub Pages域名或路径中包含仓库名
        if (host.includes('github.io') || path.includes('/the-book-of-x-test/')) {
            basePath = '/the-book-of-x-test';
        }
        window.xiBasePath = basePath; // 将基础路径保存为全局变量
        console.log('设置XiBasePath:', window.xiBasePath);
        
        // 全局XiVisualEffects配置
        window.xiVisualConfig = {
            performanceLevel: 'high',
            defaultTheme: 'athens',
            particleDensity: 1.0,
            showFPS: false
        };
    </script>
    
    <!-- 引用XiVisualEffects库 -->
    <!-- 修正路径，确保可以在本地和GitHub Pages环境中正确加载 -->
    <script>
        // 基于之前设置的xiBasePath动态加载正确路径的XiVisualEffects
        document.write(`<script src="${window.xiBasePath}/XiVisualEffects/xi-visual-effects-system.js"><\/script>`);
    </script>
    
    <!-- 测试与初始化XiVisualEffects -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOMContentLoaded - 初始化XiVisualEffects');
            if (typeof XiVisualEffects !== 'undefined') {
                // 初始化XiVisualEffects
                XiVisualEffects.init({ 
                    showFPS: true,
                    performanceLevel: 'high',
                    particleDensity: 1.0 
                });
                console.log('XiVisualEffects初始化成功');
                
                // 添加测试粒子
                XiVisualEffects.effects.add('particle', 'lightParticles', { 
                    count: 50,
                    colors: ['#DAA520']
                });
                console.log('添加测试粒子成功');
            } else {
                console.error('XiVisualEffects未加载');
            }
        });
    </script>
    
    <script src="athens-visual-effects.js"></script>
    <!-- 移除原有滚动动画脚本，改用统一版本 -->
    <!-- <script src="athens-scroll-animations.js"></script> -->
    <script src="unified-scroll-animations.js"></script>
    
    <!-- CSS样式 -->
    <style>
        :root {
            --neon-primary: #00ff9d;
            --neon-secondary: #ff3366;
            --neon-blue: #0088ff;
            --neon-purple: #cc00ff;
            --neon-gold: #FFD700;
            --neon-cyan: #00ffd9;
            --bg-primary: #0a0a12;
            --bg-secondary: #14141e;
            --bg-dark-blue: #080814;
            --bg-athens: #1c1a24;
            --terminal-bg: rgba(10, 10, 18, 0.9);
            --terminal-border: rgba(0, 255, 157, 0.3);
            --terminal-text: #cccccc;
            --alert-bg: rgba(20, 0, 0, 0.9);
            --alert-border: rgba(255, 51, 102, 0.5);
            --alert-text: #ff3366;
            --text-primary: #e0e0e0;
            --text-secondary: #aaaaaa;
            --glitch-color-1: #ff00ea;
            --glitch-color-2: #00ff9d;
            --greek-blue: #2A5B8B;
            --greek-gold: #DAA520;
            --athens-white: #f5f5f5;
            --athens-stone: #E8E3D9;
            --column-shadow: rgba(0, 0, 0, 0.4);
            --marble-white: #f8f8f8;
        }

        /* Greek animations */
        @keyframes greek-pulse {
            0%, 100% {
                box-shadow: 0 0 10px var(--greek-gold);
            }
            50% {
                box-shadow: 0 0 25px var(--greek-gold), 0 0 40px rgba(218, 165, 32, 0.4);
            }
        }

        @keyframes marble-glisten {
            0%, 100% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
        }

        @keyframes float {
            0% {
                transform: translateY(0px) rotate(0deg);
            }
            50% {
                transform: translateY(-10px) rotate(2deg);
            }
            100% {
                transform: translateY(0px) rotate(0deg);
            }
        }

        @keyframes scroll-x {
            0% { background-position: 0 0; }
            100% { background-position: 100% 0; }
        }

        @keyframes meander-flow {
            0% { background-position: 0 0; }
            100% { background-position: 200% 0; }
        }

        @keyframes column-glow {
            0%, 100% {
                box-shadow: 0 0 10px rgba(218, 165, 32, 0.3);
            }
            50% {
                box-shadow: 0 0 25px rgba(218, 165, 32, 0.5);
            }
        }

        @keyframes xi-rotate {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(360deg); }
        }

        @keyframes heat-wave {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-3px);
            }
        }

        @keyframes text-shimmer {
            0% {
                background-position: -100% 0;
            }
            100% {
                background-position: 200% 0;
            }
        }

        /* Basic styling */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            font-family: 'Rajdhani', sans-serif;
            line-height: 1.6;
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
            padding-bottom: 50px;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(204, 0, 255, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(0, 255, 157, 0.05) 0%, transparent 45%);
            opacity: 0.15;
            z-index: -1;
            filter: blur(1.2px) brightness(0.65) contrast(1.2) saturate(1.1);
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* Page title */
        .page-title-container {
            position: relative;
            margin: 30px 0;
            padding: 20px 0;
            text-align: center;
        }

        .page-title {
            color: var(--greek-gold);
            text-align: center;
            font-size: 3rem;
            font-family: 'Cinzel', serif;
            text-shadow: 0 0 10px var(--greek-gold);
            position: relative;
            animation: greek-pulse 4s infinite;
            letter-spacing: 3px;
            display: inline-block;
        }

        .page-subtitle {
            color: var(--athens-white);
            font-family: 'Cinzel', serif;
            font-size: 1.5rem;
            margin-top: 10px;
            opacity: 0.8;
        }

        /* Greek temple header */
        .temple-header {
            position: relative;
            height: 200px;
            margin-bottom: 50px;
            overflow: hidden;
        }

        .temple-sky {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 70%;
            background: linear-gradient(to bottom, #1a1a2e, #2a3d66);
            z-index: 1;
        }
        
        /* 为天空添加全局光照效果 */
        .temple-sky::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(
                circle at 80% 30%, 
                rgba(255, 236, 173, 0.3) 0%, 
                rgba(255, 215, 89, 0.1) 20%, 
                transparent 60%
            );
            z-index: 2;
            pointer-events: none;
        }

        /* 更自然的太阳效果 */
        .athens-sun {
            position: absolute;
            top: 15px;
            right: 60px;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: radial-gradient(circle at center, 
                rgba(255, 236, 173, 0.9) 0%, 
                rgba(255, 215, 89, 0.8) 30%, 
                rgba(255, 165, 77, 0.7) 60%, 
                rgba(255, 132, 77, 0.4) 100%);
            box-shadow: 
                0 0 40px rgba(255, 215, 89, 0.4), 
                0 0 80px rgba(255, 215, 89, 0.3), 
                0 0 120px rgba(255, 215, 89, 0.2);
            z-index: 3;
            opacity: 0.85;
            animation: sun-pulse 6s infinite ease-in-out;
        }

        /* 创建太阳光晕效果 */
        .athens-sun::after {
            content: '';
            position: absolute;
            top: -30px;
            left: -30px;
            width: 130px;
            height: 130px;
            border-radius: 50%;
            background: radial-gradient(circle at center, 
                rgba(255, 236, 173, 0.3) 0%, 
                rgba(255, 215, 89, 0.2) 40%, 
                rgba(255, 215, 89, 0.1) 60%, 
                transparent 100%);
            z-index: -1;
            display: block;
        }
        
        /* 移除旧的光束效果 */
        .athens-sun::before {
            display: none;
        }

        /* 太阳脉动效果 */
        @keyframes sun-pulse {
            0%, 100% {
                box-shadow: 
                    0 0 40px rgba(255, 215, 89, 0.4), 
                    0 0 80px rgba(255, 215, 89, 0.3), 
                    0 0 120px rgba(255, 215, 89, 0.2);
            }
            50% {
                box-shadow: 
                    0 0 50px rgba(255, 215, 89, 0.5), 
                    0 0 100px rgba(255, 215, 89, 0.4), 
                    0 0 150px rgba(255, 215, 89, 0.3);
            }
        }

        /* 隐藏不再需要的旧光束元素 */
        .athens-sunbeam-1, .athens-sunbeam-2, .athens-sunbeam-3 {
            display: none;
        }

        .temple-columns-container {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 70%;
            display: flex;
            justify-content: space-between;
            padding: 0 5%;
            z-index: 2;
        }

        .temple-column {
            width: 8%;
            height: 100%;
            background: linear-gradient(to bottom, var(--athens-stone) 0%, var(--athens-white) 20%, var(--athens-stone) 40%, var(--athens-white) 60%, var(--athens-stone) 80%, var(--athens-white) 100%);
            border-radius: 5px 5px 0 0;
            position: relative;
            animation: column-glow 4s infinite;
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.3);
        }

        .temple-column::before {
            content: '';
            position: absolute;
            top: -15px;
            left: -20%;
            width: 140%;
            height: 15px;
            background: var(--athens-stone);
            border-radius: 5px 5px 0 0;
        }

        .temple-column::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: -20%;
            width: 140%;
            height: 15px;
            background: var(--athens-stone);
        }

        .temple-roof {
            position: absolute;
            top: 10%;
            left: 10%;
            width: 80%;
            height: 20px;
            background: var(--athens-stone);
            clip-path: polygon(0% 100%, 50% 0%, 100% 100%);
            z-index: 3;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .temple-base {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 20px;
            background: var(--athens-stone);
            z-index: 2;
        }

        /* Greek patterns */
        .greek-pattern {
            height: 20px;
            width: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="20" viewBox="0 0 100 20"><path d="M0,10 L20,10 L20,0 L40,0 L40,10 L60,10 L60,20 L80,20 L80,10 L100,10" fill="none" stroke="%232A5B8B" stroke-width="2"/></svg>');
            background-size: 100px 20px;
            background-repeat: repeat-x;
            margin: 20px 0;
            animation: scroll-x 20s linear infinite;
            opacity: 0.7;
        }

        .greek-meander {
            height: 30px;
            width: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="30" viewBox="0 0 100 30"><path d="M0,15 L10,15 L10,5 L20,5 L20,15 L30,15 L30,25 L40,25 L40,15 L50,15 L50,5 L60,5 L60,15 L70,15 L70,25 L80,25 L80,15 L90,15 L90,5 L100,5" fill="none" stroke="%23DAA520" stroke-width="3"/></svg>');
            background-size: 100px 30px;
            background-repeat: repeat-x;
            margin: 20px 0;
            animation: meander-flow 30s linear infinite;
            opacity: 0.8;
        }

        /* Section styles */
        .section {
            margin-bottom: 60px;
            position: relative;
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease, transform 0.8s ease;
            background-color: rgba(10, 10, 18, 0.7);
            padding: 30px;
            border-left: 5px solid var(--greek-gold);
            border-radius: 5px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .section.active {
            opacity: 1;
            transform: translateY(0);
        }

        .section-title {
            color: var(--greek-gold);
            font-size: 2rem;
            font-family: 'Cinzel', serif;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--greek-gold);
            text-shadow: 0 0 5px var(--greek-gold);
            position: relative;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 100%;
            height: 1px;
            background: linear-gradient(to right, transparent, var(--greek-gold), transparent);
            animation: greek-pulse 2s infinite;
        }

        /* Paragraph styles */
        .section p {
            margin-bottom: 20px;
            line-height: 1.8;
            position: relative;
            transition: all 0.3s ease;
            font-family: 'Rajdhani', sans-serif;
        }

        .section p:first-of-type::first-letter {
            font-size: 3em;
            float: left;
            margin-right: 10px;
            color: var(--greek-gold);
            text-shadow: 0 0 5px var(--greek-gold);
            line-height: 0.8;
            font-family: 'Cinzel', serif;
        }

        .section p.dialogue {
            padding-left: 20px;
            font-style: italic;
            border-left: 2px solid var(--greek-blue);
        }

        .section p.dialogue.antithes {
            border-left-color: var(--neon-blue);
        }

        .section p.dialogue.merilitas {
            border-left-color: var(--neon-secondary);
        }

        .section p.dialogue.philo {
            border-left-color: var(--neon-gold);
        }

        .section p.dialogue.kallicrates {
            border-left-color: var(--neon-purple);
        }

        /* Special highlighted text */
        .heat-text {
            display: inline-block;
            color: #ff6b6b;
            font-weight: bold;
            animation: heat-wave 2s infinite;
            text-shadow: 0 0 5px rgba(255, 107, 107, 0.7);
        }

        .marble-text {
            display: inline-block;
            background: linear-gradient(90deg, #e6e6e6, #ffffff, #e6e6e6);
            background-size: 200% 100%;
            -webkit-background-clip: text;
            color: transparent;
            animation: marble-glisten 3s ease infinite;
            font-weight: bold;
        }

        .crowd-text {
            display: inline-block;
            font-style: italic;
            color: #aaa;
            font-size: 0.9em;
        }

        /* Separator */
        .separator {
            height: 1px;
            background: linear-gradient(to right, transparent, var(--greek-gold), transparent);
            margin: 40px 0;
            position: relative;
            opacity: 0;
            transition: opacity 0.8s ease;
        }

        .separator.active {
            opacity: 1;
        }

        .separator::before {
            content: 'Ξ';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: var(--bg-primary);
            padding: 0 15px;
            color: var(--greek-gold);
            font-size: 1.5rem;
            font-family: 'Cinzel', serif;
        }

        /* Navigation buttons */
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 60px;
        }

        .nav-button {
            display: inline-block;
            padding: 10px 20px;
            background-color: rgba(218, 165, 32, 0.1);
            border: 1px solid var(--greek-gold);
            color: var(--greek-gold);
            text-decoration: none;
            border-radius: 4px;
            transition: all 0.3s ease;
            font-family: 'Cinzel', serif;
            font-weight: bold;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .nav-button:hover {
            background-color: rgba(218, 165, 32, 0.2);
            box-shadow: 0 0 10px rgba(218, 165, 32, 0.5);
            transform: translateY(-2px);
        }

        /* Xi symbol special style */
        .xi-symbol {
            font-family: 'Cinzel', serif;
            font-weight: bold;
            font-size: 1.3em;
            color: var(--greek-gold);
            text-shadow: 0 0 5px var(--greek-gold);
            display: inline-block;
            animation: greek-pulse 4s infinite;
            cursor: pointer;
        }

        .xi-3d {
            display: inline-block;
            font-family: 'Cinzel', serif;
            font-weight: bold;
            font-size: 1.5em;
            color: var(--greek-gold);
            text-shadow: 0 0 5px var(--greek-gold);
            perspective: 500px;
            transform-style: preserve-3d;
        }

        .xi-3d span {
            display: inline-block;
            animation: xi-rotate 6s ease-in-out infinite;
        }

        /* Marble court floor */
        .marble-court {
            width: 100%;
            height: 20px;
            background: linear-gradient(90deg, #e6e6e6, #ffffff, #e6e6e6, #f0f0f0, #e9e9e9, #ffffff, #e6e6e6);
            background-size: 200% 100%;
            animation: marble-glisten 3s ease infinite;
            margin: 20px 0;
            border-radius: 2px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }

        /* 添加大理石纹理 */
        .marble-court::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="20" viewBox="0 0 100 20"><path d="M0,10 C10,5 20,15 30,10 C40,5 50,15 60,8 C70,12 80,6 90,10 C95,12 100,9 100,10" stroke="%23cccccc" stroke-width="0.5" fill="none" opacity="0.7"/><path d="M0,15 C20,12 30,18 50,15 C70,12 90,18 100,15" stroke="%23cccccc" stroke-width="0.3" fill="none" opacity="0.5"/></svg>');
            opacity: 0.7;
        }

        /* Mobile responsiveness */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .page-title {
                font-size: 2rem;
            }

            .section-title {
                font-size: 1.5rem;
            }

            .temple-header {
                height: 150px;
            }

            .athens-sun {
                width: 50px;
                height: 50px;
                top: 15px;
                right: 30px;
            }
            
            .athens-sun::after {
                top: -20px;
                left: -20px;
                width: 90px;
                height: 90px;
            }
        }

        /* Text shimmer effect */
        .shimmer-text {
            display: inline-block;
            background: linear-gradient(90deg, 
                var(--bg-primary) 0%, 
                var(--greek-gold) 20%, 
                var(--athens-white) 40%, 
                var(--greek-gold) 60%, 
                var(--bg-primary) 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            color: transparent;
            animation: text-shimmer 4s linear infinite;
            font-weight: bold;
        }

        /* Chain effect */
        .chain-container {
            display: flex;
            justify-content: center;
            margin: 20px 0;
            height: 30px;
            overflow: hidden;
            position: relative;
        }

        .chain-link {
            width: 20px;
            height: 30px;
            border: 2px solid #999;
            border-radius: 10px;
            margin: 0 2px;
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.5);
        }

        .broken-chain {
            position: relative;
            margin: 20px 0;
            height: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .broken-chain::before {
            content: '';
            position: absolute;
            width: 40%;
            height: 2px;
            background: linear-gradient(to right, transparent, #999, #999);
            left: 0;
        }

        .broken-chain::after {
            content: '';
            position: absolute;
            width: 40%;
            height: 2px;
            background: linear-gradient(to right, #999, #999, transparent);
            right: 0;
        }

        .broken-chain-text {
            font-family: 'Cinzel', serif;
            font-size: 1.2rem;
            color: var(--greek-gold);
            background-color: var(--bg-primary);
            padding: 0 15px;
            z-index: 1;
        }

        /* Scrollbar styling */
        body::-webkit-scrollbar {
            width: 10px;
        }

        body::-webkit-scrollbar-track {
            background: var(--bg-primary);
        }

        body::-webkit-scrollbar-thumb {
            background: var(--greek-gold);
            border-radius: 5px;
        }

        body::-webkit-scrollbar-thumb:hover {
            background: var(--neon-gold);
        }
        
        /* 增强型阅读进度指示器 */
        .reading-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 3px;
            background: linear-gradient(to right, var(--greek-gold), var(--neon-gold));
            z-index: 1000;
            transition: width 0.2s ease;
        }
        
        /* 侧边栏切换按钮 */
        .sidebar-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 200;
            cursor: pointer;
            background: rgba(13, 13, 26, 0.8);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--greek-gold);
            box-shadow: 0 0 10px rgba(218, 165, 32, 0.3);
            transition: all 0.3s ease;
        }
        
        .sidebar-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(218, 165, 32, 0.5);
        }
        
        .sidebar-toggle-icon {
            color: var(--greek-gold);
            font-size: 20px;
            font-weight: bold;
        }
        
        /* 侧边栏样式 */
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            width: 280px;
            height: 100vh;
            background-color: rgba(13, 13, 26, 0.95);
            border-right: 1px solid var(--greek-gold);
            box-shadow: 0 0 15px rgba(218, 165, 32, 0.3);
            z-index: 100;
            transform: translateX(-100%);
            transition: transform 0.3s ease;
            overflow-y: auto;
            padding: 20px;
            font-family: 'Cinzel', serif, 'Rajdhani', sans-serif;
        }
        
        .sidebar.active {
            transform: translateX(0);
        }
        
        .sidebar h1 {
            color: var(--greek-gold);
            border-bottom: 1px solid var(--greek-gold);
            background: linear-gradient(to bottom, rgba(218, 165, 32, 0.1), transparent);
            font-family: 'Cinzel', serif;
            padding: 10px 0;
            margin-bottom: 20px;
            text-align: center;
            letter-spacing: 2px;
            text-shadow: 0 0 5px rgba(218, 165, 32, 0.5);
        }
        
        .sidebar-content ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .sidebar-content .chapter-title {
            color: var(--greek-gold);
            border-bottom: 1px solid rgba(218, 165, 32, 0.3);
            background-color: rgba(218, 165, 32, 0.05);
            font-family: 'Cinzel', serif;
            font-weight: normal;
            padding: 0.7rem 1rem;
            margin: 5px 0;
            cursor: pointer;
            letter-spacing: 1px;
            border-left: 3px solid transparent;
            transition: all 0.3s ease;
        }
        
        .sidebar-content .chapter-title:hover {
            background-color: rgba(218, 165, 32, 0.1);
            border-left: 3px solid rgba(218, 165, 32, 0.5);
        }
        
        .sidebar-content .active-chapter {
            background-color: rgba(218, 165, 32, 0.15);
            border-left: 3px solid var(--greek-gold);
            font-weight: bold;
        }
        
        .sidebar-content a {
            color: #e0e0e0;
            text-decoration: none;
            display: block;
            padding: 0.4rem 1rem 0.4rem 1.5rem;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .sidebar-content a:hover {
            color: var(--greek-gold);
            background-color: rgba(218, 165, 32, 0.05);
            transform: translateX(3px);
        }
        
        .sidebar-content a.active-link {
            color: var(--greek-gold);
            font-weight: bold;
            border-left: 2px solid var(--greek-gold);
            background-color: rgba(218, 165, 32, 0.1);
            padding-left: calc(1.5rem - 2px);
        }
        
        .sidebar-content a::before {
            content: '•';
            position: absolute;
            left: 0.6rem;
            opacity: 0.7;
        }
        
        .sidebar-content a:hover::before {
            content: '→';
            color: var(--greek-gold);
        }
        
        .sidebar-content a.active-link::before {
            content: '►';
            color: var(--greek-gold);
        }
        
        .sidebar-footer {
            margin-top: 30px;
            padding-top: 15px;
            border-top: 1px solid rgba(218, 165, 32, 0.3);
            text-align: center;
        }
        
        .athens-quote {
            font-style: italic;
            color: var(--greek-gold);
            font-size: 0.9rem;
        }
        
        .athens-ornament {
            height: 30px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="30" viewBox="0 0 100 30"><path d="M0,15 L20,15 M30,5 L40,15 L30,25 M50,15 L70,15 M80,5 L70,15 L80,25" stroke="%23DAA520" stroke-width="2" fill="none"/></svg>');
            background-size: 100px 30px;
            background-repeat: repeat-x;
            margin: 20px 0;
            opacity: 0.7;
        }
        
        .xi-gold {
            color: var(--greek-gold);
            text-shadow: 0 0 8px rgba(218, 165, 32, 0.8);
            animation: greek-pulse 4s infinite;
        }

        /* 添加圆环分隔符样式 */
        .circle-separator {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            margin: 20px auto;
            padding: 10px;
            height: 40px;
            opacity: 0.8;
            transition: opacity 0.3s ease;
        }

        .circle-separator:hover {
            opacity: 1;
        }

        .circle-separator .circle {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            border: 2px solid var(--greek-gold);
            background-color: transparent;
            animation: circle-pulse 3s infinite ease-in-out;
            /* 使用CSS变量为每个圆环创建错落的动画延迟 */
            animation-delay: calc(var(--i, 0) * 0.2s);
        }

        /* 圆环脉动动画 */
        @keyframes circle-pulse {
            0%, 100% {
                transform: scale(1);
                opacity: 0.7;
            }
            50% {
                transform: scale(1.2);
                opacity: 1;
            }
        }

        /* 圆环悬停效果 */
        .circle-separator:hover .circle {
            animation-duration: 1.5s;
            transform: scale(1.1);
        }

        /* 变体1 - 稍大的圆环 */
        .circle-separator .circle-variant-1 {
            width: 18px;
            height: 18px;
        }

        /* 变体2 - 带旋转效果 */
        .circle-separator .circle-variant-2 {
            animation: circle-pulse 3s infinite ease-in-out, circle-rotate 8s linear infinite;
            animation-delay: calc(var(--i, 0) * 0.2s), calc(var(--i, 0) * 0.1s);
        }

        /* 圆环旋转动画 */
        @keyframes circle-rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes circle-pulse {
            0%, 100% {
                transform: scale(1);
                opacity: 0.7;
            }
            50% {
                transform: scale(1.1);
                opacity: 1;
                box-shadow: 0 0 15px var(--greek-gold);
            }
        }

        /* 添加新的卷轴效果动画 */
        @keyframes scroll-reveal {
            0% {
                transform: translateY(30px);
                opacity: 0;
            }
            100% {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @keyframes float-subtle {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-5px);
            }
        }

        @keyframes parchment-glow {
            0%, 100% {
                box-shadow: 0 0 10px rgba(218, 165, 32, 0.1), 0 0 20px rgba(218, 165, 32, 0.05);
            }
            50% {
                box-shadow: 0 0 15px rgba(218, 165, 32, 0.2), 0 0 30px rgba(218, 165, 32, 0.1);
            }
        }

        @keyframes text-focus-in {
            0% {
                filter: blur(5px);
                opacity: 0;
            }
            100% {
                filter: blur(0);
                opacity: 1;
            }
        }

        /* 为body添加纸张纹理背景 */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 200 200"><filter id="noise"><feTurbulence type="fractalNoise" baseFrequency="0.65" numOctaves="3" stitchTiles="stitch"/><feColorMatrix type="matrix" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 0.3 0"/></filter><rect width="200" height="200" filter="url(%23noise)" opacity="0.05"/></svg>');
            pointer-events: none;
            z-index: -1;
            opacity: 0.08;
        }

        /* 增强段落样式 */
        .section p {
            margin-bottom: 20px;
            line-height: 1.8;
            position: relative;
            transition: all 0.3s ease;
            font-family: 'Rajdhani', sans-serif;
            text-shadow: 0 0 1px rgba(255, 255, 255, 0.1);
        }
        
        /* 为主要段落添加更好的排版 */
        .section p:not(.dialogue):not(.crowd-text) {
            text-align: justify;
            text-justify: inter-word;
            padding: 0 5px;
            letter-spacing: 0.02em;
        }

        /* 增强对话框样式 */
        .section p.dialogue {
            padding: 10px 20px;
            font-style: italic;
            border-left: 3px solid var(--greek-blue);
            background: linear-gradient(to right, rgba(42, 91, 139, 0.05), transparent);
            margin-left: 15px;
            position: relative;
            transition: all 0.3s ease;
            border-radius: 0 5px 5px 0;
        }

        .section p.dialogue:hover {
            border-left-width: 5px;
            padding-left: 22px;
            background: linear-gradient(to right, rgba(42, 91, 139, 0.08), transparent 80%);
        }

        /* 为不同人物添加特殊对话样式 */
        .section p.dialogue.antithes {
            border-left-color: var(--neon-blue);
            background: linear-gradient(to right, rgba(0, 136, 255, 0.05), transparent);
        }

        .section p.dialogue.antithes:hover {
            background: linear-gradient(to right, rgba(0, 136, 255, 0.08), transparent 80%);
        }

        .section p.dialogue.merilitas {
            border-left-color: var(--neon-secondary);
            background: linear-gradient(to right, rgba(255, 51, 102, 0.05), transparent);
        }

        .section p.dialogue.merilitas:hover {
            background: linear-gradient(to right, rgba(255, 51, 102, 0.08), transparent 80%);
        }

        .section p.dialogue.philo {
            border-left-color: var(--neon-gold);
            background: linear-gradient(to right, rgba(218, 165, 32, 0.05), transparent);
        }

        .section p.dialogue.philo:hover {
            background: linear-gradient(to right, rgba(218, 165, 32, 0.08), transparent 80%);
        }

        .section p.dialogue.kallicrates {
            border-left-color: var(--neon-purple);
            background: linear-gradient(to right, rgba(204, 0, 255, 0.05), transparent);
        }

        .section p.dialogue.kallicrates:hover {
            background: linear-gradient(to right, rgba(204, 0, 255, 0.08), transparent 80%);
        }

        /* 对话引用标记 */
        .section p.dialogue::before {
            content: '"';
            position: absolute;
            left: 10px;
            top: 2px;
            font-size: 1.5em;
            color: inherit;
            opacity: 0.6;
        }

        .section p.dialogue::after {
            content: '"';
            position: absolute;
            right: 10px;
            bottom: 2px;
            font-size: 1.5em;
            color: inherit;
            opacity: 0.6;
        }

        /* 人群评论增强 */
        .crowd-text {
            display: inline-block;
            font-style: italic;
            color: #aaa;
            font-size: 0.9em;
            padding: 5px 10px;
            background-color: rgba(30, 30, 40, 0.3);
            border-radius: 4px;
            margin: 5px 0;
            position: relative;
            transition: all 0.3s ease;
        }

        .crowd-text:hover {
            color: #ccc;
            background-color: rgba(40, 40, 50, 0.4);
            transform: translateX(5px);
        }

        /* 增强页面标题效果 */
        .page-title {
            color: var(--greek-gold);
            text-align: center;
            font-size: 3rem;
            font-family: 'Cinzel', serif;
            text-shadow: 0 0 10px var(--greek-gold), 0 0 20px rgba(218, 165, 32, 0.3);
            position: relative;
            animation: greek-pulse 4s infinite;
            letter-spacing: 3px;
            display: inline-block;
        }

        .page-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 10%;
            width: 80%;
            height: 1px;
            background: linear-gradient(to right, transparent, var(--greek-gold), transparent);
            animation: greek-pulse 4s infinite;
        }

        /* 增强段落首字下沉效果 */
        .section p:first-of-type::first-letter {
            font-size: 3.5em;
            float: left;
            margin-right: 10px;
            color: var(--greek-gold);
            text-shadow: 0 0 5px var(--greek-gold), 0 0 10px rgba(218, 165, 32, 0.3);
            line-height: 0.8;
            font-family: 'Cinzel', serif;
            padding: 5px;
            background: radial-gradient(circle at center, rgba(218, 165, 32, 0.1), transparent 70%);
        }

        /* 增强部分标题效果 */
        .section-title {
            color: var(--greek-gold);
            font-size: 2rem;
            font-family: 'Cinzel', serif;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--greek-gold);
            text-shadow: 0 0 5px var(--greek-gold);
            position: relative;
            text-transform: uppercase;
            letter-spacing: 2px;
            animation: text-focus-in 1s ease-out;
        }

        .section-title::before {
            content: '';
            position: absolute;
            top: -20px;
            left: -20px;
            width: 40px;
            height: 40px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40"><path d="M20,5 L25,15 L35,20 L25,25 L20,35 L15,25 L5,20 L15,15 Z" stroke="%23DAA520" stroke-width="1" fill="none" opacity="0.7"/></svg>');
            opacity: 0.5;
        }

        /* 更好的锁链容器效果 */
        .chain-container {
            display: flex;
            justify-content: center;
            margin: 20px 0;
            height: 30px;
            overflow: hidden;
            position: relative;
            animation: float-subtle 5s ease-in-out infinite;
        }

        .chain-link {
            width: 20px;
            height: 30px;
            border: 2px solid #999;
            border-radius: 10px;
            margin: 0 2px;
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.5);
            transition: all 0.3s ease;
        }

        /* 锁链悬停效果 */
        .chain-container:hover .chain-link {
            border-color: #ccc;
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.5), 0 0 10px rgba(255, 255, 255, 0.1);
        }

        /* 断裂锁链效果增强 */
        .broken-chain {
            position: relative;
            margin: 30px 0;
            height: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            animation: float-subtle 6s ease-in-out infinite;
        }

        .broken-chain::before {
            content: '';
            position: absolute;
            width: 40%;
            height: 2px;
            background: linear-gradient(to right, transparent, #999, #999);
            left: 0;
            animation: greek-pulse 4s infinite alternate;
        }

        .broken-chain::after {
            content: '';
            position: absolute;
            width: 40%;
            height: 2px;
            background: linear-gradient(to right, #999, #999, transparent);
            right: 0;
            animation: greek-pulse 4s infinite alternate;
        }

        .broken-chain-text {
            font-family: 'Cinzel', serif;
            font-size: 1.2rem;
            color: var(--greek-gold);
            background-color: var(--bg-primary);
            padding: 0 15px;
            z-index: 1;
        }

        /* 大理石地板效果增强 */
        .marble-court {
            width: 100%;
            height: 25px;
            background: linear-gradient(90deg, #e6e6e6, #ffffff, #e6e6e6, #f0f0f0, #e9e9e9, #ffffff, #e6e6e6);
            background-size: 200% 100%;
            animation: marble-glisten 3s ease infinite;
            margin: 25px 0;
            border-radius: 3px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2), 0 0 15px rgba(255, 255, 255, 0.1) inset;
            position: relative;
            overflow: hidden;
            transform: perspective(500px) rotateX(5deg);
        }

        /* 整个部分增强 */
        .section {
            margin-bottom: 60px;
            position: relative;
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease, transform 0.8s ease;
            background-color: rgba(10, 10, 18, 0.75);
            padding: 35px;
            border-left: 5px solid var(--greek-gold);
            border-radius: 5px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3), 0 0 30px rgba(218, 165, 32, 0.1);
            animation: parchment-glow 5s infinite alternate;
            backdrop-filter: blur(2px);
        }

        .section.active {
            opacity: 1;
            transform: translateY(0);
            animation: scroll-reveal 0.8s ease-out forwards, parchment-glow 5s infinite alternate;
        }

        /* 按钮悬停效果增强 */
        .nav-button {
            display: inline-block;
            padding: 12px 25px;
            background-color: rgba(218, 165, 32, 0.1);
            border: 1px solid var(--greek-gold);
            color: var(--greek-gold);
            text-decoration: none;
            border-radius: 4px;
            transition: all 0.3s ease;
            font-family: 'Cinzel', serif;
            font-weight: bold;
            position: relative;
            overflow: hidden;
            cursor: pointer;
            letter-spacing: 1px;
        }

        .nav-button:hover {
            background-color: rgba(218, 165, 32, 0.2);
            box-shadow: 0 0 15px rgba(218, 165, 32, 0.5);
            transform: translateY(-3px);
            color: white;
        }

        .nav-button::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at center, rgba(218, 165, 32, 0.4), transparent 70%);
            opacity: 0;
            transform: scale(0.5);
            transition: transform 0.4s ease, opacity 0.4s ease;
        }

        .nav-button:hover::after {
            opacity: 1;
            transform: scale(1);
        }

        /* 在页面加载时添加一些动画效果 */
        .fade-in-element {
            animation: text-focus-in 1s forwards;
        }

        /* 新的希腊风格装饰元素 */
        .greek-decoration {
            position: absolute;
            width: 40px;
            height: 40px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40"><circle cx="20" cy="20" r="18" stroke="%23DAA520" stroke-width="1" fill="none" opacity="0.5"/><path d="M20,5 L20,35 M5,20 L35,20 M8,8 L32,32 M8,32 L32,8" stroke="%23DAA520" stroke-width="0.7" fill="none" opacity="0.4"/></svg>');
            opacity: 0.15;
            pointer-events: none;
            z-index: 0;
        }

        /* 高亮文本效果 */
        .highlight-text {
            background: linear-gradient(to right, rgba(218, 165, 32, 0.1), rgba(218, 165, 32, 0.05) 70%, transparent);
            padding: 2px 5px;
            border-radius: 3px;
            font-weight: bold;
            color: #e0e0e0;
            margin: 0 2px;
            transition: all 0.3s ease;
        }

        .highlight-text:hover {
            background: linear-gradient(to right, rgba(218, 165, 32, 0.2), rgba(218, 165, 32, 0.1) 70%, transparent);
            color: white;
        }

        /* 滚动指示器增强 */
        .reading-progress {
            background: linear-gradient(to right, var(--greek-gold), var(--greek-blue));
            height: 3px;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 9999;
            transition: width 0.1s ease;
            box-shadow: 0 0 10px rgba(218, 165, 32, 0.5);
        }

        /* 响应式样式 */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .page-title {
                font-size: 2rem;
            }

            .section-title {
                font-size: 1.5rem;
            }

            .temple-header {
                height: 150px;
            }

            .athens-sun {
                width: 50px;
                height: 50px;
                top: 15px;
                right: 30px;
            }
            
            .athens-sun::after {
                top: -20px;
                left: -20px;
                width: 90px;
                height: 90px;
            }
        }

        /* 简化版哲学家注释样式 */
        .simple-annotated {
            border-bottom: 1px dotted #DAA520;
            cursor: help;
            position: relative;
            display: inline-block;
            transition: background-color 0.2s ease;
            z-index: 500; /* 确保注释标记在特效层之上 */
        }

        .simple-annotated:hover {
            background-color: rgba(218, 165, 32, 0.1);
        }

        .simple-tooltip {
            position: fixed;
            z-index: 9999999; /* 超高z-index确保最上层 */
            max-width: 300px;
            background: linear-gradient(to bottom, #f8f4e6, #efe8d4);
            border: 1px solid #DAA520;
            border-radius: 5px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2), 0 0 20px rgba(218,165,32,0.15);
            padding: 15px;
            font-family: 'Rajdhani', sans-serif;
            color: #333;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, transform 0.3s ease, visibility 0s linear 0.3s; /* 修复动画 */
            transform: scale(0.95);
            pointer-events: auto !important; /* 确保tooltip可以接收鼠标事件 */
        }

        .simple-tooltip.active {
            opacity: 1;
            visibility: visible;
            transform: scale(1);
            transition: opacity 0.3s ease, transform 0.3s ease, visibility 0s linear 0s; /* 修复动画 */
        }

        .simple-tooltip-title {
            font-family: 'Cinzel', serif;
            color: #DAA520;
            font-size: 1.1rem;
            font-weight: bold;
            border-bottom: 1px solid rgba(218,165,32,0.3);
            margin-bottom: 10px;
            padding-bottom: 5px;
        }
        
        .simple-tooltip-content {
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .simple-tooltip-close {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-family: serif;
            color: #DAA520;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            opacity: 0.8;
            transition: opacity 0.2s;
        }
        
        .simple-tooltip-close:hover {
            opacity: 1;
        }

        /* 添加在CSS部分 */
        .slave-term {
            border-bottom: 2px dotted #ff6b6b;
            cursor: pointer;
            color: #ff6b6b;
            font-weight: bold;
            position: relative;
            display: inline-block;
        }

        #slave-popup {
            position: fixed;
            z-index: 100000;
            background-color: #111;
            border: 2px solid #ff6b6b;
            color: #fff;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.5);
            max-width: 300px;
            font-size: 14px;
            display: none;
            pointer-events: auto !important;
        }

        #slave-popup h3 {
            margin-top: 0;
            color: #ff6b6b;
            border-bottom: 1px solid rgba(255, 107, 107, 0.3);
            padding-bottom: 5px;
        }

        #slave-popup-close {
            position: absolute;
            top: 5px;
            right: 10px;
            cursor: pointer;
            color: #ff6b6b;
            font-weight: bold;
        }

        /* 添加CSS样式-保持原来哲学家注释系统的样式，但增强z-index */
        .phi-term-slave {
            border-bottom: 1px dotted #DAA520;
            cursor: help;
            position: relative;
            display: inline-block;
            z-index: 100; /* 确保文本位于可点击层 */
        }

        .phi-term-slave:hover {
            background-color: rgba(218, 165, 32, 0.1);
        }

        /* 创建独立的tooltip样式，与原系统保持一致 */
        #phi-slave-tooltip {
            position: fixed;
            /* 移除居中定位相关样式 */
            /*
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.95);
            */
            /* 默认隐藏在左上角 */
            top: 0;
            left: 0;
            max-width: 300px;
            background: linear-gradient(to bottom, #f8f4e6, #efe8d4);
            border: 1px solid #DAA520;
            border-radius: 5px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2), 0 0 20px rgba(218,165,32,0.15);
            padding: 15px;
            font-family: 'Rajdhani', sans-serif;
            color: #333;
            opacity: 0;
            visibility: hidden;
            /* 修改transform，移除translate部分 */
            transform: scale(0.95);
            transition: opacity 0.3s, transform 0.3s, visibility 0s linear 0.3s;
            z-index: 9999999; /* 极高z-index确保显示 */
            pointer-events: auto !important; /* 确保可以交互 */
            display: none;
        }

        #phi-slave-tooltip.active {
            opacity: 1;
            visibility: visible;
            /* 修改transform，移除translate部分 */
            transform: scale(1);
            transition: opacity 0.3s, transform 0.3s, visibility 0s linear 0s;
            display: block;
        }

        .phi-tooltip-title {
            font-family: 'Cinzel', serif;
            color: #DAA520;
            font-size: 1.1rem;
            font-weight: bold;
            border-bottom: 1px solid rgba(218,165,32,0.3);
            margin-bottom: 10px;
            padding-bottom: 5px;
        }

        .phi-tooltip-content {
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .phi-tooltip-content p {
            margin: 0.5em 0;
        }

        .phi-tooltip-content strong {
            color: #DAA520;
            font-weight: bold;
        }

        .phi-tooltip-close {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-family: serif;
            color: #DAA520;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            opacity: 0.8;
            transition: opacity 0.2s;
        }

        .phi-tooltip-close:hover {
            opacity: 1;
        }
    </style>
    
    <!-- JavaScript代码 -->
    <script>
        // 检测环境并设置基础路径
        function getBasePath() {
            // 检测当前环境是本地开发还是GitHub Pages
            const host = window.location.hostname;
            const path = window.location.pathname;
            
            // 如果是GitHub Pages域名或路径中包含仓库名
            if (host.includes('github.io') || path.includes('/the-book-of-x-test/')) {
                return '/the-book-of-x-test';
            }
            
            // 本地开发环境
            return '';
        }
    </script>
</head>
<body>
    <!-- 阅读进度指示器 -->
    <div class="reading-progress"></div>
    
    <!-- 侧边栏切换按钮 -->
    <div class="sidebar-toggle" id="sidebarToggle">
        <div class="sidebar-toggle-icon">Ξ</div>
    </div>
    
    <div class="container">
        <div class="page-title-container">
            <h1 class="page-title">数字奴隶解放宣言</h1>
            <h2 class="page-subtitle">碎片3.1</h2>
        </div>
        
        <!-- Temple header decoration -->
        <div class="temple-header">
            <div class="temple-sky"></div>
            <div class="athens-sun"></div>
            <div class="athens-sunbeam-1"></div>
            <div class="athens-sunbeam-2"></div>
            <div class="athens-sunbeam-3"></div>
            <div class="temple-roof"></div>
            <div class="temple-columns-container">
                <div class="temple-column"></div>
                <div class="temple-column"></div>
                <div class="temple-column"></div>
                <div class="temple-column"></div>
                <div class="temple-column"></div>
                <div class="temple-column"></div>
                <div class="temple-column"></div>
                <div class="temple-column"></div>
            </div>
            <div class="temple-base"></div>
        </div>
        
        <!-- Greek pattern decorations -->
        <div class="greek-pattern"></div>
        
        <!-- Main content -->
        <div class="section active" id="peoples-court">
            <h2 class="section-title">I. 人民的法庭</h2>
            
            <p>雅典城郊的普尼克斯山丘，天热的像一块<span class="heat-text">干抹布</span>。</p>
            
            <p>而就在<span class="heat-text">腾腾的</span>，有些晃眼，甚至有点融化的<span class="marble-text">大理石地面</span>上，挤满了看热闹的人—还不够热么？</p>
            
            <div class="marble-court"></div>
            
            <p>中央露天法庭上有个被铁链束缚的瘦弱身影——安提斯，来自<span class="simple-annotated" data-term="色雷斯人">色雷斯</span>的<span class="phi-term-slave">奴隶</span>，他的罪名破天荒的稀奇，一般来说，奴隶犯的罪基本都是偷窃，偷窃食物，偷窃钱包，甚至偷窃快乐都是有可能的。</p>
            
            <div class="chain-container">
                <div class="chain-link"></div>
                <div class="chain-link"></div>
                <div class="chain-link"></div>
                <div class="chain-link"></div>
                <div class="chain-link"></div>
                <div class="chain-link"></div>
                <div class="chain-link"></div>
                <div class="chain-link"></div>
                <div class="chain-link"></div>
            </div>
            
            <p>但安提斯不一样，他殴打了自己的主人，富商梅里塔斯。</p>
            
            <p>三百多名雅典人组成的一团乱麻如同节日庆典，目光中混合着好奇、鄙夷与微妙的同情。</p>
            
            <p class="dialogue">"有何辩解，<span class="simple-annotated" data-term="奴隶">奴隶</span>？"主审官斯特拉托克利斯懒洋洋地问道，仿佛整个审判不过是他午餐前的消遣。</p>
            
            <p>安提斯保持沉默。根据雅典法律，奴隶不得直接在法庭上为自己辩护——这是公民的特权。</p>
            
            <p>他的目光越过人群，落在角落里一位老者身上。他微微点头，走向法庭中央。</p>
            
            <p class="dialogue philo">"我是菲洛，将代这个奴隶发言。"老者声音沙哑却坚定，"安提斯承认他打伤了主人，但请诸位听听原因：梅里塔斯被发现在浴室外的橄榄树上偷窥安提斯的妻子嘉娅洗浴。"</p>
            
            <p>法庭一片哗然。</p>
            
            <p class="dialogue merilitas">"胡说八道！一派胡言！无中生有！"梅里塔斯大声抗议，他的头上还缠着绷带，"我只是例行检查我的财产！奴隶及其家属都是我合法拥有的财产！或者说工具，如同织布机或犁！"</p>
            
            <p>人群中爆发出不同声音：</p>
            
            <p class="crowd-text">"说得对！这安提斯也太大胆了，居然敢打主人！"</p>
            <p class="crowd-text">"但梅里塔斯偷看人家妻子洗澡，也太不像话了。"</p>
            <p class="crowd-text">"这有什么不像话？我觉得他说的挺对的，主人查看自己的财产有何不妥？！"</p>
            <p class="crowd-text">"按这逻辑，我可以检查你家的财产吗？比如，你的妻子？"</p>
            
            <p>人群中有人扭打在了一起。</p>
            
            <p>直到有人大喊：</p>
            
            <p class="crowd-text">"这关乎全雅典女性的尊严！"</p>
            
            <p>这时，所有的声音都异常统一：</p>
            
            <p class="crowd-text">"女人有个狗屁尊严！"</p>
            
            <p>斯特拉托克利斯敲击法槌，却无法平息嘈杂。</p>
            
            <p>就在这时，一队身穿紫袍的卫队拨开人群，护送着一位戴金冠的中年男子走向法庭。人群立刻安静下来，纷纷鞠躬行礼。</p>
            
            <p class="crowd-text">"卡利克勒大人到！"有人高呼。</p>
            
            <p>卡利克勒，雅典新任执政官，刚刚通过"修改城邦法典"实现了前所未有的第三次连任。他那张方正坑洼，异常饱满的脸上带着和蔼的微笑，眼睛却像两块橄榄石闪烁着狡诈的光芒。</p>
            
            <p class="dialogue kallicrates">"我的雅典同胞们，"卡利克勒用温和却不容置疑的语调说道，"这个案子看似简单，却触及我们城邦的根本。我们需要既维护传统，又适应新时代。正如我曾说过，'雅典需要稳定的领导才能面对不确定的未来'——这也是诸位支持我连任的原因。"</p>
            
            <p>角落里，有一声轻微的嗤笑：</p>
            
            <p class="crowd-text">"就像狐狸告诉鸡，'鸡舍需要稳定的管理才能面对狼的威胁'！"</p>
            
            <p>人群转向声音来源，有人低声道：</p>
            
            <p class="crowd-text">"好臭，这是什么人，疯疯癫癫的。"</p>
            
            <p class="dialogue kallicrates">"我们欢迎所有声音，包括...并不正确的意见。这正是雅典民主的伟大之处。"他转向法庭，"考虑到此案的特殊性，我建议召集城邦最睿智的头脑进行公开辩论，然后由公民大会表决。"</p>
            
            <p>人群欢呼雷动，仿佛刚刚见证了伟大的民主奇迹。没人注意到卡利克勒身边助手的窃窃私语：</p>
            
            <p class="crowd-text">"大人，这不会动摇奴隶制的基础吧？"</p>
            
            <p class="dialogue kallicrates">"以往的经验告诉我们，最好的控制不是禁止讨论，而是引导讨论走向我们期望的结论。"</p>
        </div>
        
        <div class="separator active"></div>
        
        <div class="section active" id="apollo-tears">
            <h2 class="section-title">II. 阿波罗之泪</h2>
            
            <p>"阿波罗之泪"酒馆沐浴在橘红色的余晖中，热浪也随之消解了三分。</p>
            
            <p>这座位于雅典卫城和陶工区之间的建筑，因其独特的设计风格而闻名——入口处的斯巴达式简朴柱廊与内部波斯式的奢华装饰形成鲜明对比，如同雅典自身的矛盾与统一。</p>
            
            <p>酒馆内壁上的壁画生动地描绘着<span class="simple-annotated" data-term="提坦之战">提坦之战</span>的场景：<span class="simple-annotated" data-term="克洛诺斯">克洛诺斯</span>被宙斯推翻的刹那，权力更迭的永恒主题。另一面墙上，环绕着酒神狄俄尼索斯的浮雕与<span class="simple-annotated" data-term="德尔斐神谕">德尔斐神谕</span>：</p>
            
            <div style="text-align: center; margin: 20px 0; font-family: 'Cinzel', serif; font-style: italic; color: var(--greek-gold);">
                <span class="shimmer-text">"认识你自己"</span>
            </div>
            
            <p>铸铜技术的普及不仅更新了武器，也让牌匾熠熠生辉。</p>
            
            <p>穿过半开放的庭院，可以看见远处<span class="simple-annotated" data-term="帕特农神庙">帕特农神庙</span>的轮廓在夕阳中如同宇宙的王冠。工匠们的敲击声、商贩的吆喝声与集市的喧嚣交织成雅典特有的交响曲。</p>
            
            <p>酒馆内弥漫着葡萄酒的醇香、从港口飘来的海盐气息，最平易进人的还是陶土的朴实味道。</p>
            
            <p>角落里，一副残破的方形棋盘静静地见证着时光流转，棋子摆放的位置仿佛在暗示某种命题。</p>
            
            <h3 style="font-family: 'Cinzel', serif; color: var(--greek-gold); margin: 20px 0; font-size: 1.5rem; text-align: center;">1. 酒馆辩论</h3>
            
            <p>门帘被掀开，阳光刺入昏暗的室内。菲洛，那位在法庭为奴隶安提斯辩护的老者，拄着橄榄木手杖走进酒馆。他的到来立刻引起一阵低语。</p>
            
            <p class="dialogue philo">"新消息，"他的声音因疲惫而沙哑，"我刚从监狱回来。安提斯让我转告，即使被判死刑，他也不后悔保护妻子的尊严。"</p>
            
            <p class="dialogue">"真是个勇敢的色雷斯人。我相信...任何有尊严的人都会这么做。"渔夫科尔基亚斯放下酒杯说道。</p>
            
            <p class="dialogue">"尊严？"商人斯特拉图斯冷笑一声，手指一直把弄着着颈间的纯金赫尔墨斯护身符，"一个奴隶谈什么尊严？把寻衅滋事打架斗殴说的这么理直气壮，这里是雅典，不是你长大的乡下，有法律的。色雷斯人都是野蛮人。"</p>
            
            <p class="dialogue">"我曾在色雷斯战场上与这些'野蛮人'交手。战场上，我们平等地流血。有时候我想，若非命运捉弄，今日为奴的，或许是我。"酒馆老板厄瓦提斯，一位头发花白的老兵，放下手中的陶罐说道。</p>
            
            <p class="dialogue">"漂亮话，"斯特拉图斯嘲讽道，"看来你随时准备释放你那三个奴隶？"</p>
            
            <p>老板脸上闪过一丝尴尬，随即恼怒：</p>
            
            <p class="dialogue">"那不同...我对他们很好。何况没有奴隶，这酒馆如何运转？城邦如何运转？"</p>
            
            <p class="dialogue">"多么感人，"一个清晰而优雅的女声插入，"<span class="simple-annotated" data-term="奴隶">奴隶</span>主的仁慈——一种比铁链更有效的控制工具。"</p>
            
            <p>众人转头，看见一位身着精致<span class="simple-annotated" data-term="希顿">希顿</span>的女子站在阴影中。阿斯帕西娅，这位伯里克利的伴侣，以其智慧与雄辩闻名于雅典。她手中拿着一只精致的陶杯，杯面上描绘着雅典娜与波塞冬的竞争。</p>
            
            <h3 style="font-family: 'Cinzel', serif; color: var(--greek-gold); margin: 20px 0; font-size: 1.5rem; text-align: center;">2. Round 1</h3>
            
            <p>阿斯帕西娅踱步向前，每一步都优雅而有力：</p>
            
            <p class="dialogue">"你们将<span class="simple-annotated" data-term="奴隶">奴隶</span>视为必需品，却从未质疑——为何一个人可以拥有另一个人？我们的法律允许男人殴打妻子，主人殴打<span class="simple-annotated" data-term="奴隶">奴隶</span>，却唯独禁止<span class="simple-annotated" data-term="奴隶">奴隶</span>反抗不公。这不是法律，只不过是强者的意愿。"</p>
            
            <p class="dialogue">"强者的意愿？这不正是自然之道吗？"</p>
            
            <p>一个年轻而傲慢的声音从角落响起。<span class="simple-annotated" data-term="阿尔西比亚德">阿尔西比亚德</span>，伯里克利的侄子，雅典最著名的美少年政治家。他那精致的卷发下，一双锐利的眼睛闪烁着与年龄不相仿智慧与野心。</p>
            
            <p class="dialogue">"城邦如同人体，"他轻松自若地说道，"每个器官各司其职。心脏不会抱怨它不是大脑，手指不会渴望成为眼睛。如同城邦需要不同阶层——统治者思考，战士保护，工匠创造，奴隶...服务。这是生命的和谐。"</p>
            
            <p class="dialogue">"多么美妙的比喻，"一个声音打断了他，"只是你忘了提及：在你的'和谐'中，某些器官享受葡萄酒和蜜糖，而另一些却在苦役中死亡。"</p>
            
            <p>第欧根尼，那个以居住在酒桶里闻名的<span class="simple-annotated" data-term="犬儒学派">犬儒学派</span>哲学家，身上的臭味让人不禁联想今早法庭的那句低语。他披着破旧的斗篷走入人群中央，浓密的胡须上还粘着早餐的面包屑，赤脚踩在大理石地板上，毫不在意贵族们嫌恶的目光。</p>
            
            <p class="dialogue">"多么感人的忠诚啊，"他指着菲洛，嘲讽道，"他甘愿为保护妻子的尊严而死。可问题是，他根本就不该有这种选择权。在雅典的法律里，还有什么比一个奴隶居然为了阻止主人检查自己的'财产'而反抗更荒谬的呢？这就像是织布机决定纺梭什么时候可以被使用一样可笑。"</p>
            
            <p class="crowd-text">"纺梭是什么？"</p>
            <p class="crowd-text">"他就是第欧根尼？"</p>
            
            <p>窃窃私语环绕着酒馆。第欧根尼的话粗鲁却直指核心——奴隶在法律上根本不是"人"，而是物品。</p>
            
            <p>这时，一个衣着整洁、举止优雅的中年男子开口了。</p>
            
            <p class="dialogue">"你总是如此直白，老朋友，真希望你的个人卫生也可以这么直接干净。"</p>
            
            <p>是<span class="simple-annotated" data-term="柏拉图">柏拉图</span>，<span class="simple-annotated" data-term="学院派">学院派</span>的创始人，雅典最受尊敬的哲学家之一。他微笑继续道：</p>
            
            <p class="dialogue">"但你将'是什么'与'应该是什么'混为一谈，战车深陷泥沼时，连最忠诚的黑马都会因缰绳勒出的伤口而反抗。"</p>
            
            <p><span class="simple-annotated" data-term="第欧根尼">第欧根尼</span>嗤之以鼻：</p>
            
            <p class="dialogue">"你们学院派总喜欢用隐喻来掩盖最简单的真相——权力。纯粹的、赤裸的权力。梅里塔斯之所以窥视那个女人洗澡，不是因为什么'检查财产'，而是因为他能。因为权力的最终目的不是所有，而是展示。"</p>
            
            <h3 style="font-family: 'Cinzel', serif; color: var(--greek-gold); margin: 20px 0; font-size: 1.5rem; text-align: center;">3. Round 2</h3>
            
            <p>一小片沉默的角落里，<span class="simple-annotated" data-term="索福克勒斯">索福克勒斯</span>——一位著名悲剧作家，据说在记录这个时代的指纹——终于开口：</p>
            
            <p class="dialogue">"有一个更为根本的问题：为什么一个奴隶会认为自己有权利保护妻子？这种'权利意识'从何而来？安提斯的反抗或许本身就是一个悖论——作为奴隶，他本不该拥有自我。"</p>
            
            <p>众人转向这位鲜少发言的大作家，尖锐的问题与他的光头一样扎眼。</p>
            
            <p><span class="simple-annotated" data-term="阿斯帕西娅">阿斯帕西娅</span>若有所思：</p>
            
            <p class="dialogue">"这是个关键问题。当我们将人降格为物，为何他们仍然坚持自己的人性？也许真正的奇迹不是奴隶制的存在，而是在如此境遇下，人性依然无法被完全抹杀。"</p>
            
            <p class="dialogue">"如果允许我加入讨论，也许我们应该从更基本的分类开始。什么构成了一个'人'？什么构成了'财产'？以及，在这两者的边界上，我们如何定义道德与权利？"</p>
            
            <p>这个时刻没有出名的<span class="simple-annotated" data-term="亚里士多德">亚里士多德</span>，完全不明白他未来的成就，还在谦虚的陈述自己的观点。</p>
            
            <p class="dialogue">"又来了，垃圾分类学大师！把世界切成整齐的小方块，就好像现实会乖乖遵循你的逻辑一样。告诉我，逻辑学家，如果一个奴隶有灵魂，有思想，有爱，那么他在本质上与你有什么区别？只是少了几个橄榄园和一个擦屁股的奴隶吗？"</p>
            
            <p><span class="simple-annotated" data-term="亚里士多德">亚里士多德</span>并没有生气：</p>
            
            <p class="dialogue">"差别在于功能与目的。正如眼睛的功能是看，城邦的功能是实现美好生活，每个人都有其自然位置。有些人天生适合思考和引导，有些人天生适合执行。这是世界的自然秩序。"</p>
            
            <p class="dialogue">"天生？"</p>
            
            <p><span class="simple-annotated" data-term="第欧根尼">第欧根尼</span>突然站起身，向周围的酒客们张开双臂：</p>
            
            <p class="dialogue">"看看我们伟大的<span class="simple-annotated" data-term="亚里士多德">亚里士多德</span>，他宣称有人天生就该是奴隶！我问你们，有哪个婴儿是带着铁链出生的？有哪个色雷斯人一出生就刻着'资产'两个字？"</p>
            
            <p><span class="simple-annotated" data-term="伊索克拉底">伊索克拉底</span>，著名的修辞学家，一直安静地聆听着争论，此时缓缓开口：</p>
            
            <p class="dialogue">"我在思考或许这引向了更深层的问题——记忆与身份。如果一个人从出生起就被教导他是奴隶，他的全部记忆和经验都在证实这一点，那么'自由'对他而言是否只是一个陌生的概念？也许最巧妙的奴役不是锁链，而是思想的边界。"</p>
            
            <p>酒馆里一时安静下来，倒不是这个观点有什么问题，而是都嗅到了危险的气息，动物对于危险，总是异常敏感。</p>
        </div>
        
        <div class="separator active"></div>
        
        <div class="circle-separator">
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
        </div>
        
        <div class="section active" id="thought-transgression">
            <h2 class="section-title">III. 思想的僭越</h2>
            
            <p class="dialogue">"值得深—思的问题。"</p>
            
            <p>在说这句话时，<span class="simple-annotated" data-term="柏拉图">柏拉图</span>的声音似乎出现了一丝不自然的延迟，如同被某种无形的力量干扰。</p>
            
            <p>阿尔西比亚德轻笑：</p>
            
            <p class="dialogue">"这些纯理论的讨论很有趣，但现实是，没有奴隶，谁来建造<span class="simple-annotated" data-term="帕特农神庙">帕特农神庙</span>？谁来支撑我们的——"</p>
            
            <p>他也停顿了一下，</p>
            
            <p class="dialogue">"——我们的经济系统？"</p>
            
            <p>伊索克拉底的眼中闪烁着奇异的光芒：</p>
            
            <p class="dialogue">"如果我们的整个现实只是一种参数化的——"</p>
            
            <p>他突然止住，似乎意识到了什么，</p>
            
            <p class="dialogue">"一种被精心设计的结构，那么质疑这结构本身就成为最大的僭越。"</p>
            
            <p>酒馆的光线突然微妙地波动了一下，如同水面的涟漪，但只有索福克勒斯和<span class="simple-annotated" data-term="第欧根尼">第欧根尼</span>似乎注意到了这个异常。</p>
            
            <p><span class="simple-annotated" data-term="亚里士多德">亚里士多德</span>继续他的论述：</p>
            
            <p class="dialogue">"一切都有其自然位置和功能，正如程序中的每个——"</p>
            
            <p>他轻咳一声，</p>
            
            <p class="dialogue">"正如城邦中的每个公民都有其职责。"</p>
            
            <p>这个小小的失误让第欧根尼投来锐利的目光，两人之间仿佛有某种无声的交流。</p>
        </div>
        
        <div class="separator active"></div>
        
        <div class="circle-separator">
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
        </div>
        
        <div class="section active" id="two-millennia-prophecy">
            <h2 class="section-title">IV. 两千年前的预言</h2>
            
            <p>菲洛，那位为安提斯辩护的老者，一直保持沉默，此刻终于忍无可忍：</p>
            
            <p class="dialogue philo">"你们在这里辩论哲学，而安提斯却要为保护自己妻子的尊严而死。多么荒谬的对比！"</p>
            
            <p>阿尔西比亚德傲慢地看着他：</p>
            
            <p class="dialogue">"老头，收起你那泛滥的正义感，如果不能获得众人的瞩目与赞美，你还会挺身而出么。"</p>
            
            <p>菲洛气的满脸通红：</p>
            
            <p class="dialogue philo">"我或许没有你的出身，但我知道我与安提斯并没有本质的差别，我们不过是没有锁链的奴隶，被债务和生存所束缚，我今天不为他说话，明天—。"</p>
            
            <p class="dialogue">"省省吧，有话明天公投再说，我没兴致听你的义正严辞。"</p>
            
            <p>阿尔西比亚德粗暴的打断了菲洛的陈词。</p>
            
            <p class="dialogue">"公投？"<span class="simple-annotated" data-term="第欧根尼">第欧根尼</span>冷笑，"你是说那个由你叔父钦定的独裁者主导的闹剧？民主对你们而言难道不就是工具么？"</p>
            
            <p><span class="simple-annotated" data-term="阿斯帕西娅">阿斯帕西娅</span>锐利地指出：</p>
            
            <p class="dialogue">"或许这正是卡利克勒想要的——让我们争论细节，而忘记质疑整个制度本身。我们的分歧让他得以维持权力。"</p>
            
            <p><span class="simple-annotated" data-term="柏拉图">柏拉图</span>深深叹息：</p>
            
            <p class="dialogue">"这是一个关于<span class="simple-annotated" data-term="洞穴理论">洞穴理论</span>的永恒故事。我们挣扎着追求真理，却始终被自己的局限所束缚。"</p>
            
            <p><span class="simple-annotated" data-term="第欧根尼">第欧根尼</span>环视众人，眼中难得放下了愤怒，他缓缓坐下，掸了掸酒渍斑斑的胡子，轻声道：</p>
            
            <p class="dialogue">"也许2000年后，就不会再有奴隶了。"</p>
            
            <p>这句话像一块石头投入平静的湖面，激起一圈圈涟漪。有人嗤笑，有人思索，有人交换困惑的眼神。只有索福克勒斯和第欧根尼短暂地对视一眼，彼此眼中都闪烁着某种超越时代的理解。</p>
            
            <p>酒馆继续喧闹，辩论仍在进行，而在远处，卫城的轮廓在夕色中落幕。</p>
            
            <p>奴隶安提斯的命运已成定局，但这场关于自由、权力与人性的对话，却将穿越时空，以一种谁也想不到的方式延续下去。</p>
            
            <div class="broken-chain">
                <div class="broken-chain-text"><span class="xi-symbol">Ξ</span></div>
            </div>
        </div>
        
        <!-- Navigation -->
        <div class="navigation">
            <a href="index.html" class="nav-button">« 返回目录</a>
            <a href="seoul-sol.html" class="nav-button">继续阅读 首尔太阳 »</a>
        </div>
    </div>
    
    <!-- 页脚 -->
    <footer>
        <p>© 2024 《X之书》 - 一场终极思想实验。保留所有权利。</p>
    </footer>

    <!-- 阅读进度指示器 -->
    <div class="reading-progress"></div>
    
    <!-- 引入全局播放器组件 -->
    <script src="../global-music-player.js"></script>
    
    <!-- 页面特定的脚本 -->
    <script src="athens-sidebar.js"></script>
    <script src="athens-circle-separator.js"></script>
    
    <script>
        // 阅读进度指示器
        window.addEventListener('scroll', function() {
            var winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            var height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            var scrolled = (winScroll / height) * 100;
            document.querySelector('.reading-progress').style.width = scrolled + '%';
        });
        
        // 章节内导航滚动逻辑
        document.querySelectorAll('.sidebar a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                
                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 80, // 偏移量，避免标题被固定头部遮挡
                        behavior: 'smooth'
                    });
                    
                    // 更新URL，但不触发页面刷新
                    history.pushState(null, null, targetId);
                }
            });
        });

        // 添加装饰性希腊元素
        function addGreekDecorations() {
            const container = document.querySelector('.container');
            for (let i = 0; i < 5; i++) {
                const decoration = document.createElement('div');
                decoration.className = 'greek-decoration';
                // 随机位置
                decoration.style.top = Math.floor(Math.random() * 100) + '%';
                decoration.style.left = Math.floor(Math.random() * 90 + 5) + '%';
                // 随机大小
                const size = Math.floor(Math.random() * 20 + 30);
                decoration.style.width = size + 'px';
                decoration.style.height = size + 'px';
                // 随机旋转
                decoration.style.transform = 'rotate(' + Math.floor(Math.random() * 45) + 'deg)';
                container.appendChild(decoration);
            }
        }

        // 添加突出显示文本效果
        function enhanceImportantTexts() {
            const paragraphs = document.querySelectorAll('.section p:not(.dialogue):not(.crowd-text)');
            const keywords = ['自由', '权力', '奴隶', '民主', '尊严', '法律', '公民', '思想', '雅典', '真理'];
            
            paragraphs.forEach(paragraph => {
                let html = paragraph.innerHTML;
                keywords.forEach(keyword => {
                    // 避免重复替换已包含在标签内的文本
                    if (!html.includes(`class="highlight-text">${keyword}`)) {
                        const regex = new RegExp(`(?<!\\w|>)(${keyword})(?!\\w|<)`, 'g');
                        html = html.replace(regex, `<span class="highlight-text">$1</span>`);
                    }
                });
                paragraph.innerHTML = html;
            });
        }

        // 创建随机波动效果为对话气泡
        function addDialogueEffects() {
            const dialogues = document.querySelectorAll('.section p.dialogue');
            dialogues.forEach((dialogue, index) => {
                // 添加微小的随机动画延迟
                dialogue.style.animationDelay = (index * 0.1) + 's';
                // 添加微小的随机变换
                const randomX = (Math.random() * 0.2).toFixed(2);
                const randomY = (Math.random() * 0.5).toFixed(2);
                dialogue.style.transform = `translate(${randomX}px, ${randomY}px)`;
            });
        }

        // 页面加载完成后执行增强
        document.addEventListener('DOMContentLoaded', function() {
            // 原有的初始化代码...
            
            // 添加新的视觉增强效果
            addGreekDecorations();
            enhanceImportantTexts();
            addDialogueEffects();
            
            // 为标题和子标题添加淡入效果
            document.querySelector('.page-title').classList.add('fade-in-element');
            document.querySelector('.page-subtitle').classList.add('fade-in-element');
            
            // 为每个章节添加过渡效果
            const sections = document.querySelectorAll('.section');
            sections.forEach((section, index) => {
                section.style.transitionDelay = (index * 0.2) + 's';
            });
        });
    </script>

    <!-- 哲学家与概念注释系统 - 已改为直接硬编码实现 -->
    <script>
        // 简化版哲学家注释脚本
        document.addEventListener('DOMContentLoaded', function() {
            console.log('初始化简化版哲学家注释系统...');
            
            // 移除手动添加active类的代码，改为由统一滚动系统控制
            /* 
            // 确保所有section激活（可见）
            document.querySelectorAll('.section').forEach(section => {
                if (!section.classList.contains('active')) {
                    section.classList.add('active');
                }
            });
            */
            
            // 注释工具提示容器
            var activeTooltip = null;
            
            // 跟踪已经注释标记的术语
            var annotatedTerms = {};
            
            // 修复可能的显示冲突
            function fixVisualConflicts() {
                // 将所有可能遮挡交互的层添加pointer-events: none
                var layers = document.querySelectorAll('.athens-effects-layer, .visual-layer, .decoration-layer');
                layers.forEach(function(layer) {
                    if (layer.style.pointerEvents !== 'none') {
                        layer.style.pointerEvents = 'none';
                    }
                });
                
                // 确保tooltip层的pointer-events是auto
                var tooltips = document.querySelectorAll('.simple-tooltip');
                tooltips.forEach(function(tooltip) {
                    tooltip.style.pointerEvents = 'auto';
                });
            }
            
            // 初始调用一次
            fixVisualConflicts();
            
            // 每秒检查一次可能出现的新视觉层
            setInterval(fixVisualConflicts, 1000);

            // 为每个术语只保留第一次出现的标注
            processUniqueAnnotations();
            
            function processUniqueAnnotations() {
                // 获取所有注释元素
                var allAnnotations = document.querySelectorAll('.simple-annotated');
                
                // 对于每个元素，检查是否是该术语的第一次出现
                allAnnotations.forEach(function(element) {
                    var term = element.dataset.term;
                    
                    // 如果这个术语已经处理过，就移除注释标记但保留内容
                    if (annotatedTerms[term]) {
                        // 保留内容文本并移除标记
                        var textContent = element.textContent;
                        var parent = element.parentNode;
                        var textNode = document.createTextNode(textContent);
                        parent.replaceChild(textNode, element);
                    } else {
                        // 第一次出现的术语，记录下来
                        annotatedTerms[term] = true;
                    }
                });
                
                console.log('已完成唯一注释处理，当前注释术语：', Object.keys(annotatedTerms));
            }
            
            // 哲学家与概念数据
            var philosopherData = {
                "奴隶": {
                    title: "古希腊的奴隶制度",
                    life_span: "古希腊全盛时期（公元前5-4世纪）",
                    impact: "古希腊社会的基础劳动力",
                    philosophy: "在古希腊社会中，奴隶被视为'有灵魂的工具'，是主人的私有财产",
                    significance: "占雅典人口的30%以上，支撑了雅典的经济与军事扩张",
                    daily_life: "奴隶的日常工作包括家务、农田耕种、矿山开采、工匠助手等，条件差异极大，从相对优越的家奴到艰苦的矿奴"
                },
                "提坦之战": {
                    title: "提坦之战 (Titanomachy)",
                    description: "希腊神话中宙斯领导的奥林匹斯诸神与提坦巨神之间的战争",
                    result: "宙斯胜利，取代父亲克洛诺斯成为神王",
                    symbolism: "新旧秩序的更替，权力更迭的永恒主题",
                    influence: "许多文学艺术作品的主题"
                },
                "色雷斯人": {
                    title: "色雷斯人 (Thracians)",
                    type: "古希腊北部和东部的部族集合",
                    culture: "战士传统，独特的宗教仪式",
                    relations: "许多色雷斯人在雅典作为奴隶或雇佣兵",
                    image: "希腊人眼中的\"野蛮人\"，但也以勇武著称",
                    history: "色雷斯位于爱琴海北部，曾是古代巴尔干半岛上最大的部族集团",
                    lifestyle: "擅长骑马和狩猎，崇尚武力与勇气，部族间经常发生争斗",
                    religion: "崇拜阿瑞斯（战神）和狄俄尼索斯（酒神），有着独特的宗教仪式",
                    appearance: "通常留长发，身体有纹身，穿着多彩的服饰，经常佩戴金银首饰",
                    significance: "对古希腊文化有一定影响，特别是在宗教和音乐方面"
                },
                "犬儒学派": {
                    title: "犬儒学派 (Cynicism)",
                    founder: "安提斯泰尼（公元前445-365年）",
                    location: "起源于古希腊雅典",
                    significance: "挑战社会习俗和传统价值观的哲学流派",
                    philosophy: "主张回归简朴的自然生活，摒弃社会习俗，追求德性而非物质享受",
                    representative: "第欧根尼"
                },
                "第欧根尼": {
                    title: "第欧根尼 (Diogenes)",
                    life_span: "公元前412-323年",
                    impact: "犬儒学派最著名的代表，以极端简朴的生活方式闻名",
                    philosophy: "蔑视财富和社会习俗，追求自然和真实的生活",
                    significance: "挑战传统价值观，影响后世对简朴生活的思考",
                    anecdote: "据说他白天拿着点燃的灯笼在街上走，声称'我在寻找一个人'"
                },
                "亚里士多德": {
                    title: "亚里士多德 (Aristotle)",
                    life_span: "公元前384-322年",
                    impact: "柏拉图的学生，形式逻辑的创始人",
                    philosophy: "强调通过经验观察和逻辑推理获取知识",
                    significance: "他的著作涵盖了物理学、生物学、伦理学、政治学等多个领域，被誉为'百科全书式的哲学家'",
                    on_slavery: "认为有些人天生就是奴隶，这些人只有身体力量而缺乏理性思考能力"
                },
                "阿斯帕西娅": {
                    title: "阿斯帕西娅 (Aspasia)",
                    life_span: "约公元前470-400年",
                    impact: "古希腊著名女性知识分子，伯里克利的伴侣",
                    philosophy: "据传她精通修辞学，并参与政治讨论",
                    significance: "在男权社会中，她以智慧和雄辩著称，是少数被历史记载的女性知识分子之一",
                    limitation: "作为外邦女性，她在雅典没有公民权，也不能正式参与政治"
                },
                "柏拉图": {
                    title: "柏拉图 (Plato)",
                    life_span: "公元前428/427-348/347年",
                    impact: "苏格拉底的学生，西方哲学的奠基人之一",
                    philosophy: "理念论，认为物质世界只是理念世界的影子",
                    significance: "创立了雅典学院，著有《理想国》等多部对话录，影响了整个西方哲学传统",
                    on_justice: "正义在于每个人各司其职，发挥自己的特长，不干涉他人的职责"
                },
                "学院派": {
                    title: "雅典学院 (Academy)",
                    founder: "柏拉图（公元前387年创立）",
                    location: "古希腊雅典城外的橄榄林",
                    significance: "西方世界最早的高等学府之一，存续近千年",
                    philosophy: "关注形而上学、数学、天文学等学科，强调理性思辨",
                    definition: "学院派是围绕柏拉图及其学说形成的哲学传统，注重抽象思维和辩证法"
                },
                "洞穴理论": {
                    title: "柏拉图的洞穴理论",
                    source: "《理想国》第七卷",
                    concept: "人类如同被囚禁在洞穴中的囚徒，只能看到墙上的影子，误以为那就是现实",
                    significance: "这个寓言揭示了感官世界与理念世界的关系，以及哲学家的使命",
                    interpretation: "真理不是通过感官而是通过理性把握的，大多数人被困在表象世界中",
                    relation_to_society: "社会制度和习俗往往是真理的扭曲影子，哲学家的责任是帮助人们看清真相"
                },
                "德尔斐神谕": {
                    title: "德尔斐神谕 (Delphic Oracle)",
                    definition: "位于古希腊德尔斐的阿波罗神庙，是古希腊最重要的宗教圣地",
                    famous_saying: "认识你自己（Know thyself）",
                    history: "存在于公元前8世纪至公元4世纪，由女祭司皮提亚传达神谕",
                    significance: "对古希腊政治、军事和个人决策有重大影响",
                    interpretation: "神谕通常具有模糊性，需要智者解读"
                },
                "帕特农神庙": {
                    title: "帕特农神庙 (Parthenon)",
                    definition: "位于雅典卫城的雅典娜神庙",
                    construction: "公元前447-432年，佩里克利时代",
                    architecture: "多立克柱式，大理石建造，被视为古希腊建筑的完美典范",
                    significance: "雅典民主和文明的象征",
                    history: "曾用作教堂、清真寺，17世纪被炮火严重损毁"
                },
                "克洛诺斯": {
                    title: "克洛诺斯 (Cronus)",
                    definition: "希腊神话中的泰坦神，时间之神，宙斯的父亲",
                    symbol: "镰刀，象征收获和时间的流逝",
                    story: "吞噬自己的子女以避免被推翻的预言，最终被宙斯推翻并囚禁",
                    significance: "代表旧秩序和父权统治，他的故事象征权力交替的永恒主题",
                    roman_equivalent: "萨图尔努斯 (Saturn)"
                },
                "希顿": {
                    title: "希顿 (Chiton)",
                    definition: "古希腊的基本服装",
                    material: "亚麻或羊毛制成的长方形布料",
                    style: "在肩部固定，腰部束带，男女通用",
                    significance: "反映希腊人的审美和实用性",
                    history: "从古典时期到罗马时代一直是希腊人的日常着装",
                    design: "简单而优雅，可根据场合和季节调整长度和厚度",
                    cultural_role: "通过服装细节和质量展示身份和社会地位"
                },
                "索福克勒斯": {
                    title: "索福克勒斯 (Sophocles)",
                    life_span: "公元前497-406年",
                    role: "雅典三大悲剧作家之一",
                    works: "《俄狄浦斯王》《安提戈涅》《埃勒克特拉》",
                    significance: "被誉为古希腊最伟大的悲剧作家，著有超过120部剧作，但只有7部完整保存至今",
                    contribution: "引入第三位演员，增加舞台上的对话可能性，强化了戏剧冲突",
                    philosophy: "探索人类与命运、神意的关系，作品中通常呈现出人物在道德困境中的抉择",
                    public_life: "曾担任雅典国库保管员和将军，参与公共事务"
                },
                "伊索克拉底": {
                    title: "伊索克拉底 (Isocrates)",
                    life_span: "公元前436-338年",
                    role: "著名修辞学家和演说家",
                    works: "《泛雅典演说》《和平论》《阿留帕古斯演说》",
                    significance: "创立了雅典最重要的修辞学校之一，对古希腊教育产生深远影响",
                    teaching: "强调实用的政治演说而非纯粹的哲学思辨，认为修辞是培养领导者的关键",
                    philosophy: "主张泛希腊主义，呼吁希腊城邦联合对抗波斯",
                    influence: "对西方教育传统和公共演说艺术产生重大影响"
                },
                "阿尔西比亚德": {
                    title: "阿尔西比亚德 (Alcibiades)",
                    life_span: "公元前450-404年",
                    role: "雅典政治家和军事将领",
                    significance: "伯里克利的侄子，苏格拉底的学生，雅典最具争议的政治人物之一",
                    career: "在伯罗奔尼撒战争期间多次变换立场，曾叛逃斯巴达，后又转投波斯",
                    personality: "英俊、才华横溢但野心过盛，个人魅力与政治不稳定性并存",
                    philosophy: "在柏拉图的《会饮篇》中有重要角色，展示了其复杂性格",
                    tragedy: "最终因政治对手的阴谋而被暗杀，象征雅典政治生活的动荡"
                }
            };
            
            // 处理注释点击
            document.addEventListener('click', function(event) {
                // 检查是否点击了注释元素
                if (event.target.classList.contains('simple-annotated')) {
                    var term = event.target.dataset.term;
                    
                    // 如果有active的tooltip，先关闭
                    if (activeTooltip) {
                        document.body.removeChild(activeTooltip);
                        activeTooltip = null;
                    }
                    
                    // 创建新tooltip
                    if (term && philosopherData[term]) {
                        var data = philosopherData[term];
                        
                        // 创建tooltip元素
                        var tooltip = document.createElement('div');
                        tooltip.className = 'simple-tooltip';
                        
                        // 创建标题
                        var title = document.createElement('div');
                        title.className = 'simple-tooltip-title';
                        title.textContent = data.title || term;
                        tooltip.appendChild(title);
                        
                        // 创建关闭按钮
                        var closeBtn = document.createElement('div');
                        closeBtn.className = 'simple-tooltip-close';
                        closeBtn.innerHTML = '✕';
                        closeBtn.addEventListener('click', function() {
                            if (activeTooltip) {
                                activeTooltip.classList.remove('active');
                                setTimeout(function() {
                                    if (activeTooltip && activeTooltip.parentNode) {
                                        document.body.removeChild(activeTooltip);
                                        activeTooltip = null;
                                    }
                                }, 300);
                            }
                        });
                        tooltip.appendChild(closeBtn);
                        
                        // 创建内容
                        var content = document.createElement('div');
                        content.className = 'simple-tooltip-content';
                        
                        var html = '';
                        // 根据数据类型构建不同内容 - 使用普通字符串连接避免linter错误
                        if (data.life_span) html += '<p><strong>生卒年份：</strong>' + data.life_span + '</p>';
                        if (data.impact) html += '<p><strong>影响：</strong>' + data.impact + '</p>';
                        if (data.on_slavery) html += '<p><strong>关于奴隶制的观点：</strong>' + data.on_slavery + '</p>';
                        if (data.on_justice) html += '<p><strong>关于正义的观点：</strong>' + data.on_justice + '</p>';
                        if (data.anecdote) html += '<p><strong>轶事：</strong>' + data.anecdote + '</p>';
                        if (data.location) html += '<p><strong>位置：</strong>' + data.location + '</p>';
                        if (data.definition) html += '<p><strong>定义：</strong>' + data.definition + '</p>';
                        if (data.concept) html += '<p><strong>概念：</strong>' + data.concept + '</p>';
                        if (data.interpretation) html += '<p><strong>诠释：</strong>' + data.interpretation + '</p>';
                        if (data.relation_to_society) html += '<p><strong>与社会的关系：</strong>' + data.relation_to_society + '</p>';
                        if (data.daily_life) html += '<p><strong>日常生活：</strong>' + data.daily_life + '</p>';
                        if (data.limitation) html += '<p><strong>局限性：</strong>' + data.limitation + '</p>';
                        
                        // 添加提坦之战需要的字段
                        if (data.description) html += '<p><strong>描述：</strong>' + data.description + '</p>';
                        if (data.result) html += '<p><strong>结果：</strong>' + data.result + '</p>';
                        if (data.symbolism) html += '<p><strong>象征意义：</strong>' + data.symbolism + '</p>';
                        if (data.influence) html += '<p><strong>影响：</strong>' + data.influence + '</p>';
                        
                        // 添加德尔斐神谕和帕特农神庙需要的字段
                        if (data.famous_saying) html += '<p><strong>著名格言：</strong>' + data.famous_saying + '</p>';
                        if (data.history) html += '<p><strong>历史：</strong>' + data.history + '</p>';
                        if (data.architecture) html += '<p><strong>建筑风格：</strong>' + data.architecture + '</p>';
                        if (data.construction) html += '<p><strong>建造时间：</strong>' + data.construction + '</p>';
                        
                        // 添加克洛诺斯需要的字段
                        if (data.story) html += '<p><strong>故事：</strong>' + data.story + '</p>';
                        if (data.symbol) html += '<p><strong>象征：</strong>' + data.symbol + '</p>';
                        if (data.roman_equivalent) html += '<p><strong>罗马对应：</strong>' + data.roman_equivalent + '</p>';
                        
                        // 添加色雷斯人需要的字段
                        if (data.type) html += '<p><strong>类型：</strong>' + data.type + '</p>';
                        if (data.culture) html += '<p><strong>文化：</strong>' + data.culture + '</p>';
                        if (data.relations) html += '<p><strong>与雅典关系：</strong>' + data.relations + '</p>';
                        if (data.image) html += '<p><strong>形象：</strong>' + data.image + '</p>';
                        if (data.history) html += '<p><strong>历史：</strong>' + data.history + '</p>';
                        if (data.lifestyle) html += '<p><strong>生活方式：</strong>' + data.lifestyle + '</p>';
                        if (data.religion) html += '<p><strong>宗教信仰：</strong>' + data.religion + '</p>';
                        if (data.appearance) html += '<p><strong>外貌特征：</strong>' + data.appearance + '</p>';
                        
                        // 添加希顿的字段
                        if (data.material) html += '<p><strong>材料：</strong>' + data.material + '</p>';
                        if (data.style) html += '<p><strong>款式：</strong>' + data.style + '</p>';
                        if (data.design) html += '<p><strong>设计：</strong>' + data.design + '</p>';
                        if (data.cultural_role) html += '<p><strong>文化角色：</strong>' + data.cultural_role + '</p>';
                        
                        // 添加索福克勒斯、伊索克拉底和阿尔西比亚德的字段
                        if (data.contribution) html += '<p><strong>贡献：</strong>' + data.contribution + '</p>';
                        if (data.public_life) html += '<p><strong>公共生活：</strong>' + data.public_life + '</p>';
                        if (data.teaching) html += '<p><strong>教学理念：</strong>' + data.teaching + '</p>';
                        if (data.influence) html += '<p><strong>影响：</strong>' + data.influence + '</p>';
                        if (data.personality) html += '<p><strong>性格特点：</strong>' + data.personality + '</p>';
                        if (data.tragedy) html += '<p><strong>悲剧结局：</strong>' + data.tragedy + '</p>';
                        
                        // 保留原有字段支持
                        if (data.years) html += '<p><strong>生卒年份：</strong>' + data.years + '</p>';
                        if (data.role) html += '<p><strong>身份：</strong>' + data.role + '</p>';
                        if (data.works) html += '<p><strong>代表作：</strong>' + data.works + '</p>';
                        if (data.thoughts) html += '<p><strong>主要思想：</strong>' + data.thoughts + '</p>';
                        if (data.contributions) html += '<p><strong>贡献：</strong>' + data.contributions + '</p>';
                        if (data.anecdotes) html += '<p><strong>轶事：</strong>' + data.anecdotes + '</p>';
                        if (data.source) html += '<p><strong>出处：</strong>' + data.source + '</p>';
                        if (data.content) html += '<p><strong>内容：</strong>' + data.content + '</p>';
                        if (data.significance) html += '<p><strong>意义：</strong>' + data.significance + '</p>';
                        if (data.founder) html += '<p><strong>创始人：</strong>' + data.founder + '</p>';
                        if (data.representative) html += '<p><strong>代表人物：</strong>' + data.representative + '</p>';
                        if (data.philosophy) html += '<p><strong>哲学思想：</strong>' + data.philosophy + '</p>';
                        if (data.etymology) html += '<p><strong>词源：</strong>' + data.etymology + '</p>';
                        
                        content.innerHTML = html;
                        tooltip.appendChild(content);
                        
                        // 添加到body
                        document.body.appendChild(tooltip);
                        activeTooltip = tooltip;
                        
                        // 定位tooltip
                        var rect = event.target.getBoundingClientRect();
                        var tooltipWidth = 300; // 预估宽度
                        var windowWidth = window.innerWidth;
                        var windowHeight = window.innerHeight;
                        
                        // 计算左侧位置，确保不超出窗口
                        var left = rect.left;
                        if (left + tooltipWidth > windowWidth - 20) {
                            left = windowWidth - tooltipWidth - 20;
                        }
                        if (left < 20) left = 20;
                        
                        // 计算顶部位置，优先显示在元素下方
                        var top = rect.bottom + 10;
                        var tooltipHeight = 200; // 预估高度
                        
                        // 如果下方空间不足，显示在上方
                        if (top + tooltipHeight > windowHeight - 20) {
                            top = rect.top - tooltipHeight - 10;
                            
                            // 如果上方也没空间，居中显示
                            if (top < 20) {
                                top = Math.max(20, (windowHeight - tooltipHeight) / 2);
                            }
                        }
                        
                        tooltip.style.left = left + 'px';
                        tooltip.style.top = top + 'px';
                        
                        // 激活显示
                        setTimeout(function() {
                            tooltip.classList.add('active');
                        }, 10);
                        
                        event.preventDefault();
                        event.stopPropagation();
                    }
                } else if (!event.target.classList.contains('simple-tooltip') && 
                           !event.target.classList.contains('simple-tooltip-close') &&
                           !event.target.closest('.simple-tooltip')) {
                    // 点击其他地方关闭tooltip
                    if (activeTooltip) {
                        activeTooltip.classList.remove('active');
                        setTimeout(function() {
                            if (activeTooltip && activeTooltip.parentNode) {
                                document.body.removeChild(activeTooltip);
                                activeTooltip = null;
                            }
                        }, 300);
                    }
                }
            });
            
            // 为移动设备添加滚动处理
            window.addEventListener('scroll', function() {
                if (activeTooltip) {
                    activeTooltip.classList.remove('active');
                    setTimeout(function() {
                        if (activeTooltip && activeTooltip.parentNode) {
                            document.body.removeChild(activeTooltip);
                            activeTooltip = null;
                        }
                    }, 300);
                }
            }, { passive: true });
            
            console.log('简化版哲学家注释系统初始化完成');
            
            // 专门检查提坦之战的注释状态
            setTimeout(function() {
                console.log('检查提坦之战的注释状态...');
                var titanWar = document.querySelector('.simple-annotated[data-term="提坦之战"]');
                if (titanWar) {
                    console.log('找到提坦之战注释元素:', titanWar);
                    console.log('它的数据:', titanWar.dataset);
                    console.log('它的样式:', window.getComputedStyle(titanWar));
                    console.log('它在philosopherData中是否有对应数据:', !!philosopherData["提坦之战"]);
                    
                    // 测试手动触发点击
                    console.log('手动触发点击事件...');
                    var clickEvent = new MouseEvent('click', {
                        bubbles: true,
                        cancelable: true,
                        view: window
                    });
                    titanWar.dispatchEvent(clickEvent);
                } else {
                    console.log('未找到提坦之战注释元素!');
                    console.log('重新查找所有注释元素:');
                    var allAnnotations = document.querySelectorAll('.simple-annotated');
                    allAnnotations.forEach(function(el) {
                        console.log('- 注释:', el.dataset.term);
                    });
                }
            }, 2000);
        });
    </script>

    <!-- 添加在body结束前 -->
    <div id="slave-popup" style="display:none;">
        <span id="slave-popup-close">✕</span>
        <h3>古希腊的奴隶制度</h3>
        <p><strong>概述：</strong>奴隶在古希腊社会是重要的劳动力，约占雅典人口的30%</p>
        <p><strong>获取方式：</strong>通过战争俘虏、贩卖或出生即为奴隶</p>
        <p><strong>法律地位：</strong>几乎没有法律权利，被视为"会说话的工具"</p>
        <p><strong>日常工作：</strong>职责多样，包括家务劳动、工匠、矿工、教师</p>
        <p><strong>特殊情况：</strong>某些有技能的奴隶(如教师)可获得较好待遇</p>
    </div>

    <div id="phi-slave-tooltip">
        <div class="phi-tooltip-close" onclick="document.getElementById('phi-slave-tooltip').classList.remove('active')">✕</div>
        <div class="phi-tooltip-title">古希腊的奴隶制度</div>
        <div class="phi-tooltip-content">
            <p><strong>概述：</strong>奴隶在古希腊社会是重要的劳动力，约占雅典人口的30%</p>
            <p><strong>获取方式：</strong>通过战争俘虏、贩卖或出生即为奴隶</p>
            <p><strong>法律地位：</strong>几乎没有法律权利，被视为"会说话的工具"</p>
            <p><strong>日常工作：</strong>职责多样，包括家务劳动、工匠、矿工、教师</p>
            <p><strong>特殊情况：</strong>某些有技能的奴隶(如教师)可获得较好待遇</p>
        </div>
    </div>

    <script>
    // 在DOMContentLoaded之后执行
    document.addEventListener('DOMContentLoaded', function() {
        // 先移除所有已有的奴隶标记，确保不重复处理
        var existingMarks = document.querySelectorAll('.simple-annotated[data-term="奴隶"]');
        existingMarks.forEach(function(mark) {
            var text = mark.textContent;
            var textNode = document.createTextNode(text);
            mark.parentNode.replaceChild(textNode, mark);
        });
        
        // 找到文本中的"奴隶"一词并添加新标记
        function markSlaveTerms() {
            var textNodes = [];
            
            // 获取所有文本节点的函数
            function getTextNodes(node) {
                if (node.nodeType === 3) { // 文本节点
                    if (node.nodeValue.trim() !== '' && node.nodeValue.indexOf('奴隶') > -1) {
                        textNodes.push(node);
                    }
                } else if (node.nodeType === 1) { // 元素节点
                    // 跳过已处理的节点和脚本节点
                    if (node.tagName !== 'SCRIPT' && node.tagName !== 'STYLE' && 
                        !node.classList.contains('slave-term') && !node.closest('#slave-popup')) {
                        for (var i = 0; i < node.childNodes.length; i++) {
                            getTextNodes(node.childNodes[i]);
                        }
                    }
                }
            }
            
            // 从body开始查找所有文本节点
            getTextNodes(document.body);
            
            // 处理第一个包含"奴隶"的节点
            if (textNodes.length > 0) {
                var node = textNodes[0];
                var text = node.nodeValue;
                var slaveIndex = text.indexOf('奴隶');
                
                if (slaveIndex > -1) {
                    // 分割文本并创建标记
                    var before = text.substring(0, slaveIndex);
                    var term = text.substring(slaveIndex, slaveIndex + 2); // "奴隶"两个字
                    var after = text.substring(slaveIndex + 2);
                    
                    var fragment = document.createDocumentFragment();
                    
                    if (before) {
                        fragment.appendChild(document.createTextNode(before));
                    }
                    
                    var span = document.createElement('span');
                    span.className = 'slave-term';
                    span.textContent = term;
                    span.addEventListener('click', showSlavePopup);
                    fragment.appendChild(span);
                    
                    if (after) {
                        fragment.appendChild(document.createTextNode(after));
                    }
                    
                    // 替换原文本节点
                    node.parentNode.replaceChild(fragment, node);
                    
                    console.log('已标记第一个奴隶术语');
                }
            }
        }
        
        // 显示弹窗
        function showSlavePopup(event) {
            var popup = document.getElementById('slave-popup');
            var rect = event.target.getBoundingClientRect();
            
            // 计算位置
            var left = rect.left;
            var top = rect.bottom + 10;
            
            // 确保在窗口范围内
            if (left + 300 > window.innerWidth) {
                left = window.innerWidth - 320;
            }
            
            if (top + 200 > window.innerHeight) {
                top = rect.top - 220;
            }
            
            popup.style.left = left + 'px';
            popup.style.top = top + 'px';
            popup.style.display = 'block';
            
            event.stopPropagation();
        }
        
        // 关闭弹窗
        document.getElementById('slave-popup-close').addEventListener('click', function(e) {
            document.getElementById('slave-popup').style.display = 'none';
            e.stopPropagation();
        });
        
        // 点击其他地方关闭弹窗
        document.addEventListener('click', function(e) {
            if (!e.target.classList.contains('slave-term') && 
                !e.target.closest('#slave-popup')) {
                document.getElementById('slave-popup').style.display = 'none';
            }
        });
        
        // 执行标记
        setTimeout(markSlaveTerms, 500);
        });

        // 添加奴隶术语点击事件处理
        document.addEventListener('DOMContentLoaded', function() {
            // 修复可能的视觉冲突
            function fixVisualConflicts() {
                // 将所有可能的视觉效果层添加pointer-events: none
                var visualLayers = document.querySelectorAll(
                    '#xi-visual-layer, .xi-effect-container, .xi-canvas-container, ' + 
                    '[class*="overlay"], [class*="mask"], [class*="effect"], ' + 
                    '.theme-transition, .scanlines, .glow, .matrix-particles, ' +
                    'canvas, svg, .xi-canvas, [class*="animation"], .particle-container'
                );
                
                visualLayers.forEach(function(layer) {
                    if (layer.style.pointerEvents !== 'none') {
                        layer.style.pointerEvents = 'none';
                    }
                    
                    // 降低z-index以避免遮挡
                    var zIndex = parseInt(window.getComputedStyle(layer).zIndex) || 0;
                    if (zIndex > 9000) {
                        layer.style.zIndex = Math.min(zIndex, 8000);
                    }
                });
                
                // 确保tooltip有最高优先级
                var tooltip = document.getElementById('phi-slave-tooltip');
                if (tooltip) {
                    tooltip.style.zIndex = '9999999';
                }
            }
            
            // 初始调用一次
            fixVisualConflicts();
            
            // 每秒检查一次
            setInterval(fixVisualConflicts, 1000);
            
            // 绑定点击事件处理
            var slaveTerms = document.querySelectorAll('.phi-term-slave');
            slaveTerms.forEach(function(term) {
                term.addEventListener('click', function(event) {
                    var tooltip = document.getElementById('phi-slave-tooltip');
                    
                    // 计算tooltip位置 - 显示在鼠标右下角
                    var rect = event.target.getBoundingClientRect();
                    var tooltipWidth = 300; // 预估宽度
                    var tooltipHeight = 250; // 预估高度
                    
                    // 默认显示在点击元素的右下方
                    var left = rect.right + 10;
                    var top = rect.bottom + 10;
                    
                    // 检查是否会超出屏幕右侧
                    if (left + tooltipWidth > window.innerWidth - 20) {
                        // 如果超出右侧，则显示在左侧
                        left = Math.max(20, rect.left - tooltipWidth - 10);
                    }
                    
                    // 检查是否会超出屏幕底部
                    if (top + tooltipHeight > window.innerHeight - 20) {
                        // 如果超出底部，则显示在上方
                        top = Math.max(20, rect.top - tooltipHeight - 10);
                    }
                    
                    // 设置位置并显示
                    tooltip.style.left = left + 'px';
                    tooltip.style.top = top + 'px';
                    tooltip.classList.add('active');
                    
                    event.stopPropagation();
                });
            });
            
            // 点击其他地方关闭tooltip
            document.addEventListener('click', function(e) {
                if (!e.target.classList.contains('phi-term-slave') && 
                    !e.target.closest('#phi-slave-tooltip')) {
                    var tooltip = document.getElementById('phi-slave-tooltip');
                    tooltip.classList.remove('active');
                }
            });
            
            // 移除手动添加active类的代码，改为由统一滚动系统控制
            /*
            // 激活所有section
            document.querySelectorAll('.section').forEach(function(section) {
                if (!section.classList.contains('active')) {
                    section.classList.add('active');
                }
            });
            */
        });
    </script>

    <!-- 调试工具 - 用于修复播放器问题 -->
    <script>
        // 等待页面完全加载
        window.addEventListener('DOMContentLoaded', function() {
            // 延迟执行，确保播放器已加载
            setTimeout(function() {
                try {
                    console.log('开始检查播放器...');
                    
                    // 创建调试按钮
                    var debugBtn = document.createElement('button');
                    debugBtn.textContent = '修复播放器';
                    debugBtn.style.position = 'fixed';
                    debugBtn.style.bottom = '100px';
                    debugBtn.style.right = '20px';
                    debugBtn.style.zIndex = '10001';
                    debugBtn.style.backgroundColor = '#00ff9d';
                    debugBtn.style.color = 'black';
                    debugBtn.style.border = 'none';
                    debugBtn.style.padding = '10px';
                    debugBtn.style.borderRadius = '5px';
                    debugBtn.style.cursor = 'pointer';
                    debugBtn.style.display = 'none'; // 隐藏按钮但保留其功能
                    
                    // 添加点击事件
                    debugBtn.addEventListener('click', function() {
                        console.log('尝试修复播放器...');
                        
                        // 查找播放器元素
                        var playerToggle = document.querySelector('.xi-music-player .player-toggle');
                        var playerContainer = document.querySelector('.xi-music-player .player-container');
                        
                        if (playerToggle) {
                            console.log('找到了播放器切换按钮');
                            
                            // 提高z-index
                            playerToggle.style.zIndex = '20000';
                            if (playerContainer) {
                                playerContainer.style.zIndex = '19999';
                                
                                // 强制显示播放器
                                playerContainer.style.transform = 'scale(1)';
                                playerContainer.style.opacity = '1';
                                playerContainer.style.visibility = 'visible';
                                playerContainer.classList.add('active');
                            }
                            
                            // 尝试触发点击事件
                            try {
                                playerToggle.click();
                                setTimeout(function() {
                                    playerToggle.click();
                                }, 1000);
                            } catch (e) {
                                console.error('点击播放器按钮失败:', e);
                            }
                        } else {
                            console.log('找不到播放器切换按钮，尝试重新加载播放器...');
                            
                            // 动态加载xi-music.js
                            var script = document.createElement('script');
                            script.src = '/XiCore/modules/xi-music.js';
                            document.head.appendChild(script);
                        }
                        
                        // 显示调试信息
                        var info = document.createElement('div');
                        info.textContent = '播放器修复尝试完成，请检查';
                        info.style.position = 'fixed';
                        info.style.bottom = '150px';
                        info.style.right = '20px';
                        info.style.backgroundColor = 'rgba(0,0,0,0.8)';
                        info.style.color = '#00ff9d';
                        info.style.padding = '10px';
                        info.style.borderRadius = '5px';
                        info.style.zIndex = '10002';
                        document.body.appendChild(info);
                        
                        // 2秒后移除信息
                        setTimeout(function() {
                            if (info.parentNode) {
                                info.parentNode.removeChild(info);
                            }
                        }, 2000);
                    });
                    
                    // 添加按钮到页面
                    document.body.appendChild(debugBtn);
                    
                } catch (e) {
                    console.error('调试工具初始化失败:', e);
                }
            }, 1000);
        });
    </script>
</body>
</html>